<!doctype html>
<html lang="en">
 <head>
  
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  
  
  <title>File API</title>
  
  
  <style>
@media print {
  html { margin: 0 !important; }
  body { font-family: serif; }
  th, td { font-family: inherit; }
  a { color: inherit !important; }
  .example:before { font-family: serif !important; }
  a:link, a:visited { text-decoration: none !important; }
  a:link:after, a:visited:after { /* create a cross-ref "see..." */; }
}
@page {
  margin: 1.5cm 1.1cm;
}
h1, h2, h3, h4, h5, h6 { page-break-after: avoid; }
figure, div.figure, div.sidefigure, pre, table.propdef, table.propdef-extra,
.example { page-break-inside: avoid; }
dt { page-break-after: avoid; }

body {
  background: white;
  /* background-image: floating-margin-image-goes-here; */
  background-position: top left;
  background-attachment: fixed;
  background-repeat: no-repeat;
  color: black;
  counter-reset: exampleno figure issue;
  font-family: sans-serif;
  line-height: 1.5;
  margin: 0 auto;
  max-width: 50em;
  padding: 2em 1em 2em 70px;
}

/* General structural markup */

h1, h2, h3, h4, h5, h6 { text-align: left; }
h1, h2, h3 { color: #005A9C; }
h1 { font: 170% sans-serif; }
h2 { font: 140% sans-serif; }
h3 { font: 120% sans-serif; }
h4 { font: bold 100% sans-serif; }
h5 { font: italic 100% sans-serif; }
h6 { font: small-caps 100% sans-serif; }
h2, h3, h4, h5, h6 { margin-top: 3em; }
h1 + h2 { margin-top: 0em; }
h2 + h3, h3 + h4, h4 + h5, h5 + h6 { margin-top: 1.2em; }

.head { margin-bottom: 1em; }
.head h1 { margin-top: 2em; clear: both; }
.head table { margin-left: 2em; margin-top: 2em; }
.head dd { margin-bottom: 0; }

p.copyright { font-size: small; }
p.copyright small { font-size: small; }

pre { margin: 1em 0 1em 2em; overflow: auto; }
pre, code, .idl-code {
  font-size: .9em;
  font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
}
dt dfn code { font-size: inherit; }

dfn { font-weight: bolder; }
dfn var { font-style: normal; }

s, del {text-decoration: line-through; color: red; }
u, ins {text-decoration: underline; background: #bfa; }

sup {
  vertical-align: super;
  font-size: 80%
}

details { display: block; }

dt { font-weight: bold; }
dd { margin: 0 0 1em 2em; }
ul, ol { margin-left: 0; padding-left: 2em; }
li { margin: 0.25em 2em 0.5em 0; padding-left: 0; }
[data-md] > :first-child { margin-top: 0; }
[data-md] > :last-child { margin-bottom: 0; }

td.pre {
  white-space: pre-wrap;
}

.css, .property { color: #005a9c; }
.property { white-space: nowrap; }


/* Boilerplate sections */

ul.indexlist { margin-left: 0; columns: 13em; }
ul.indexlist li { margin-left: 0; list-style: none }
ul.indexlist li li { margin-left: 1em; }
ul.indexlist a { font-weight: bold; }
ul.indexlist ul, ul.indexlist dl { font-size: smaller; }
ul.indexlist dl { margin-top: 0; }
ul.indexlist dt { margin: .2em 0 .2em 20px; }
ul.indexlist dd { margin: .2em 0 .2em 40px; }

.toc {
  font-weight: bold;
  line-height: 1.3;
  list-style: none;
  margin: 1em 0 0 5em;
  padding: 0;
}
.toc ul { margin: 0; padding: 0; font-weight: normal; }
.toc ul ul { margin: 0 0 0 2em; font-style: italic; }
.toc ul ul ul { margin: 0}
.toc > li { margin: 1.5em 0; padding: 0; }
.toc li { clear: both; }
.toc ul.toc li { margin: 0.3em 0 0 0; }
.toc a { border-bottom-style: none; }
.toc a:hover, ul.toc a:focus { border-bottom-style: solid; }
/* Section numbers in a column of their own */
.toc span.secno {float: left; width: 4em; margin-left: -5em}
.toc ul ul span.secno { margin-left: -7em; }

table.proptable {
  font-size: small;
  border-collapse: collapse;
  border-spacing: 0;
  text-align: left;
  margin: 1em 0;
}
table.proptable td, table.proptable th {
  padding: 0.4em;
  text-align: center;
}
table.proptable tr:hover td { background: #DEF; }


/* Links */

a[href] { color: inherit; border-bottom: 1px solid silver; text-decoration: none; }
a[href]:hover { background: #ffa; }
a[href]:active { color: #C00; background: transparent; }
img, a.logo { border-style: none; }
.heading, .issue, .note, .example, li, dt { position: relative; }
/* CSS-ish link types */
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {content: "“";}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {content: "”";}
[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after { content: ""; }
/* Element-type link styling */
[data-link-type=element] { font-family: monospace; }
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after { content: ">" }
/* Self-links */
a.self-link {
  position: absolute;
  top: 0;
  left: -2.5em;
  width: 2em;
  height: 2em;
  text-align: center;
  border: none;
  transition: opacity .2s;
  opacity: .5;
}
a.self-link:hover {
  opacity: 1;
}
.heading > a.self-link {
  font-size: 83%;
}
li > a.self-link {
  left: -3.5em;
}
dfn > a.self-link {
  top: auto;
  left: auto;
  opacity: 0;
  width: 1.5em;
  height: 1.5em;
  background: gray;
  color: white;
  font-style: normal;
  transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
  opacity: 1;
}
dfn > a.self-link:hover {
  color: black;
}
a.self-link::before { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before { content: "#"; }


/* Figures */

figure {
  display: block;
  text-align: center;
  margin: 2.5em 0;
}
figure.sidefigure {
  float: right;
  width: 50%;
  margin: 0 0 0.5em 0.5em
}
figure pre {
  text-align: left;
  display: table;
  margin: 1em auto;
}
figure table {
  margin: auto;
}
figure img, figure object {
  display: block;
  margin: auto;
  max-width: 100%
}
figcaption {
  counter-increment: figure;
  font-size: 90%;
  font-style: italic;
  text-align: center;
}
figcaption::before {
  content: "Figure " counter(figure) ". ";
  font-weight: bold;
}
dd figure { margin-left: -2em; }


/* Definition tables */

table.definition {
  border-spacing: 0;
  padding: 0 1em 0.5em;
  width: 100%;
  table-layout: fixed;
  margin: 1.2em 0;
}
table.definition td, table.definition th {
  padding: 0.5em;
  vertical-align: baseline;
  border-bottom: 1px solid #bbd7e9;
}
table.definition th:first-child {
  font-style: italic;
  font-weight: normal;
  text-align: left;
  width: 8.3em;
  padding-left: 1em;
}
table.definition > tbody > tr:last-child > th,
table.definition > tbody > tr:last-child > td {
  border-bottom: none;
}
table.definition tr:first-child > th,
table.definition tr:first-child > td {
  padding-top: 1em;
}
/* Footnotes at the bottom of a definition table */
table.definition td.footnote {
  font-style: normal;
  padding-top: .6em;
  width: auto;
}
table.definition td.footnote::before {
  content: " ";
  display: block;
  height: 0.6em;
  width: 4em;
  border-top: thin solid;
}


/* IDL fragments */

pre.idl {
  padding: .5em 1em;
  margin: 1.2em 0;
}
pre.idl :link, pre.idl :visited {
  color:inherit;
  background:transparent;
}


/* Data tables */
/* Comes in plain, long, complex, or define varieties */

.data {
  margin: 1em auto;
  border-collapse: collapse;
  width: 100%;
  border: hidden;
}
.data {
  text-align: center;
  width: auto;
}
.data caption {
  width: 100%;
}
.data td, .data th {
  padding: 0.5em;
  border-width: 1px;
  border-color: silver;
  border-top-style: solid;
}
.data thead td:empty {
  padding: 0;
  border: 0;
}
.data thead th[scope="row"] {
  text-align: right;
  color: inherit;
}
.data thead,
.data tbody {
  color: inherit;
  border-bottom: 2px solid;
}
.data colgroup {
  border-left: 2px solid;
}
.data tbody th:first-child,
.data tbody td[scope="row"]:first-child {
  text-align: right;
  color: inherit;
  border-right: 2px solid;
  border-top: 1px solid silver;
  padding-right: 1em;
}
.data.define td:last-child {
  text-align: left;
}
.data tbody th[rowspan],
.data tbody td[rowspan] {
  border-left: 1px solid silver;
}
.data tbody th[rowspan]:first-child,
.data tbody td[rowspan]:first-child {
  border-left: 0;
  border-right: 1px solid silver;
}
.data.complex th,
.data.complex td {
  border: 1px solid silver;
}
.data td.long {
 vertical-align: baseline;
 text-align: left;
}
.data img {
  vertical-align: middle;
}


/* Switch/case <dl>s */

dl.switch {
 padding-left: 2em;
}
dl.switch > dt {
 text-indent: -1.5em;
}
dl.switch > dt:before {
 content: '↪';
 padding: 0 0.5em 0 0;
 display: inline-block;
 width: 1em;
 text-align: right;
 line-height: 0.5em;
}


/* Style for At Risk features (intended as editorial aid, not intended for publishing) */
.atrisk::before {
 position: absolute;
 margin-left: -5em;
 margin-top: -2px;
 padding: 4px;
 border: 1px solid;
 content: 'At risk';
 font-size: small;
 background-color: white;
 color: gray;
 border-radius: 1em;
 text-align: center;
}


/* Obsoletion notice */
details.annoying-warning[open] {
  background: #fdd;
  color: red;
  font-weight: bold;
  text-align: center;
  padding: .5em;
  border: thick solid red;
  border-radius: 1em;
  position: fixed;
  left: 1em;
  right: 1em;
  bottom: 1em;
  z-index: 1000;
}
details.annoying-warning:not([open]) > summary {
  background: #fdd;
  color: red;
  font-weight: bold;
  text-align: center;
  padding: .5em;
}


/* Examples */

.example {
  counter-increment: exampleno;
}
.example::before {
  content: "Example";
  content: "Example " counter(exampleno);
  min-width: 7.5em;
  text-transform: uppercase;
  display: block;
}
.illegal-example::before {
  content: "Invalid Example";
  content: "Invalid Example" counter(exampleno);
}
.example, .illegal-example, .html, .illegal-html, .xml, .illegal-xml {
  padding: 0.5em;
  margin: 1em 0;
  position: relative;
  clear: both;
}
pre.example, pre.illegal-example, pre.html,
pre.illegal-html, pre.xml, pre.illegal-xml {
  padding-top: 1.5em;
}
.illegal-example { color: red; }
.illegal-example p { color: black; }
.html { color: #600; }
.illegal-html { color: red; }
.illegal-html p { color: black; }
.xml { color: #600; }
.illegal-xml { color: red; }
.illegal-xml p { color: black; }
code.css { font-family: inherit; font-size: 100% }
code.html { color: #600 } /* inline HTML */
code.xml { color: #600 }  /* inline XML */


/* Issues */

.issue {
  border-color: #E05252;
  background: #FBE9E9;
  counter-increment: issue;
}
.issue:before {
  content: "Issue " counter(issue);
  padding-right: 1em;
  text-transform: uppercase;
  color: #E05252;
}


/* Whys */

details.why > summary {
  font-style: italic;
}
details.why[open] > summary {
  border-bottom: 1px silver solid;
}


/* All the blocks get similarly styled */

table.definition, pre.idl, .example, .note, details.why, .issue {
  border: none;
  border-left: .5em solid black;
  border-left: .5rem solid black;
}
.issue, .note, .example, .why {
  padding: .5em;
  margin-top: 1em;
  margin-bottom: 1em;
}
table.definition, pre.idl {
  background: hsl(210, 70%, 95%);
  border-color: hsl(210, 80%, 75%);
}
.example {
  background: hsl(50, 70%, 95%);
  border-color: hsl(50, 70%, 60%);
}
.example::before {
  color: hsl(50, 70%, 60%);
}
.note, details.why {
  background: hsl(120, 70%, 95%);
  border-color: hsl(120, 70%, 60%);
}
.note::before {
  color: hsl(120, 70%, 60%);
}
.issue {
  background: hsl(0, 70%, 95%);
  border-color: hsl(0, 70%, 60%);
}
.issue::before {
  color: hsl(0, 70%, 60%);
}
span.issue, span.note {
  padding: .1em .5em .15em;
  border-right-width: .5em;
  border-right-style: solid;
}
  </style>
  

  <meta content="Bikeshed 1.0.0" name="generator">
  <style>/* http://prismjs.com/download.html?themes=prism&languages=clike */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', monospace;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important {
	font-weight: bold;
}

.token.entity {
	cursor: help;
}
</style>
 </head>
 

 <body class="h-entry">

  <div class="head">
  
   <p data-fill-with="logo"></p>
  
   <h1 class="p-name no-ref" id="title">File API</h1>
  
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft,
    <time class="dt-updated" datetime="2015-04-29">29 April 2015</time></span></h2>
  
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
     <dt>Latest version:
     <dd><a href="http://www.w3.org/TR/FileAPI/">http://www.w3.org/TR/FileAPI/</a>
     <dt>Previous Versions:
     <dd><a href="http://www.w3.org/TR/2012/WD-FileAPI-20121025/" rel="previous">http://www.w3.org/TR/2012/WD-FileAPI-20121025/</a>
     <dt>Issue Tracking:
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="http://arunranga.com/">Arun Ranganathan</a> (<span class="p-org org">Mozilla Corporation</span>) <a class="u-email email" href="mailto:arun@mozilla.com">arun@mozilla.com</a>
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:jonas@sicking.cc">Jonas Sicking</a> (<span class="p-org org">Mozilla Corporation</span>)
    </dl>
   </div>
  
   <div data-fill-with="warning"></div>
  
   <p class="copyright" data-fill-with="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img alt="CC0" src="https://licensebuttons.net/p/zero/1.0/80x15.png"></a>
To the extent possible under law, the editors have waived all copyright
and related or neighboring rights to this work.
In addition, as of 29 April 2015,
the editors have made this specification available under the
<a href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>,
which is available at http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0.
Parts of this work may be from another specification document.  If so, those parts are instead covered by the license of that specification document.
</p>
  
   <hr title="Separator for header">
</div>


  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>

  <div class="p-summary" data-fill-with="abstract">
   <p>This specification provides an API for representing file objects in web applications,

as well as programmatically selecting them and accessing their data. This includes:</p>




   <ul>

    <li data-md="">

     <p>A <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code> interface, which represents an array of individually selected files from the underlying system. The user interface for selection can be invoked via <code>&lt;input type="file"></code>, i.e. when the input element is in the <code>File Upload</code> state <a data-link-type="biblio" href="#biblio-html">[HTML]</a> .</p>



    <li data-md="">

     <p>A <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> interface, which represents immutable raw binary data, and allows access to ranges of bytes within the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object as a separate <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>.</p>



    <li data-md="">

     <p>A <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> interface, which includes readonly informational attributes about a file such as its name and the date of the last modification (on disk) of the file.</p>



    <li data-md="">

     <p>A <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> interface, which provides methods to read a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>, and an event model to obtain the results of these reads.</p>



    <li data-md="">

     <p>A <a href="#url">URL scheme</a> for use with binary data such as files, so that they can be referenced within web applications.</p>


</ul>



   <p>Additionally, this specification defines objects to be used within threaded web applications for the synchronous reading of files.</p>




   <p><a href="#requirements">§11 
Requirements and Use Cases</a> covers the motivation behind this specification.</p>




   <p>This API is designed to be used in conjunction with other APIs and elements on the web platform, notably:

<code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest">XMLHttpRequest</a></code> (e.g. with an overloaded <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-xmlhttprequest-send">send()</a></code> method for <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> arguments),
<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#dom-messageport-postmessage">postMessage()</a></code>,
<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#datatransfer">DataTransfer</a></code> (part of the drag and drop API defined in <a data-link-type="biblio" href="#biblio-html">[HTML]</a>)
and Web Workers.
Additionally, it should be possible to programmatically obtain a list of files from the <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-input-element">input</a></code> element
when it is in the <code>File Upload</code> state <a data-link-type="biblio" href="#biblio-html">[HTML]</a>.
These kinds of behaviors are defined in the appropriate affiliated specifications.</p>

</div>

  <div data-fill-with="at-risk"></div>


  <h2 class="no-num no-toc no-ref heading settled" id="contents"><span class="content">Table of Contents</span></h2>

  <div data-fill-with="table-of-contents" role="navigation">
   <ul class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">
Introduction</span></a>
    <li><a href="#conformance"><span class="secno">2</span> <span class="content">
Conformance</span></a>
     <ul class="toc">
      <li><a href="#dependencies"><span class="secno">2.1</span> <span class="content">
Dependencies</span></a>
     </ul>
    <li><a href="#terminology"><span class="secno">3</span> <span class="content">
Terminology and Algorithms</span></a>
    <li><a href="#blob"><span class="secno">4</span> <span class="content">
The Blob Interface and Binary Data</span></a>
     <ul class="toc">
      <li><a href="#constructorBlob"><span class="secno">4.1</span> <span class="content">
Constructors</span></a>
       <ul class="toc">
        <li><a href="#constructorParams"><span class="secno">4.1.1</span> <span class="content">
Constructor Parameters</span></a>
       </ul>
      <li><a href="#attributes-blob"><span class="secno">4.2</span> <span class="content">
Attributes</span></a>
      <li><a href="#methodsandparams-blob"><span class="secno">4.3</span> <span class="content">
Methods and Parameters</span></a>
       <ul class="toc">
        <li><a href="#slice-method-algo"><span class="secno">4.3.1</span> <span class="content">
The slice method</span></a>
        <li><a href="#close-method"><span class="secno">4.3.2</span> <span class="content">
The close method</span></a>
       </ul>
     </ul>
    <li><a href="#file"><span class="secno">5</span> <span class="content">
The File Interface</span></a>
     <ul class="toc">
      <li><a href="#file-constructor"><span class="secno">5.1</span> <span class="content">
Constructor</span></a>
       <ul class="toc">
        <li><a href="#file-constructor-params"><span class="secno">5.1.1</span> <span class="content">
Constructor Parameters</span></a>
       </ul>
      <li><a href="#file-attrs"><span class="secno">5.2</span> <span class="content">
Attributes</span></a>
     </ul>
    <li><a href="#filelist"><span class="secno">6</span> <span class="content">
The FileList Interface</span></a>
     <ul class="toc">
      <li><a href="#attributes-filelist"><span class="secno">6.1</span> <span class="content">
Attributes</span></a>
      <li><a href="#filelist-methods-params"><span class="secno">6.2</span> <span class="content">
Methods and Parameters</span></a>
     </ul>
    <li><a href="#reading-data-section"><span class="secno">7</span> <span class="content">
Reading Data</span></a>
     <ul class="toc">
      <li><a href="#readOperationSection"><span class="secno">7.1</span> <span class="content">
The Read Operation</span></a>
      <li><a href="#blobreader-task-source"><span class="secno">7.2</span> <span class="content">
The File Reading Task Source</span></a>
      <li><a href="#APIASynch"><span class="secno">7.3</span> <span class="content">
The FileReader API</span></a>
       <ul class="toc">
        <li><a href="#filereaderConstrctr"><span class="secno">7.3.1</span> <span class="content">
Constructor</span></a>
        <li><a href="#event-handler-attributes-section"><span class="secno">7.3.2</span> <span class="content">
Event Handler Content Attributes</span></a>
        <li><a href="#blobreader-state"><span class="secno">7.3.3</span> <span class="content">
FileReader States</span></a>
        <li><a href="#reading-a-file"><span class="secno">7.3.4</span> <span class="content">
Reading a File or Blob</span></a>
         <ul class="toc">
          <li><a href="#filedata-attr"><span class="secno">7.3.4.1</span> <span class="content">
The <code class="idl"><span>result</span></code> attribute</span></a>
          <li><a href="#readAsDataURL"><span class="secno">7.3.4.2</span> <span class="content">
The <code class="idl"><span>readAsDataURL()</span></code> method</span></a>
          <li><a href="#readAsText"><span class="secno">7.3.4.3</span> <span class="content">
The <code class="idl"><span>readAsText()</span></code> method</span></a>
          <li><a href="#readAsArrayBuffer"><span class="secno">7.3.4.4</span> <span class="content">
The <code class="idl"><span>readAsArrayBuffer()</span></code> method</span></a>
          <li><a href="#error-steps"><span class="secno">7.3.4.5</span> <span class="content">
Error Steps</span></a>
          <li><a href="#abort"><span class="secno">7.3.4.6</span> <span class="content">
The abort() method</span></a>
          <li><a href="#blobAndFileParams"><span class="secno">7.3.4.7</span> <span class="content">
Blob Parameters</span></a>
         </ul>
       </ul>
      <li><a href="#enctype"><span class="secno">7.4</span> <span class="content">
Determining Encoding</span></a>
      <li><a href="#events"><span class="secno">7.5</span> <span class="content">
Events</span></a>
       <ul class="toc">
        <li><a href="#event-summary"><span class="secno">7.5.1</span> <span class="content">
Event Summary</span></a>
        <li><a href="#eventInvariants"><span class="secno">7.5.2</span> <span class="content">
Summary of Event Invariants</span></a>
       </ul>
      <li><a href="#readingOnThreads"><span class="secno">7.6</span> <span class="content">
Reading on Threads</span></a>
       <ul class="toc">
        <li><a href="#FileReaderSync"><span class="secno">7.6.1</span> <span class="content">
The <code class="idl"><span>FileReaderSync</span></code> API</span></a>
         <ul class="toc">
          <li><a href="#filereadersyncConstrctr"><span class="secno">7.6.1.1</span> <span class="content">
Constructors</span></a>
          <li><a href="#readAsTextSync"><span class="secno">7.6.1.2</span> <span class="content">
The <code class="idl"><span>readAsText()</span></code> method</span></a>
          <li><a href="#readAsDataURLSync-section"><span class="secno">7.6.1.3</span> <span class="content">
The <code class="idl"><span>readAsDataURL()</span></code> method</span></a>
          <li><a href="#readAsArrayBufferSyncSection"><span class="secno">7.6.1.4</span> <span class="content">
The <code class="idl"><span>readAsArrayBuffer()</span></code> method</span></a>
         </ul>
       </ul>
     </ul>
    <li><a href="#ErrorAndException"><span class="secno">8</span> <span class="content">
Errors and Exceptions</span></a>
     <ul class="toc">
      <li><a href="#error-codes"><span class="secno">8.1</span> <span class="content">
Throwing an Exception or Returning an Error</span></a>
     </ul>
    <li><a href="#url"><span class="secno">9</span> <span class="content">
A URL for Blob and File reference</span></a>
     <ul class="toc">
      <li><a href="#use-cases-scheme"><span class="secno">9.1</span> <span class="content">
Requirements for a New Scheme</span></a>
      <li><a href="#alternative-schemas"><span class="secno">9.2</span> <span class="content">
Discussion of Existing Schemes</span></a>
      <li><a href="#DefinitionOfScheme"><span class="secno">9.3</span> <span class="content">
The Blob URL</span></a>
       <ul class="toc">
        <li><a href="#originOfBlobURL"><span class="secno">9.3.1</span> <span class="content">
Origin of Blob URLs</span></a>
        <li><a href="#unicodeSerializationOfBlobURL"><span class="secno">9.3.2</span> <span class="content">
Unicode Serialization of a Blob URL</span></a>
        <li><a href="#fragmentDiscussion"><span class="secno">9.3.3</span> <span class="content">
Discussion of Fragment Identifier</span></a>
       </ul>
      <li><a href="#requestResponseModel"><span class="secno">9.4</span> <span class="content">
Dereferencing Model for Blob URLs</span></a>
       <ul class="toc">
        <li><a href="#TwoHundredOK"><span class="secno">9.4.1</span> <span class="content">
200 OK</span></a>
        <li><a href="#processing-media-types"><span class="secno">9.4.2</span> <span class="content">
Response Headers</span></a>
        <li><a href="#NetworkError"><span class="secno">9.4.3</span> <span class="content">
Network Errors</span></a>
        <li><a href="#ProtocolExamples"><span class="secno">9.4.4</span> <span class="content">
Sample Request and Response Headers</span></a>
       </ul>
      <li><a href="#creating-revoking"><span class="secno">9.5</span> <span class="content">
Creating and Revoking a Blob URL</span></a>
       <ul class="toc">
        <li><a href="#createRevokeMethodsParams"><span class="secno">9.5.1</span> <span class="content">
Methods and Parameters</span></a>
        <li><a href="#examplesOfCreationRevocation"><span class="secno">9.5.2</span> <span class="content">
Examples of Blob URL Creation and Revocation</span></a>
       </ul>
      <li><a href="#lifeTime"><span class="secno">9.6</span> <span class="content">
Lifetime of Blob URLs</span></a>
     </ul>
    <li><a href="#security-discussion"><span class="secno">10</span> <span class="content">
Security Considerations</span></a>
    <li><a href="#requirements"><span class="secno">11</span> <span class="content">
Requirements and Use Cases</span></a>
    <li><a href="#blob-url-grammar"><span class="secno"></span> <span class="content">
Appendix A: Blob URL Grammar</span></a>
     <ul class="toc">
      <li><a href="#uuid-abnf"><span class="secno"></span> <span class="content">
An ABNF for UUID</span></a>
      <li><a href="#fragment-abnf"><span class="secno"></span> <span class="content">
An ABNF for Fragment Identifiers</span></a>
     </ul>
    <li><a href="#acks"><span class="secno"></span> <span class="content">
Acknowledgements</span></a>
    <li><a href="#conformance0"><span class="secno"></span> <span class="content">
Conformance</span></a>
    <li><a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ul class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ul>
    <li><a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ul class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ul>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ul></div>

  <main>







   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
Introduction</span><a class="self-link" href="#intro"></a></h2>


   <p><em>This section is informative.</em></p>


   <p>Web applications should have the ability to manipulate as wide as possible a range of user input,
including files that a user may wish to upload to a remote server or manipulate inside a rich web application.
This specification defines the basic representations for files,
lists of files,
errors raised by access to files,
and programmatic ways to read files.
Additionally, this specification also defines an interface that represents "raw data"
which can be asynchronously processed on the main thread of conforming user agents.
The interfaces and API defined in this specification can be used with other interfaces and APIs exposed to the web platform.</p>


   <p>The <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> interface represents file data typically obtained from the underlying file system,
and the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> interface
("Binary Large Object" - a name originally introduced to web APIs in [[Google Gears Blob API]])
represents immutable raw data.
<code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> reads should happen asynchronously on the main thread,
with an optional synchronous API used within threaded web applications.
An asynchronous API for reading files prevents blocking and UI "freezing" on a user agent’s main thread.
This specification defines an asynchronous API based on an <em>event model</em>
to read and access a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>’s data.
A <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object provides asynchronous read methods to access that file’s data
through event handler content attributes and the firing of events.
The use of events and event handlers allows separate code blocks the ability
to monitor the <em>progress of the read</em>
(which is particularly useful for remote drives or mounted drives,
	where file access performance may vary from local drives)
and error conditions that may arise during reading of a file.
An example will be illustrative.</p>


   <div class="example" id="example-f33e4c58"><a class="self-link" href="#example-f33e4c58"></a>
	In the example below, different code blocks handle progress, error, and success conditions.

	
    <pre class="lang-javascript">function startRead() {
  // obtain input element through DOM

  var file = document.getElementById('file').files[0];
  if(file){
    getAsText(file);
  }
}

function getAsText(readFile) {

  var reader = new FileReader();

  // Read file into memory as UTF-16
  reader.readAsText(readFile, "UTF-16");

  // Handle progress, success, and errors
  reader.onprogress = updateProgress;
  reader.onload = loaded;
  reader.onerror = errorHandler;
}

function updateProgress(evt) {
  if (evt.lengthComputable) {
    // evt.loaded and evt.total are ProgressEvent properties
    var loaded = (evt.loaded / evt.total);
    if (loaded &lt; 1) {
      // Increase the prog bar length
      // style.width = (loaded * 200) + "px";
    }
  }
}

function loaded(evt) {
  // Obtain the read file data
  var fileString = evt.target.result;
  // Handle UTF-16 file dump
  if(utils.regexp.isChinese(fileString)) {
    //Chinese Characters + Name validation
  }
  else {
    // run other charset test
  }
  // xhr.send(fileString)
}

function errorHandler(evt) {
  if(evt.target.error.name == "NotReadableError") {
    // The file could not be read
  }
}
</pre>
</div>


   <h2 class="heading settled" data-level="2" id="conformance"><span class="secno">2. </span><span class="content">
Conformance</span><a class="self-link" href="#conformance"></a></h2>


   <p>Everything in this specification is normative except for
examples and sections marked as being informative.</p>


   <p>The keywords “<span class="rfc2119">MUST</span>”,
“<span class="rfc2119">MUST NOT</span>”,
“<span class="rfc2119">REQUIRED</span>”,
“<span class="rfc2119">SHALL</span>”,
“<span class="rfc2119">SHALL NOT</span>”,
“<span class="rfc2119">RECOMMENDED</span>”,
“<span class="rfc2119">MAY</span>” and
“<span class="rfc2119">OPTIONAL</span>” in this document are to be
interpreted as described in
<cite><a href="http://www.ietf.org/rfc/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a></cite>
<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a>.</p>


   <p>The following conformance classes are defined by this specification:</p>


   <dl>
	
    <dt><dfn data-dfn-type="dfn" data-noexport="" id="dfn-conforming-implementation">conforming user agent<a class="self-link" href="#dfn-conforming-implementation"></a></dfn>
	
    <dd>
		A user agent is considered to be a <a data-link-type="dfn" href="#dfn-conforming-implementation">conforming user agent</a>
		if it satisfies all of the <span class="rfc2119">MUST</span>-,
		<span class="rfc2119">REQUIRED</span>-,
		and <span class="rfc2119">SHALL</span>-level criteria in this specification that apply to implementations.
		This specification uses both the terms "conforming user agent" and "user agent" to refer to this product class.


     <p>User agents may implement algorithms in this specifications in any way desired,
		so long as the end result is indistinguishable from the result that would be obtained
		from the specification’s algorithms.</p>
     
</dl>


   <p>User agents that use ECMAScript to implement the APIs defined in this specification
must implement them in a manner consistent with the ECMAScript Bindings
defined in the Web IDL specification <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> as this specification uses that specification and terminology.</p>



   <h3 class="heading settled" data-level="2.1" id="dependencies"><span class="secno">2.1. </span><span class="content">
Dependencies</span><a class="self-link" href="#dependencies"></a></h3>


   <p>This specification relies on underlying specifications.</p>


   <dl>
	
    <dt>DOM
	
    <dd>A <a data-link-type="dfn" href="#dfn-conforming-implementation">conforming user agent</a> must support at least the subset of the functionality defined in DOM4 that this specification relies upon;
		in particular, it must support <code class="idl"><a data-link-type="idl" href="http://dom.spec.whatwg.org/#eventtarget">EventTarget</a></code>.

	
    <dt>Progress Events
	
    <dd>A <a data-link-type="dfn" href="#dfn-conforming-implementation">conforming user agent</a> must support the Progress Events specification.
		Data access on read operations is enabled via Progress Events. <a data-link-type="biblio" href="#biblio-progress-events">[PROGRESS-EVENTS]</a>

	
    <dt>HTML
	
    <dd>A <a data-link-type="dfn" href="#dfn-conforming-implementation">conforming user agent</a> must support at least the subset of the functionality defined in HTML that this specification relies upon;
	in particular, it must support <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">event loops</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attribute">event handler content attributes</a>. <a data-link-type="biblio" href="#biblio-html">[HTML]</a>

	
    <dt>Web IDL
	
    <dd>A <a data-link-type="dfn" href="#dfn-conforming-implementation">conforming user agent</a> must also be a conforming implementation of the IDL fragments in this specification,
	as described in the Web IDL specification. <a data-link-type="biblio" href="#biblio-webidl">[WebIDL]</a>

	
    <dt>Typed Arrays
	
    <dd>A <a data-link-type="dfn" href="#dfn-conforming-implementation">conforming user agent</a> must support the Typed Arrays specification <a data-link-type="biblio" href="#biblio-typedarray">[TypedArray]</a>.
</dl>


   <p>Parts of this specification rely on the Web Workers specification;
for those parts of this specification, the Web Workers specification is a normative dependency. <a data-link-type="biblio" href="#biblio-workers">[Workers]</a></p>


   <h2 class="heading settled" data-level="3" id="terminology"><span class="secno">3. </span><span class="content">
Terminology and Algorithms</span><a class="self-link" href="#terminology"></a></h2>


   <p>When this specification says to <dfn data-dfn-type="dfn" data-lt="terminate an algorithm|terminate this algorithm" data-noexport="" id="terminate-an-algorithm">terminate an algorithm<a class="self-link" href="#terminate-an-algorithm"></a></dfn>
the user agent must terminate the algorithm after finishing the step it is on.
Asynchronous <a data-link-type="dfn" href="#read-methods">read methods</a> defined in this specification may return before the algorithm in question is terminated,
and can be terminated by an <code class="idl"><a data-link-type="idl" href="#dom-filereader-abort">abort()</a></code> call.</p>


   <p>The algorithms and steps in this specification use the following mathematical operations:</p>


   <ul>
    <li data-md="">
     <p>max(a,b) returns the maximum of a and b,
and is always performed on integers as they are defined in WebIDL <a data-link-type="biblio" href="#biblio-webidl">[WebIDL]</a>;
in the case of max(6,4) the result is 6.
This operation is also defined in ECMAScript <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.</p>
     

    <li data-md="">
     <p>min(a,b) returns the minimum of a and b,
and is always performed on integers as they are defined in WebIDL <a data-link-type="biblio" href="#biblio-webidl">[WebIDL]</a>;
in the case of min(6,4) the result is 4.
This operation is also defined in ECMAScript <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.</p>
     

    <li data-md="">
     <p>Mathematical comparisons such as &lt; (less than), ≤ (less than or equal to), and > (greater than) are as in ECMAScript <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.</p>
     
</ul>



   <h2 class="heading settled" data-level="4" id="blob"><span class="secno">4. </span><span class="content">
The Blob Interface and Binary Data</span><a class="self-link" href="#blob"></a></h2>


   <p>A <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object refers to a <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence,
and has a <code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code> attribute which is the total number of bytes in the byte sequence,
and a <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute,
which is an ASCII-encoded string in lower case representing the media type of the <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence.</p>


   <p>A <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> must have a <dfn data-dfn-for="Blob" data-dfn-type="dfn" data-noexport="" id="readabilityState">readability state<a class="self-link" href="#readabilityState"></a></dfn>,
which is one of <a data-link-type="dfn" href="#dfn-openState"><code>OPENED</code></a> or <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a>.
A <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> that refers to a <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence,
including one of 0 bytes,
is said to be in the <dfn data-dfn-for="Blob/readability state" data-dfn-type="dfn" data-noexport="" id="dfn-openState"><code>OPENED</code><a class="self-link" href="#dfn-openState"></a></dfn> <a data-link-type="dfn" href="#readabilityState">readability state</a>.
A <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> is said to be <dfn data-dfn-for="Blob" data-dfn-type="dfn" data-noexport="" id="closed">closed<a class="self-link" href="#closed"></a></dfn> if its <code class="idl"><a data-link-type="idl" href="#dfn-close">close()</a></code> method has been called.
A <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> that is <a data-link-type="dfn" href="#closed">closed</a> is said to be in the <dfn data-dfn-for="Blob/readability state" data-dfn-type="dfn" data-noexport="" id="dfn-closedState"><code>CLOSED</code><a class="self-link" href="#dfn-closedState"></a></dfn> <a data-link-type="dfn" href="#readabilityState">readability state</a>.</p>


   <p>Each <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> must have an internal <dfn data-dfn-for="Blob" data-dfn-type="dfn" data-noexport="" id="snapshot-state">snapshot state<a class="self-link" href="#snapshot-state"></a></dfn>,
which must be initially set to the state of the underlying storage,
if any such underlying storage exists,
and must be preserved through <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#structured-clone">structured clone</a>.
Further normative definition of <a data-link-type="dfn" href="#snapshot-state">snapshot state</a> can be found for <a data-link-type="dfn">files</a>.</p>


   <pre class="idl">[<dfn class="idl-code" data-dfn-for="Blob" data-dfn-type="constructor" data-export="" data-global-name="Blob<interface>/Blob(blobParts, options)<constructor>" data-lt="Blob(blobParts, options)" id="dom-blob-blobblobparts-options">Constructor<a class="self-link" href="#dom-blob-blobblobparts-options"></a></dfn>(optional sequence&lt;<a data-link-type="idl-name" href="#typedefdef-blobpart">BlobPart</a>> <dfn class="idl-code" data-dfn-for="Blob/Blob(blobParts, options)" data-dfn-type="argument" data-export="" data-global-name="Blob<interface>/Blob(blobParts, options)<method>/blobParts<argument>" id="dom-blob-blobblobparts-options-blobparts">blobParts<a class="self-link" href="#dom-blob-blobblobparts-options-blobparts"></a></dfn>, optional <a data-link-type="idl-name" href="#dictdef-blobpropertybag">BlobPropertyBag</a> <dfn class="idl-code" data-dfn-for="Blob/Blob(blobParts, options)" data-dfn-type="argument" data-export="" data-global-name="Blob<interface>/Blob(blobParts, options)<method>/options<argument>" id="dom-blob-blobblobparts-options-options">options<a class="self-link" href="#dom-blob-blobblobparts-options-options"></a></dfn>),
 Exposed=(Window,Worker)]
interface <dfn class="idl-code" data-dfn-type="interface" data-export="" data-global-name="" id="blob0">Blob<a class="self-link" href="#blob0"></a></dfn> {

  readonly attribute unsigned long long <a class="idl-code" data-global-name="Blob<interface>/size<attribute>" data-link-type="attribute" data-readonly="" data-type="unsigned long long " href="#dom-blob-size">size</a>;
  readonly attribute DOMString <a class="idl-code" data-global-name="Blob<interface>/type<attribute>" data-link-type="attribute" data-readonly="" data-type="DOMString " href="#dom-blob-type">type</a>;
  readonly attribute boolean <a class="idl-code" data-global-name="Blob<interface>/isClosed<attribute>" data-link-type="attribute" data-readonly="" data-type="boolean " href="#dom-blob-isclosed">isClosed</a>;

  //slice Blob into byte-ranged chunks

  <a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="Blob<interface>/slice(start, end, contentType)<method>/slice(start, end)<method>/slice(start)<method>/slice()<method>" data-link-type="method" href="#dfn-slice">slice</a>([Clamp] optional long long <dfn class="idl-code" data-dfn-for="Blob/slice(start, end, contentType)" data-dfn-type="argument" data-export="" data-global-name="Blob<interface>/slice(start, end, contentType)<method>/start<argument>" id="dom-blob-slicestart-end-contenttype-start">start<a class="self-link" href="#dom-blob-slicestart-end-contenttype-start"></a></dfn>,
             [Clamp] optional long long <dfn class="idl-code" data-dfn-for="Blob/slice(start, end, contentType)" data-dfn-type="argument" data-export="" data-global-name="Blob<interface>/slice(start, end, contentType)<method>/end<argument>" id="dom-blob-slicestart-end-contenttype-end">end<a class="self-link" href="#dom-blob-slicestart-end-contenttype-end"></a></dfn>,
             optional DOMString <dfn class="idl-code" data-dfn-for="Blob/slice(start, end, contentType)" data-dfn-type="argument" data-export="" data-global-name="Blob<interface>/slice(start, end, contentType)<method>/contentType<argument>" id="dom-blob-slicestart-end-contenttype-contenttype">contentType<a class="self-link" href="#dom-blob-slicestart-end-contenttype-contenttype"></a></dfn>);
  void <a class="idl-code" data-global-name="Blob<interface>/close()<method>" data-link-type="method" href="#dfn-close">close</a>();

};

dictionary <dfn class="idl-code" data-dfn-type="dictionary" data-export="" data-global-name="" id="dictdef-blobpropertybag">BlobPropertyBag<a class="self-link" href="#dictdef-blobpropertybag"></a></dfn> {
  DOMString <a class="idl-code" data-default="&quot;&quot;" data-global-name="BlobPropertyBag<dictionary>/type<dict-member>" data-link-type="dict-member" data-type="DOMString " href="#dfn-BPtype">type</a> = "";
};

typedef (ArrayBuffer or <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a> or <a data-link-type="idl-name" href="#blob0">Blob</a> or DOMString) <dfn class="idl-code" data-dfn-type="typedef" data-export="" data-global-name="" id="typedefdef-blobpart">BlobPart<a class="self-link" href="#typedefdef-blobpart"></a></dfn>;
</pre>


   <h3 class="heading settled" data-level="4.1" id="constructorBlob"><span class="secno">4.1. </span><span class="content">
Constructors</span><a class="self-link" href="#constructorBlob"></a></h3>


   <p>The <code class="idl"><a data-link-type="idl" href="#dom-blob-blobblobparts-options">Blob()</a></code> constructor can be invoked with zero or more parameters.
When the <code class="idl"><a data-link-type="idl" href="#dom-blob-blobblobparts-options">Blob()</a></code> constructor is invoked,
user agents must run the following steps:</p>


   <ol>
    <li data-md="">
     <p>If invoked with zero parameters,
return a new <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object with its <a data-link-type="dfn" href="#readabilityState">readability state</a> set to <a data-link-type="dfn" href="#dfn-openState"><code>OPENED</code></a>,
consisting of 0 bytes,
with <code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code> set to 0,
and with <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> set to the empty string.</p>
     


    <li data-md="">
     <p>Otherwise, the constructor is invoked with a <code class="idl"><a data-link-type="idl" href="#dom-blob-blobblobparts-options-blobparts">blobParts</a></code> sequence.  Let <var>a</var> be that sequence.</p>
     


    <li data-md="">
     <p>Let <var>bytes</var> be an empty sequence of bytes.</p>
     


    <li data-md="">
     <p>Let <var>length</var> be <var>a</var>’s length.
For 0 ≤ <var>i</var> &lt; <var>length</var>, repeat the following steps:</p>
     


     <ol>
      <li data-md="">
       <p>Let <var>element</var> be the <var>i</var>th element of <var>a</var>.</p>
       

      <li data-md="">
       <p>If <var>element</var> is a <code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code>, run the following substeps:</p>
       

       <ol>
        <li data-md="">
         <p>Let <var>s</var> be the result of converting <var>element</var> to a sequence of Unicode characters <a data-link-type="biblio" href="#biblio-unicode">[Unicode]</a>
using the algorithm for doing so in WebIDL <a data-link-type="biblio" href="#biblio-webidl">[WebIDL]</a>.</p>
         

        <li data-md="">
         <p>Encode <var>s</var> as <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf_8">utf-8</a> and append the resulting bytes to <var>bytes</var>.</p>
         


         <p class="note" role="note">Note: The algorithm from WebIDL <a data-link-type="biblio" href="#biblio-webidl">[WebIDL]</a> replaces unmatched surrogates in an invalid <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf_16">utf-16</a> string
with U+FFFD replacement characters.
Scenarios exist when the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> constructor may result in some data loss
due to lost or scrambled character sequences.</p>
         
</ol>
      <li data-md="">
       <p>If <var>element</var> is an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a></code>,
convert it to a sequence of <code>byteLength</code> bytes
from the underlying <code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code>,
starting at the <code>byteOffset</code> of the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a></code>,
and append those bytes to <var>bytes</var>.</p>
       

      <li data-md="">
       <p>If <var>element</var> is an <code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code>,
convert it to a sequence of <code>byteLength</code> bytes,
and append those bytes to <var>bytes</var>.</p>
       

      <li data-md="">
       <p>If <var>element</var> is a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>,
append the bytes it represents to <var>bytes</var>.
The <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> of the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> array element is ignored.</p>
       
</ol>
     

    <li data-md="">
     <p>If the <code class="idl"><a data-link-type="idl" href="#dfn-BPtype">type</a></code> member of the optional <code>options</code> argument is provided
and is not the empty string,
run the following sub-steps:</p>
     


     <ol>
      <li data-md="">
       <p>Let <var>t</var> be the <code class="idl"><a data-link-type="idl" href="#dfn-BPtype">type</a></code> dictionary member.
If <var>t</var> contains any characters outside the range U+0020 to U+007E,
then set <var>t</var> to the empty string and return from these substeps.</p>
       

      <li data-md="">
       <p>Convert every character in <var>t</var> to lowercase
using the "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#converted-to-ascii-lowercase">converting a string to ASCII lowercase</a>" algorithm.</p>
       
</ol>
     

    <li data-md="">
     <p>Return a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object with its <a data-link-type="dfn" href="#readabilityState">readability state</a> set to <a data-link-type="dfn" href="#dfn-openState"><code>OPENED</code></a>,
referring to <var>bytes</var> as its associated <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence,
with its <code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code> set to the length of <var>bytes</var>,
and its <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> set to the value of <var>t</var> from the substeps above.</p>
     


     <p class="note" role="note">Note: The type t of a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> is considered a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parsable-mime-type">parsable MIME type</a>
if the ASCII-encoded string representing the Blob object’s type,
when converted to a byte sequence,
does not return undefined for the <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type">parse a MIME type</a> algorithm.</p>
     
</ol>

   <h4 class="heading settled" data-level="4.1.1" id="constructorParams"><span class="secno">4.1.1. </span><span class="content">
Constructor Parameters</span><a class="self-link" href="#constructorParams"></a></h4>


   <p>The <code class="idl"><a data-link-type="idl" href="#dom-blob-blobblobparts-options">Blob()</a></code> constructor can be invoked with the parameters below:</p>


   <dl>
	
    <dt id="dfn-blobParts"><a class="self-link" href="#dfn-blobParts"></a>A <code>blobParts</code> <code>sequence</code>
	
    <dd>which takes any number of the following types of elements, and in any order:

     <ul>
      <li data-md="">
       <p><code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code> elements.</p>
       

      <li data-md="">
       <p><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a></code> elements.</p>
       

      <li data-md="">
       <p><code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> elements.</p>
       

      <li data-md="">
       <p><code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> elements.</p>
       
</ul>
     
	
    <dt>An <em>optional</em> <code class="idl"><a data-link-type="idl" href="#dictdef-blobpropertybag">BlobPropertyBag</a></code>
	
    <dd>which takes one member:

     <ul>
      <li data-md="">
       <p><dfn class="idl-code" data-dfn-for="BlobPropertyBag" data-dfn-type="dict-member" data-export="" id="dfn-BPtype">type<a class="self-link" href="#dfn-BPtype"></a></dfn>,
the ASCII-encoded string in lower case representing the media type of the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>.
Normative conditions for this member are provided in the <a href="#constructorBlob">§4.1 
Constructors</a>.</p>
       
</ul></dl>


   <div class="example" id="example-3d23cb29"><a class="self-link" href="#example-3d23cb29"></a>
	Examples of constructor usage follow.

	
    <pre class="lang-javascript">// Create a new Blob object

var a = new Blob();

// Create a 1024-byte ArrayBuffer
// buffer could also come from reading a File

var buffer = new ArrayBuffer(1024);

// Create ArrayBufferView objects based on buffer

var shorts = new Uint16Array(buffer, 512, 128);
var bytes = new Uint8Array(buffer, shorts.byteOffset + shorts.byteLength);

var b = new Blob(["foobarbazetcetc" + "birdiebirdieboo"], {type: "text/plain;charset=utf-8"});

var c = new Blob([b, shorts]);

var a = new Blob([b, c, bytes]);

var d = new Blob([buffer, b, c, bytes]);
</pre>
</div>


   <h3 class="heading settled" data-level="4.2" id="attributes-blob"><span class="secno">4.2. </span><span class="content">
Attributes</span><a class="self-link" href="#attributes-blob"></a></h3>


   <dl>
	
    <dt><dfn class="idl-code" data-dfn-for="Blob" data-dfn-type="attribute" data-export="" id="dom-blob-size">size<a class="self-link" href="#dom-blob-size"></a></dfn>
	, <span> of type <a data-link-type="idl-name">unsigned long long</a>, readonly</span>
    <dd>Returns the size of the <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence in number of bytes.
		On getting, conforming user agents must return the total number of bytes that can be read by a <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> or <code class="idl"><a data-link-type="idl" href="#filereadersync">FileReaderSync</a></code> object,
		or 0 if the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> has no bytes to be read.
		If the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> has a readability state of <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a>
		then <code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code> must return 0.

	
    <dt><dfn class="idl-code" data-dfn-for="Blob" data-dfn-type="attribute" data-export="" id="dom-blob-type">type<a class="self-link" href="#dom-blob-type"></a></dfn>
	, <span> of type <a data-link-type="idl-name" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, readonly</span>
    <dd>The ASCII-encoded string in lower case representing the media type of the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>.
		On getting, user agents must return the type of a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>
		as an ASCII-encoded string in lower case,
		such that when it is converted to a <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence,
		it is a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parsable-mime-type">parsable MIME type</a>,
		or the empty string – 0 bytes – if the type cannot be determined.


     <p>The <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute can be set by the web application itself through constructor invocation
		and through the <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> call;
		in these cases, further normative conditions for this attribute are in <a href="#constructorBlob">§4.1 
Constructors</a>,
		<a href="#file-constructor">§5.1 
Constructor</a>,
		and <a href="#slice-method-algo">§4.3.1 
The slice method</a> respectively.
		User agents can also determine the <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> of a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>,
		especially if the <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence is from an on-disk file;
		in this case, further normative conditions are in the <a data-link-type="dfn" href="#file-type-guidelines">file type guidelines</a>.</p>
     

	
    <dt><dfn class="idl-code" data-dfn-for="Blob" data-dfn-type="attribute" data-export="" id="dom-blob-isclosed">isClosed<a class="self-link" href="#dom-blob-isclosed"></a></dfn>
	, <span> of type <a data-link-type="idl-name">boolean</a>, readonly</span>
    <dd>The boolean value that indicates whether the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> is in the <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a> <a data-link-type="dfn" href="#readabilityState">readability state</a>.
		On getting, user agents must return <code>false</code>
		if the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> is in the <a data-link-type="dfn" href="#dfn-openState"><code>OPENED</code></a> <a data-link-type="dfn" href="#readabilityState">readability state</a>,
		and <code>true</code> if the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> is in the <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a> <a data-link-type="dfn" href="#readabilityState">readability state</a>
		as a result of the <code class="idl"><a data-link-type="idl" href="#dfn-close">close()</a></code> method being called.
</dl>


   <p class="note" role="note">Note: Use of the <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute informs the <a data-link-type="dfn" href="#encoding-determination">encoding determination</a>
and <a href="#processing-media-types">parsing the Content-Type header</a>
when <a data-link-type="dfn" href="#dereference">dereferencing</a> <a data-link-type="dfn" href="#blob-url">Blob URLs</a>.</p>


   <h3 class="heading settled" data-level="4.3" id="methodsandparams-blob"><span class="secno">4.3. </span><span class="content">
Methods and Parameters</span><a class="self-link" href="#methodsandparams-blob"></a></h3>


   <h4 class="heading settled" data-level="4.3.1" id="slice-method-algo"><span class="secno">4.3.1. </span><span class="content">
The slice method</span><a class="self-link" href="#slice-method-algo"></a></h4>


   <p>The <dfn class="idl-code" data-dfn-for="Blob" data-dfn-type="method" data-export="" data-lt="slice(start, end, contentType), slice(start, end), slice(start), slice()" id="dfn-slice">slice()<a class="self-link" href="#dfn-slice"></a></dfn> method
returns a new <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object with bytes ranging from
the optional <code class="idl"><a data-link-type="idl" href="#dfn-slice">start</a></code> parameter
upto but not including the optional <code class="idl"><a data-link-type="idl" href="#dfn-slice">end</a></code> parameter,
and with a <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute that is the value of the optional <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-blob-slice-contenttype">contentType</a></code> parameter.
It must act as follows:</p>


   <ol>
    <li data-md="">
     <p>Let <var>O</var> be the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> <a data-link-type="dfn">context object</a> on which the <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> method is being called.</p>
     

    <li data-md="">
     <p>The optional <dfn class="idl-code" data-dfn-for="Blob/start()" data-dfn-type="argument" data-export="" id="dom-blob-start-start">start<a class="self-link" href="#dom-blob-start-start"></a></dfn> parameter
is a value for the start point of a <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> call,
and must be treated as a byte-order position,
with the zeroth position representing the first byte.
User agents must process <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> with <code class="idl"><a data-link-type="idl" href="#dom-blob-start-start">start</a></code> normalized according to the following:</p>
     


     <ol type="a">
	
      <li>If the optional <code class="idl"><a data-link-type="idl" href="#dom-blob-start-start">start</a></code> parameter is not used as a parameter when making this call, let <var>relativeStart</var> be 0.
	
      <li>If <code class="idl"><a data-link-type="idl" href="#dom-blob-start-start">start</a></code> is negative, let <var>relativeStart</var> be <code>max((<code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code> + <code class="idl"><a data-link-type="idl" href="#dom-blob-start-start">start</a></code>), 0)</code>.
	
      <li>Else, let <var>relativeStart</var> be <code>min(start, size)</code>.
	</ol>
     


    <li data-md="">
     <p>The optional <dfn class="idl-code" data-dfn-for="Blob/start()" data-dfn-type="argument" data-export="" id="dom-blob-start-end">end<a class="self-link" href="#dom-blob-start-end"></a></dfn> parameter
is a value for the end point of a <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> call.
User agents must process <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> with <code class="idl"><a data-link-type="idl" href="#dom-blob-start-end">end</a></code> normalized according to the following:</p>
     


     <ol type="a">
	
      <li>If the optional <code class="idl"><a data-link-type="idl" href="#dom-blob-start-end">end</a></code> parameter is not used as a parameter when making this call, let <var>relativeEnd</var> be <code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code>.
	
      <li>If <code class="idl"><a data-link-type="idl" href="#dom-blob-start-end">end</a></code> is negative, let <var>relativeEnd</var> be <code>max((size + end), 0)</code> .
	
      <li>Else, let <var>relativeEnd</var> be <code>min(end, size)</code>.
</ol>
     


    <li data-md="">
     <p>The optional <dfn class="idl-code" data-dfn-for="Blob/slice()" data-dfn-type="argument" data-export="" id="dom-blob-slice-contenttype">contentType<a class="self-link" href="#dom-blob-slice-contenttype"></a></dfn> parameter
is used to set the ASCII-encoded string in lower case representing the media type of the Blob.
User agents must process the <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> with <code class="idl"><a data-link-type="idl" href="#dom-blob-slice-contenttype">contentType</a></code> normalized according to the following:</p>
     


     <ol type="a">
	
      <li>If the <code class="idl"><a data-link-type="idl" href="#dom-blob-slice-contenttype">contentType</a></code> parameter is not provided, let <var>relativeContentType</var> be set to the empty string .
	
      <li>Else let <var>relativeContentType</var> be set to <code class="idl"><a data-link-type="idl" href="#dom-blob-slice-contenttype">contentType</a></code> and run the substeps below:

       <ol>
        <li data-md="">
         <p>If <var>relativeContentType</var> contains any characters outside the range of U+0020 to U+007E,
then set <var>relativeContentType</var> to the empty string and return from these substeps.</p>
         

        <li data-md="">
         <p>Convert every character in <var>relativeContentType</var> to lower case using the "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#converted-to-ascii-lowercase">Converting a string to ASCII lowercase</a>" algorithm.</p>
         
</ol></ol>
     


    <li data-md="">
     <p>Let <var>span</var> be <code>max((relativeEnd - relativeStart), 0)</code>.</p>
     


    <li data-md="">
     <p>Return a new <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object <var>S</var> with the following characteristics:</p>
     


     <ol type="a">
	
      <li><var>S</var> has a <a data-link-type="dfn" href="#readabilityState">readability state</a> equal to that of <var>O</var>’s <a data-link-type="dfn" href="#readabilityState">readability state</a>.


       <p class="note" role="note">Note: The <a data-link-type="dfn" href="#readabilityState">readability state</a> of the <a data-link-type="dfn">context object</a> is retained
		by the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object returned by the <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> call;
		this has implications on whether the returned <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> is actually usable
		for <a data-link-type="dfn" href="#readOperation">read operation</a>s or as a <a data-link-type="dfn" href="#blob-url">Blob URL</a>.</p>
       
	
      <li><var>S</var> refers to <var>span</var> consecutive <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a>s from <var>O</var>,
		beginning with the <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> at byte-order position <var>relativeStart</var>.
	
      <li><var>S</var>.<code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code> = <var>span</var>.
	
      <li><var>S</var>.<code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> = <var>relativeContentType</var>.


       <p class="note" role="note">Note: The type t of a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> is considered a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parsable-mime-type">parsable MIME type</a>
		if the ASCII-encoded string representing the Blob object’s type,
		when converted to a byte sequence,
		does not return undefined for the <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type">parse a MIME type</a> algorithm.</p>
       
</ol>
     
</ol>

   <div class="example" id="example-349533c4"><a class="self-link" href="#example-349533c4"></a>
	The examples below illustrate the different types of <code class="idl"><a data-link-type="idl" href="#dfn-slice">slice()</a></code> calls possible. Since the
	<code class="idl"><a data-link-type="idl" href="#file0">File</a></code> interface inherits from the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> interface, examples are based on the use of the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> interface.

	
    <pre class="lang-javascript">// obtain input element through DOM

var file = document.getElementById('file').files[0];
if(file)
{
  // create an identical copy of file
  // the two calls below are equivalent

  var fileClone = file.slice();
  var fileClone2 = file.slice(0, file.size);

  // slice file into 1/2 chunk starting at middle of file
  // Note the use of negative number

  var fileChunkFromEnd = file.slice(-(Math.round(file.size/2)));

  // slice file into 1/2 chunk starting at beginning of file

  var fileChunkFromStart = file.slice(0, Math.round(file.size/2));

  // slice file from beginning till 150 bytes before end

  var fileNoMetadata = file.slice(0, -150, "application/experimental");
}
</pre>
</div>


   <h4 class="heading settled" data-level="4.3.2" id="close-method"><span class="secno">4.3.2. </span><span class="content">
The close method</span><a class="self-link" href="#close-method"></a></h4>


   <p>The <dfn class="idl-code" data-dfn-for="Blob" data-dfn-type="method" data-export="" id="dfn-close">close()<a class="self-link" href="#dfn-close"></a></dfn> method is said to <a data-link-type="dfn" href="#closed">close</a> a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>,
and must act as follows on the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> on which the method has been called:</p>


   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#readabilityState">readability state</a> of the <a data-link-type="dfn">context object</a> is <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a>,
<a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>Otherwise, set the <a data-link-type="dfn" href="#readabilityState">readability state</a> of the <a data-link-type="dfn">context object</a> to <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a>.</p>
     

    <li data-md="">
     <p>If the <a data-link-type="dfn">context object</a> has an entry in the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>,
<a data-link-type="dfn">remove the entry</a> that corresponds to the <a data-link-type="dfn">context object</a>.</p>
     

</ol>



   <h2 class="heading settled" data-level="5" id="file"><span class="secno">5. </span><span class="content">
The File Interface</span><a class="self-link" href="#file"></a></h2>


   <p>A <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object is a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object with a <code class="idl"><a data-link-type="idl" href="#dom-file-name">name</a></code> attribute, which is a string;
it can be created within the web application via a constructor,
or is a reference to a <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence from a file from the underlying (OS) file system.</p>


   <p>If a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object is a reference to a <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence originating from a file on disk,
then its <a data-link-type="dfn" href="#snapshot-state">snapshot state</a> should be set to the state of the file on disk at the time the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object is created.</p>


   <p class="note" role="note">Note: This is a non-trivial requirement to implement for user agents,
and is thus not a <em>must</em> but a <em>should</em> <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a>.
User agents should endeavor to have a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object’s <a data-link-type="dfn" href="#snapshot-state">snapshot state</a>
set to the state of the underlying storage on disk at the time the reference is taken.
If the file is modified on disk following the time a reference has been taken,
the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code>'s <a data-link-type="dfn" href="#snapshot-state">snapshot state</a> will differ from the state of the underlying storage.
User agents may use modification time stamps and other mechanisms to maintain <a data-link-type="dfn" href="#snapshot-state">snapshot state</a>,
but this is left as an implementation detail.</p>


   <p>When a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object refers to a file on disk,
user agents must return the <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> of that file,
and must follow the <dfn data-dfn-type="dfn" data-export="" id="file-type-guidelines">file type guidelines<a class="self-link" href="#file-type-guidelines"></a></dfn> below:</p>


   <ul>
    <li data-md="">
     <p>User agents must return the <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> as an ASCII-encoded string in lower case,
such that when it is converted to a corresponding byte sequence,
it is a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parsable-mime-type">parsable MIME type</a>,
or the empty string – 0 bytes – if the type cannot be determined.</p>
     

    <li data-md="">
     <p>When the file is of type <code>text/plain</code>
user agents must NOT append a charset parameter to the <i>dictionary of parameters</i> portion of the media type <a data-link-type="biblio" href="#biblio-sniff">[SNIFF]</a>.</p>
     

    <li data-md="">
     <p>User agents must not attempt heuristic determination of encoding,
including statistical methods.</p>
     


     <pre class="idl">[<dfn class="idl-code" data-dfn-for="File" data-dfn-type="constructor" data-export="" data-global-name="File<interface>/File(fileBits, fileName, options)<constructor>" data-lt="File(fileBits, fileName, options)" id="dom-file-filefilebits-filename-options">Constructor<a class="self-link" href="#dom-file-filefilebits-filename-options"></a></dfn>(sequence&lt;<a data-link-type="idl-name" href="#typedefdef-blobpart">BlobPart</a>> <dfn class="idl-code" data-dfn-for="File/File(fileBits, fileName, options)" data-dfn-type="argument" data-export="" data-global-name="File<interface>/File(fileBits, fileName, options)<method>/fileBits<argument>" id="dom-file-filefilebits-filename-options-filebits">fileBits<a class="self-link" href="#dom-file-filefilebits-filename-options-filebits"></a></dfn>,
             [EnsureUTF16] DOMString <dfn class="idl-code" data-dfn-for="File/File(fileBits, fileName, options)" data-dfn-type="argument" data-export="" data-global-name="File<interface>/File(fileBits, fileName, options)<method>/fileName<argument>" id="dom-file-filefilebits-filename-options-filename">fileName<a class="self-link" href="#dom-file-filefilebits-filename-options-filename"></a></dfn>,
             optional <a data-link-type="idl-name" href="#dictdef-filepropertybag">FilePropertyBag</a> <dfn class="idl-code" data-dfn-for="File/File(fileBits, fileName, options)" data-dfn-type="argument" data-export="" data-global-name="File<interface>/File(fileBits, fileName, options)<method>/options<argument>" id="dom-file-filefilebits-filename-options-options">options<a class="self-link" href="#dom-file-filefilebits-filename-options-options"></a></dfn>),
 Exposed=(Window,Worker)]
interface <dfn class="idl-code" data-dfn-type="interface" data-export="" data-global-name="" id="file0">File<a class="self-link" href="#file0"></a></dfn> : <a data-link-type="idl-name" href="#blob0">Blob</a> {
  readonly attribute DOMString <a class="idl-code" data-global-name="File<interface>/name<attribute>" data-link-type="attribute" data-readonly="" data-type="DOMString " href="#dom-file-name">name</a>;
  readonly attribute long long <a class="idl-code" data-global-name="File<interface>/lastModified<attribute>" data-link-type="attribute" data-readonly="" data-type="long long " href="#dom-file-lastmodified">lastModified</a>;
};

dictionary <dfn class="idl-code" data-dfn-type="dictionary" data-export="" data-global-name="" id="dictdef-filepropertybag">FilePropertyBag<a class="self-link" href="#dictdef-filepropertybag"></a></dfn> {
  DOMString <a class="idl-code" data-default="&quot;&quot;" data-global-name="FilePropertyBag<dictionary>/type<dict-member>" data-link-type="dict-member" data-type="DOMString " href="#dom-filepropertybag-type">type</a> = "";
  long long <a class="idl-code" data-global-name="FilePropertyBag<dictionary>/lastModified<dict-member>" data-link-type="dict-member" data-type="long long " href="#dom-filepropertybag-lastmodified">lastModified</a>;
};
</pre>
     
</ul>

   <h3 class="heading settled" data-level="5.1" id="file-constructor"><span class="secno">5.1. </span><span class="content">
Constructor</span><a class="self-link" href="#file-constructor"></a></h3>


   <p>The <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> constructor is invoked with two or three parameters,
depending on whether the optional dictionary parameter is used.
When the <code class="idl"><a data-link-type="idl" href="#dom-file-filefilebits-filename-options">File()</a></code> constructor is invoked,
user agents must run the following steps:</p>


   <ol>
    <li data-md="">
     <p>Let <var>a</var> be the <code class="idl"><a data-link-type="idl" href="#dom-file-filefilebits-filename-options-filebits">fileBits</a></code> sequence argument.
Let <var>bytes</var> be an empty sequence of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a>.
Let <var>length</var> be <var>a</var>’s length.
For 0 ≤ i &lt; <var>length</var>, repeat the following steps:</p>
     


     <ol>
      <li data-md="">
       <p>Let <var>element</var> be the <var>i</var>’th element of <var>a</var>.</p>
       

      <li data-md="">
       <p>If <var>element</var> is a <code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code>, run the following substeps:
1.Let <var>s</var> be the result of converting <var>element</var> to a sequence of Unicode characters <a data-link-type="biblio" href="#biblio-unicode">[Unicode]</a>
	using the algorithm for doing so in WebIDL <a data-link-type="biblio" href="#biblio-webidl">[WebIDL]</a>.</p>
       

       <ol>
        <li data-md="">
         <p>Encode <var>s</var> as <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf_8">utf-8</a> and append the resulting <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> to <var>bytes</var>.</p>
         
</ol>
       

       <p class="note" role="note">Note: The algorithm from WebIDL <a data-link-type="biblio" href="#biblio-webidl">[WebIDL]</a> replaces unmatched surrogates in an invalid <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf_16">utf-16</a> string with U+FFFD replacement characters.
Scenarios exist when the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> constructor may result in some data loss due to lost or scrambled character sequences.</p>
       

      <li data-md="">
       <p>If <var>element</var> is an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a></code>,
convert it to a sequence of <code>byteLength</code> bytes from the underlying <code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code>,
starting at the <code>byteOffset</code> of the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a></code>,
and append those bytes to <var>bytes</var>.</p>
       

      <li data-md="">
       <p>If <var>element</var> is an <code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code>,
convert it to a sequence of <code>byteLength</code> bytes,
and append those bytes to <var>bytes</var>.</p>
       

      <li data-md="">
       <p>If <var>element</var> is a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>,
append the bytes it represents to <var>bytes</var>.
The <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> of the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> argument must be ignored.</p>
       
</ol>
    <li data-md="">
     <p>Let <var>n</var> be a new string of the same size as the <code class="idl"><a data-link-type="idl" href="#dom-file-filefilebits-filename-options-filename">fileName</a></code> argument to the constructor.
Copy every character from <code class="idl"><a data-link-type="idl" href="#dom-file-filefilebits-filename-options-filename">fileName</a></code> to <var>n</var>,
replacing any "/" character (U+002F SOLIDUS) with a ":" (U+003A COLON).</p>
     


     <p class="note" role="note">Note: Underlying OS filesystems use differing conventions for file name;
with constructed files, mandating UTF-16 lessens ambiquity when file names are converted to <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequences.</p>
     


    <li data-md="">
     <p>If the optional <code class="idl"><a data-link-type="idl" href="#dictdef-filepropertybag">FilePropertyBag</a></code> dictionary argument is used,
then run the following substeps:</p>
     


     <ol>
      <li data-md="">
       <p>If the <code class="idl"><a data-link-type="idl" href="#dom-filepropertybag-type">type</a></code> member is provided and is not the empty string,
let <var>t</var> be set to the <code class="idl"><a data-link-type="idl" href="#dom-filepropertybag-type">type</a></code> dictionary member.
If <var>t</var> contains any characters outside the range U+0020 to U+007E,
then set <var>t</var> to the empty string and return from these substeps.</p>
       

      <li data-md="">
       <p>Convert every character in <var>t</var> to lowercase using the "<a data-link-type="dfn">converting a string to ASCII lowercase algorithm</a>".</p>
       

      <li data-md="">
       <p>If the <code class="idl"><a data-link-type="idl" href="#dom-filepropertybag-lastmodified">lastModified</a></code> member is provided,
let <var>d</var> be set to the  <code class="idl"><a data-link-type="idl" href="#dom-filepropertybag-lastmodified">lastModified</a></code> dictionary member.
If it is not provided,
set <var>d</var> to the current date and time
represented as the number of milliseconds since the <a data-link-type="dfn">Unix Epoch</a>
(which is the equivalent of <code>Date.now()</code> <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>).</p>
       


       <p class="note" role="note">Note: Since ECMA-262 <code class="idl"><a data-link-type="idl">Date</a></code> objects convert to <code>long long</code> values
representing the number of milliseconds since the <a data-link-type="dfn">Unix Epoch</a>,
the <code class="idl"><a data-link-type="idl" href="#dom-filepropertybag-lastmodified">lastModified</a></code> member could be a <code class="idl"><a data-link-type="idl">Date</a></code> object <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.</p>
       
</ol>
     

    <li data-md="">
     <p>Return a new <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object <var>F</var> such that:</p>
     

     <ol>
      <li data-md="">
       <p><var>F</var> has a <a data-link-type="dfn" href="#readabilityState">readability state</a> of <a data-link-type="dfn" href="#dfn-openState"><code>OPENED</code></a>.</p>
       

      <li data-md="">
       <p><var>F</var> refers to the <var>bytes</var> <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a> sequence.</p>
       

      <li data-md="">
       <p><var>F</var>.<code class="idl"><a data-link-type="idl">size</a></code> is set to the number of total bytes in <var>bytes</var>.</p>
       

      <li data-md="">
       <p><var>F</var>.<code class="idl"><a data-link-type="idl" href="#dom-file-name">name</a></code> is set to <var>n</var>.</p>
       

      <li data-md="">
       <p><var>F</var>.<code class="idl"><a data-link-type="idl">type</a></code> is set to <var>t</var>.</p>
       


       <p class="note" role="note">Note: The type t of a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> is considered a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parsable-mime-type">parsable MIME type</a>
if the ASCII-encoded string representing the File object’s type,
when converted to a byte sequence,
does not return undefined for the <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type">parse a MIME type</a> algorithm.</p>
       

      <li data-md="">
       <p><code>F.lastModified</code> is set to <var>d</var>.</p>
       
</ol></ol>

   <h4 class="heading settled" data-level="5.1.1" id="file-constructor-params"><span class="secno">5.1.1. </span><span class="content">
Constructor Parameters</span><a class="self-link" href="#file-constructor-params"></a></h4>


   <p>The <code class="idl"><a data-link-type="idl" href="#dom-file-filefilebits-filename-options">File()</a></code> constructor can be invoked with the parameters below:</p>


   <dl>
	
    <dt id="dfn-fileBits"><a class="self-link" href="#dfn-fileBits"></a>A <code>fileBits</code> <code>sequence</code>
	
    <dd>which takes any number of the following elements, and in any order:

     <ul>
      <li data-md="">
       <p><code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code> elements.</p>
       

      <li data-md="">
       <p><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a></code> elements.</p>
       

      <li data-md="">
       <p><code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> elements, which includes <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> elements.</p>
       

      <li data-md="">
       <p><code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> elements.</p>
       
</ul>
     
	
    <dt id="dfn-fileName"><a class="self-link" href="#dfn-fileName"></a>A <code>name</code> parameter
	
    <dd>A <code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> parameter representing the name of the file;
		normative conditions for this constructor parameter can be found in <a href="#file-constructor">§5.1 
Constructor</a>.

	
    <dt id="def-Properties"><a class="self-link" href="#def-Properties"></a>An optional <code class="idl"><a data-link-type="idl" href="#dictdef-filepropertybag">FilePropertyBag</a></code> dictionary
	
    <dd>which takes the following members:

     <ul>
      <li data-md="">
       <p>An optional <dfn class="idl-code" data-dfn-for="FilePropertyBag" data-dfn-type="dict-member" data-export="" id="dom-filepropertybag-type">type<a class="self-link" href="#dom-filepropertybag-type"></a></dfn> member;
the ASCII-encoded string in lower case representing the media type of the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code>.
Normative conditions for this member are provided in <a href="#file-constructor">§5.1 
Constructor</a>.</p>
       

      <li data-md="">
       <p>An optional <dfn class="idl-code" data-dfn-for="FilePropertyBag" data-dfn-type="dict-member" data-export="" id="dom-filepropertybag-lastmodified">lastModified<a class="self-link" href="#dom-filepropertybag-lastmodified"></a></dfn> member,
which must be a <code>long long</code>;
normative conditions for this member are provided in <a href="#file-constructor">§5.1 
Constructor</a>.</p>
       
</ul></dl>


   <h3 class="heading settled" data-level="5.2" id="file-attrs"><span class="secno">5.2. </span><span class="content">
Attributes</span><a class="self-link" href="#file-attrs"></a></h3>


   <dl>
	
    <dt><dfn class="idl-code" data-dfn-for="File" data-dfn-type="attribute" data-export="" id="dom-file-name">name<a class="self-link" href="#dom-file-name"></a></dfn>
	, <span> of type <a data-link-type="idl-name" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, readonly</span>
    <dd>The name of the file.
		On getting, this must return the name of the file as a string.
		There are numerous file name variations and conventions used by different underlying OS file systems;
		this is merely the name of the file, without path information.
		On getting, if user agents cannot make this information available,
		they must return the empty string.
		If a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object is created using a constructor,
		further normative conditions for this attribute are found in <a href="#file-constructor">§5.1 
Constructor</a>.

	
    <dt><dfn class="idl-code" data-dfn-for="File" data-dfn-type="attribute" data-export="" id="dom-file-lastmodified">lastModified<a class="self-link" href="#dom-file-lastmodified"></a></dfn>
	, <span> of type <a data-link-type="idl-name">long long</a>, readonly</span>
    <dd>The last modified date of the file.
		On getting, if user agents can make this information available,
		this must return a <code>long long</code> set to the time the file was last modified
		as the number of milliseconds since the <a data-link-type="dfn">Unix Epoch</a>.
		If the last modification date and time are not known,
		the attribute must return the current date and time
		as a <code>long long</code> representing the number of milliseconds since the <a data-link-type="dfn">Unix Epoch</a>;
		this is equivalent to <code class="lang-javascript">Date.now()</code> <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.
		If a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object is created using a constructor,
		further normative conditions for this attribute are found in <a href="#file-constructor">§5.1 
Constructor</a>.
</dl>


   <p>The <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> interface is available on objects that expose an attribute of type <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code>;
these objects are defined in HTML <a data-link-type="biblio" href="#biblio-html">[HTML]</a>.
The <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> interface, which inherits from <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>, is immutable,
and thus represents file data that can be read into memory at the time a <a data-link-type="dfn" href="#readOperation">read operation</a> is initiated.
User agents must process reads on files that no longer exist at the time of read as <a data-link-type="dfn">errors</a>,
throwing a <code class="idl"><a data-link-type="idl" href="#exceptdef-notfounderror">NotFoundError</a></code> exception
if using a <code class="idl"><a data-link-type="idl" href="#filereadersync">FileReaderSync</a></code> on a Web Worker <a data-link-type="biblio" href="#biblio-workers">[Workers]</a>
or firing an <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> event
with the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute returning a <code class="idl"><a data-link-type="idl" href="#exceptdef-notfounderror">NotFoundError</a></code> <code class="idl"><a data-link-type="idl" href="http://dom.spec.whatwg.org/#domerror">DOMError</a></code>.</p>


   <div class="example" id="example-12294230"><a class="self-link" href="#example-12294230"></a>
	In the examples below, metadata from a file object is displayed meaningfully, and a file object is created with a name and a last modified date.

	
    <pre class="lang-javascript">var file = document.getElementById("filePicker").files[0];
var date = new Date(file.lastModified);
println("You selected the file " + file.name + " which was modified on " + date.toDateString() + " .");

...

// Generate a file with a specific last modified date

var d = new Date(2013, 12, 5, 16, 23, 45, 600);
var generatedFile = new File(["Rough Draft ...."], "Draft1.txt", {type: "text/plain"; lastModified: d})

...
</pre>
</div>


   <h2 class="heading settled" data-level="6" id="filelist"><span class="secno">6. </span><span class="content">
The FileList Interface</span><a class="self-link" href="#filelist"></a></h2>


   <p class="note" role="note">Note: The <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code> interface should be considered "at risk"
since the general trend on the Web Platform is to replace such interfaces
with the <code class="idl"><a data-link-type="idl">Array</a></code> platform object in ECMAScript <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.
In particular, this means syntax of the sort <code class="lang-javascript">filelist.item(0)</code> is at risk;
most other programmatic use of <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code> is unlikely to be affected by the eventual migration to an <code class="idl"><a data-link-type="idl">Array</a></code> type.</p>


   <p>This interface is a list of <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> objects.</p>


   <pre class="idl">[Exposed=(Window,Worker)]
interface <dfn class="idl-code" data-dfn-type="interface" data-export="" data-global-name="" id="filelist0">FileList<a class="self-link" href="#filelist0"></a></dfn> {
  getter <a data-link-type="idl-name" href="#file0">File</a>? <a class="idl-code" data-global-name="FileList<interface>/item(index)<method>" data-link-type="method" href="#dom-filelist-itemindex">item</a>(unsigned long <dfn class="idl-code" data-dfn-for="FileList/item(index)" data-dfn-type="argument" data-export="" data-global-name="FileList<interface>/item(index)<method>/index<argument>" id="dom-filelist-itemindex-index">index<a class="self-link" href="#dom-filelist-itemindex-index"></a></dfn>);
  readonly attribute unsigned long <a class="idl-code" data-global-name="FileList<interface>/length<attribute>" data-link-type="attribute" data-readonly="" data-type="unsigned long " href="#dom-filelist-length">length</a>;
};
</pre>


   <div class="example" id="example-74b4608d"><a class="self-link" href="#example-74b4608d"></a>
	Sample usage typically involves DOM access to the <code>&lt;input type="file"></code> element within a form,
	and then accessing selected files.

	
    <pre class="lang-javascript">// uploadData is a form element
// fileChooser is input element of type 'file'
var file = document.forms['uploadData']['fileChooser'].files[0];

// alternative syntax can be
// var file = document.forms['uploadData']['fileChooser'].files.item(0);

if(file)
{
  // Perform file ops
}
</pre>
</div>


   <h3 class="heading settled" data-level="6.1" id="attributes-filelist"><span class="secno">6.1. </span><span class="content">
Attributes</span><a class="self-link" href="#attributes-filelist"></a></h3>

	
   <dl>
		
    <dt><dfn class="idl-code" data-dfn-for="FileList" data-dfn-type="attribute" data-export="" id="dom-filelist-length">length<a class="self-link" href="#dom-filelist-length"></a></dfn>
		, <span> of type <a data-link-type="idl-name">unsigned long</a>, readonly</span>
    <dd>must return the number of files in the <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code> object.
			If there are no files, this attribute must return 0.
	
   </dl>


   <h3 class="heading settled" data-level="6.2" id="filelist-methods-params"><span class="secno">6.2. </span><span class="content">
Methods and Parameters</span><a class="self-link" href="#filelist-methods-params"></a></h3>


   <dl>
	
    <dt><dfn class="idl-code" data-dfn-for="FileList" data-dfn-type="method" data-export="" id="dom-filelist-itemindex">item(index)<a class="self-link" href="#dom-filelist-itemindex"></a></dfn>
	
    <dd>must return the <em>indexth</em> <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object in the <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code>.
		If there is no <em>indexth</em> <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object in the <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code>,
		then this method must return <code>null</code>.


     <p><dfn class="idl-code" data-dfn-for="FileList/item()" data-dfn-type="argument" data-export="" id="dom-filelist-item-index">index<a class="self-link" href="#dom-filelist-item-index"></a></dfn> must be treated by user agents
		as value for the position of a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object in the <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code>,
		with 0 representing the first file.
		<a data-link-type="dfn">Supported property indices</a> are the numbers in the range zero
		to one less than the number of <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> objects represented by the <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code> object.
		If there are no such <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> objects,
		then there are no supported property indices.</p>
     
</dl>


   <p class="note" role="note">Note: The <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#htmlinputelement">HTMLInputElement</a></code> interface has a readonly attribute of type <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code>,
which is what is being accessed in the above example.
Other interfaces with a readonly attribute of type <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code> include the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#datatransfer">DataTransfer</a></code> interface.</p>



   <h2 class="heading settled" data-level="7" id="reading-data-section"><span class="secno">7. </span><span class="content">
Reading Data</span><a class="self-link" href="#reading-data-section"></a></h2>


   <h3 class="heading settled" data-level="7.1" id="readOperationSection"><span class="secno">7.1. </span><span class="content">
The Read Operation</span><a class="self-link" href="#readOperationSection"></a></h3>


   <p>The algorithm below defines a <a data-link-type="dfn" href="#readOperation">read operation</a>,
which takes a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> and a <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> as input,
and reads <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#byte">byte</a>s into a byte stream
which is returned as the <var>result</var> of the <a data-link-type="dfn" href="#readOperation">read operation</a>,
or else fails along with a <a data-link-type="dfn" href="#failureReason">failure reason</a>.
Methods in this specification invoke the <a data-link-type="dfn" href="#readOperation">read operation</a>
with the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> either set or unset.</p>


   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="synchronousFlag">synchronous flag<a class="self-link" href="#synchronousFlag"></a></dfn> determines if a read operation is synchronous or asynchronous,
and is <em>unset</em> by default.
Methods may set it.
If it is set,
the <a data-link-type="dfn" href="#readOperation">read operation</a> takes place synchronously.
Otherwise, it takes place asynchronously.</p>


   <p>To perform a <dfn data-dfn-type="dfn" data-noexport="" id="readOperation">read operation<a class="self-link" href="#readOperation"></a></dfn> on a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> and the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a>,
run the following steps:</p>


   <ol>
    <li data-md="">
     <p>Let <var>s</var> be a a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body">body</a>,
<var>b</var> be the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> to be read from,
and <var>bytes</var> initially set to an empty byte sequence.
Set the <var>length</var> on <var>s</var> to the <code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code> of <var>b</var>.
While there are still bytes to be read in <var>b</var>,
perform the following substeps:</p>
     


     <p class="note" role="note">Note: The algorithm assumes that invoking methods have checked for <a data-link-type="dfn" href="#readabilityState">readability state</a>.
A <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> in the <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a> state must not have a <a data-link-type="dfn" href="#readOperation">read operation</a> called on it.</p>
     


     <ol>
      <li data-md="">
       <p>If the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> is set, follow the steps below:</p>
       

       <ol>
        <li data-md="">
         <p>Let <var>bytes</var> be the byte sequence that results from reading a <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a> from <var>b</var>.
If a <a data-link-type="dfn" href="#file-read-error">file read error</a> occurs reading a <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a> from <var>b</var>,
return <var>s</var> with the error flag set,
along with a <a data-link-type="dfn" href="#failureReason">failure reason</a>,
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
         


         <p class="note" role="note">Note: Along with returning failure,
the synchronous part of this algorithm must return the <a data-link-type="dfn" href="#failureReason">failure reason</a> that occurred
for <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throwing an exception</a> by synchronous methods
that invoke this algorithm with the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> set.</p>
         


        <li data-md="">
         <p>If there are no errors,
push <var>bytes</var> to <var>s</var>,
and increment <var>s</var>’s <var>transmitted</var> <a data-link-type="biblio" href="#biblio-fetch">[Fetch]</a>
by the number of bytes in <var>bytes</var>.
Reset <var>bytes</var> to the empty byte sequence
and continue reading <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a>s as above.</p>
         


        <li data-md="">
         <p>When all the bytes of <var>b</var> have been read into <var>s</var>,
return <var>s</var>
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
         
</ol>
       

      <li data-md="">
       <p>Otherwise, the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> is unset.
Return <var>s</var> and process the rest of this algorithm asynchronously.</p>
       


      <li data-md="">
       <p>Let <var>bytes</var> be the byte sequence that results from reading a <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a> from <var>b</var>.
If a <a data-link-type="dfn" href="#file-read-error">file read error</a> occurs reading a <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a> from <var>b</var>,
set the error flag on <var>s</var>,
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a> with a <a data-link-type="dfn" href="#failureReason">failure reason</a>.</p>
       


       <p class="note" role="note">Note: The asynchronous part of this algorithm must signal the <a data-link-type="dfn" href="#failureReason">failure reason</a> that occurred
for asynchronous error reporting by methods expecting <var>s</var>
and which invoke this algorithm with the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> unset.</p>
       


      <li data-md="">
       <p>If no <a data-link-type="dfn" href="#file-read-error">file read error</a> occurs,
push <var>bytes</var> to <var>s</var>,
and increment <var>s</var>’s <var>transmitted</var> <a data-link-type="biblio" href="#biblio-fetch">[Fetch]</a>
by the number of bytes in <var>bytes</var>.
Reset <var>bytes</var> to the empty byte sequence
and continue reading <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a>s as above.</p>
       
</ol></ol>

   <p>To perform an <dfn data-dfn-type="dfn" data-noexport="" id="task-read-operation">annotated task read operation<a class="self-link" href="#task-read-operation"></a></dfn>
on a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> <var>b</var>,
perform the steps below:</p>


   <ol>
    <li data-md="">
     <p>Perform a <a data-link-type="dfn" href="#readOperation">read operation</a> on <var>b</var> with the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> unset,
along with the additional steps below.</p>
     

    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#readOperation">read operation</a> terminates with a <a data-link-type="dfn" href="#failureReason">failure reason</a>,
<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <dfn data-dfn-type="dfn" data-noexport="" id="process-read-error">process read error<a class="self-link" href="#process-read-error"></a></dfn> with the <a data-link-type="dfn" href="#failureReason">failure reason</a>
and terminate this algorithm.</p>
     

    <li data-md="">
     <p>When the first <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a> is being pushed to the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body">body</a> <var>s</var> during the <a data-link-type="dfn" href="#readOperation">read operation</a>,
<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <dfn data-dfn-type="dfn" data-noexport="" id="process-read">process read<a class="self-link" href="#process-read"></a></dfn>.</p>
     

    <li data-md="">
     <p>Once the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body">body</a> <var>s</var> from the <a data-link-type="dfn" href="#readOperation">read operation</a> has at least one <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a> read into it,
or there are no <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a>s left to read from <var>b</var>,
<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <dfn data-dfn-type="dfn" data-noexport="" id="process-read-data">process read data<a class="self-link" href="#process-read-data"></a></dfn>.
Keep <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queuing tasks</a> to <a data-link-type="dfn" href="#process-read-data">process read data</a>
for every <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a> read or every 50ms,
whichever is <em>least frequent</em>.</p>
     

    <li data-md="">
     <p>When all of the <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#chunk">chunk</a>s from <var>b</var> are read into the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body">body</a> <var>s</var> from the <a data-link-type="dfn" href="#readOperation">read operation</a>,
<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <dfn data-dfn-type="dfn" data-noexport="" id="process-read-EOF">process read EOF<a class="self-link" href="#process-read-EOF"></a></dfn>.</p>
     
</ol>

   <p>Use the <a data-link-type="dfn" href="#fileReadingTaskSource">file reading task source</a> for all these tasks.</p>



   <h3 class="heading settled" data-level="7.2" id="blobreader-task-source"><span class="secno">7.2. </span><span class="content">
The File Reading Task Source</span><a class="self-link" href="#blobreader-task-source"></a></h3>


   <p>This specification defines a new generic <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">task source</a> called the <dfn data-dfn-type="dfn" data-noexport="" id="fileReadingTaskSource">file reading task source<a class="self-link" href="#fileReadingTaskSource"></a></dfn>,
which is used for all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">tasks that are queued</a> in this specification
to read byte sequences associated with <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> and <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> objects.
It is to be used for features that trigger in response to asynchronously reading binary data.</p>


   <h3 class="heading settled" data-level="7.3" id="APIASynch"><span class="secno">7.3. </span><span class="content">
The FileReader API</span><a class="self-link" href="#APIASynch"></a></h3>


   <pre class="idl">[<dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="constructor" data-export="" data-global-name="FileReader<interface>/FileReader()<constructor>" data-lt="FileReader()" id="dom-filereader-filereader">Constructor<a class="self-link" href="#dom-filereader-filereader"></a></dfn>, Exposed=(Window,Worker)]
interface <dfn class="idl-code" data-dfn-type="interface" data-export="" data-global-name="" id="filereader">FileReader<a class="self-link" href="#filereader"></a></dfn>: <a data-link-type="idl-name" href="http://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {

  // async read methods
  void <a class="idl-code" data-global-name="FileReader<interface>/readAsArrayBuffer(blob)<method>" data-link-type="method" href="#dom-filereader-readasarraybufferblob">readAsArrayBuffer</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="FileReader<interface>/readAsArrayBuffer(blob)<method>/blob<argument>" data-link-type="argument" href="#dom-filereader-readasarraybufferblob-blob">blob</a>);
  void <a class="idl-code" data-global-name="FileReader<interface>/readAsText(blob, label)<method>/readAsText(blob)<method>" data-link-type="method" href="#dom-filereader-readastextblob-label">readAsText</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <dfn class="idl-code" data-dfn-for="FileReader/readAsText(blob, label)" data-dfn-type="argument" data-export="" data-global-name="FileReader<interface>/readAsText(blob, label)<method>/blob<argument>" id="dom-filereader-readastextblob-label-blob">blob<a class="self-link" href="#dom-filereader-readastextblob-label-blob"></a></dfn>, optional DOMString <dfn class="idl-code" data-dfn-for="FileReader/readAsText(blob, label)" data-dfn-type="argument" data-export="" data-global-name="FileReader<interface>/readAsText(blob, label)<method>/label<argument>" id="dom-filereader-readastextblob-label-label">label<a class="self-link" href="#dom-filereader-readastextblob-label-label"></a></dfn>);
  void <a class="idl-code" data-global-name="FileReader<interface>/readAsDataURL(blob)<method>" data-link-type="method" href="#dom-filereader-readasdataurlblob">readAsDataURL</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="FileReader<interface>/readAsDataURL(blob)<method>/blob<argument>" data-link-type="argument" href="#dom-filereader-readasarraybufferblob-blob">blob</a>);

  void <a class="idl-code" data-global-name="FileReader<interface>/abort()<method>" data-link-type="method" href="#dom-filereader-abort">abort</a>();

  // states
  const unsigned short <a class="idl-code" data-global-name="FileReader<interface>/EMPTY<const>" data-link-type="const" href="#dom-filereader-empty">EMPTY</a> = 0;
  const unsigned short <a class="idl-code" data-global-name="FileReader<interface>/LOADING<const>" data-link-type="const" href="#dom-filereader-loading">LOADING</a> = 1;
  const unsigned short <a class="idl-code" data-global-name="FileReader<interface>/DONE<const>" data-link-type="const" href="#dom-filereader-done">DONE</a> = 2;


  readonly attribute unsigned short <a class="idl-code" data-global-name="FileReader<interface>/readyState<attribute>" data-link-type="attribute" data-readonly="" data-type="unsigned short " href="#dom-filereader-readystate">readyState</a>;

  // File or Blob data
  readonly attribute (DOMString or ArrayBuffer)? <a class="idl-code" data-global-name="FileReader<interface>/result<attribute>" data-link-type="attribute" data-readonly="" data-type="(DOMString or ArrayBuffer)? " href="#dom-filereader-result">result</a>;

  readonly attribute <a data-link-type="idl-name" href="http://dom.spec.whatwg.org/#domerror">DOMError</a>? <a class="idl-code" data-global-name="FileReader<interface>/error<attribute>" data-link-type="attribute" data-readonly="" data-type="DOMError? " href="#dom-filereader-error0">error</a>;

  // event handler content attributes
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onloadstart<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onloadstart">onloadstart</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onprogress<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onprogress">onprogress</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onload<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onload">onload</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onabort<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onabort">onabort</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onerror<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onerror">onerror</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onloadend<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onloadend">onloadend</a>;

};
</pre>


   <h4 class="heading settled" data-level="7.3.1" id="filereaderConstrctr"><span class="secno">7.3.1. </span><span class="content">
Constructor</span><a class="self-link" href="#filereaderConstrctr"></a></h4>


   <p>When the <code class="idl"><a data-link-type="idl" href="#dom-filereader-filereader">FileReader()</a></code> constructor is invoked,
the user agent must return a new <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object.</p>


   <p>In environments where the global object is represented by a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#window">Window</a></code> or a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#workerglobalscope">WorkerGlobalScope</a></code> object,
the <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> constructor must be available.</p>


   <h4 class="heading settled" data-level="7.3.2" id="event-handler-attributes-section"><span class="secno">7.3.2. </span><span class="content">
Event Handler Content Attributes</span><a class="self-link" href="#event-handler-attributes-section"></a></h4>


   <p>The following are the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attribute">event handler content attributes</a>
(and their corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event types</a>)
that user agents must support on <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> as DOM attributes:</p>


   <table>
	
    <thead>
		
     <tr>
			
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attribute">event handler content attribute</a>
			
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event type</a>
	
    <tbody>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-onloadstart">onloadstart<a class="self-link" href="#dom-filereader-onloadstart"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl" href="#dom-filereader-loadstart">loadstart</a></code>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-onprogress">onprogress<a class="self-link" href="#dom-filereader-onprogress"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl" href="#dom-filereader-progress">progress</a></code>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-onabort">onabort<a class="self-link" href="#dom-filereader-onabort"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl" href="#dom-filereader-abort0">abort</a></code>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-onerror">onerror<a class="self-link" href="#dom-filereader-onerror"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-onload">onload<a class="self-link" href="#dom-filereader-onload"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl" href="#dom-filereader-load">load</a></code>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-onloadend">onloadend<a class="self-link" href="#dom-filereader-onloadend"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code>
</table>


   <h4 class="heading settled" data-level="7.3.3" id="blobreader-state"><span class="secno">7.3.3. </span><span class="content">
FileReader States</span><a class="self-link" href="#blobreader-state"></a></h4>


   <p>The <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object can be in one of 3 states.
The <dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-readystate">readyState<a class="self-link" href="#dom-filereader-readystate"></a></dfn> attribute,
on getting,
must return the current state,
which must be one of the following values:</p>


   <dl>
	
    <dt><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="const" data-export="" id="dom-filereader-empty">EMPTY<a class="self-link" href="#dom-filereader-empty"></a></dfn> (numeric value 0)
	
    <dd>The <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object has been constructed,
		and there are no pending reads.
		None of the <a data-link-type="dfn" href="#read-methods">read methods</a> have been called.
		This is the default state of a newly minted <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object,
		until one of the <a data-link-type="dfn" href="#read-methods">read methods</a> have been called on it.
	
    <dt><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="const" data-export="" id="dom-filereader-loading">LOADING<a class="self-link" href="#dom-filereader-loading"></a></dfn> (numeric value 1)
	
    <dd>A <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> is being read.
		One of the <a data-link-type="dfn" href="#read-methods">read methods</a> is being processed,
		and no error has occurred during the read.
	
    <dt><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="const" data-export="" id="dom-filereader-done">DONE<a class="self-link" href="#dom-filereader-done"></a></dfn> (numeric value 2)
	
    <dd>The entire <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> has been read into memory,
		OR a <a data-link-type="dfn" href="#file-read-error">file read error</a> occurred,
		OR the read was aborted using <code class="idl"><a data-link-type="idl" href="#dom-filereader-abort">abort()</a></code>.
		The <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> is no longer reading a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>.
		If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is set to <code class="idl"><a data-link-type="idl" href="#dom-filereader-done">DONE</a></code>
		it means at least one of the <a data-link-type="dfn" href="#read-methods">read methods</a> have been called on this <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code>.
</dl>


   <h4 class="heading settled" data-level="7.3.4" id="reading-a-file"><span class="secno">7.3.4. </span><span class="content">
Reading a File or Blob</span><a class="self-link" href="#reading-a-file"></a></h4>


   <p>The <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> interface makes available three asynchronous <dfn data-dfn-type="dfn" data-lt="read method" data-noexport="" id="read-methods">read methods<a class="self-link" href="#read-methods"></a></dfn>--
<code class="idl"><a data-link-type="idl" href="#dom-filereader-readasarraybufferblob">readAsArrayBuffer()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-filereader-readastextblob-label">readAsText()</a></code>, and <code class="idl"><a data-link-type="idl" href="#dom-filereader-readasdataurlblob">readAsDataURL()</a></code>,
which read files into memory.
If multiple concurrent read methods are called on the same <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object,
user agents must throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> on any of the read methods that occur
when <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>.</p>


   <h5 class="heading settled" data-level="7.3.4.1" id="filedata-attr"><span class="secno">7.3.4.1. </span><span class="content">
The <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute</span><a class="self-link" href="#filedata-attr"></a></h5>


   <p>On getting, the <dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-result">result<a class="self-link" href="#dom-filereader-result"></a></dfn> attribute returns a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>'s data
as a <code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code>, or as an <code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code>, or <code>null</code>,
depending on the <a data-link-type="dfn" href="#read-methods">read method</a> that has been called on the <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code>,
and any errors that may have occurred.</p>


   <p>The list below is normative for the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute
and is the conformance criteria for this attribute:</p>


   <ul>
    <li data-md="">
     <p>On getting,
if the <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-empty">EMPTY</a></code>
(no read method has been called)
then the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute must return <code>null</code>.</p>
     

    <li data-md="">
     <p>On getting,
if an error in reading the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> has occurred
(using <em>any</em> <a data-link-type="dfn" href="#read-methods">read method</a>)
then the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute must return <code>null</code>.</p>
     

    <li data-md="">
     <p>On getting, if the <code class="idl"><a data-link-type="idl" href="#dom-filereader-readasdataurlblob">readAsDataURL()</a></code> <a data-link-type="dfn" href="#read-methods">read method</a> is used,
the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute must return a <code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code>
that is a Data URL <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a> encoding of the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>'s data.</p>
     

    <li data-md="">
     <p>On getting, if the <code class="idl"><a data-link-type="idl" href="#dom-filereader-readastextblob-label">readAsText()</a></code> <a data-link-type="dfn" href="#read-methods">read method</a> is called
and no error in reading the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> has occurred,
then the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute must return a string
representing the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>'s data as a text string,
and should decode the string into memory in the format specified by the <a data-link-type="dfn" href="#encoding-determination">encoding determination</a> as a <code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code>.</p>
     

    <li data-md="">
     <p>On getting, if the <code class="idl"><a data-link-type="idl" href="#dom-filereader-readasarraybufferblob">readAsArrayBuffer()</a></code> <a data-link-type="dfn" href="#read-methods">read method</a> is called
and no error in reading the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> has occurred,
then the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute must return an <code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code> object.</p>
     
</ul>

   <h5 class="heading settled" data-level="7.3.4.2" id="readAsDataURL"><span class="secno">7.3.4.2. </span><span class="content">
The <code class="idl"><a data-link-type="idl" href="#dom-filereader-readasdataurlblob">readAsDataURL()</a></code> method</span><a class="self-link" href="#readAsDataURL"></a></h5>


   <p>When the <dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="method" data-export="" id="dom-filereader-readasdataurlblob">readAsDataURL(blob)<a class="self-link" href="#dom-filereader-readasdataurlblob"></a></dfn> method is called,
the user agent must run the steps below.</p>


   <ol>
    <li data-md="">
     <p>If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If the <code>blob</code> is in the <a data-link-type="dfn" href="#closed">CLOSED</a> <a data-link-type="dfn" href="#readabilityState">readability state</a>,
set the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute of the <a data-link-type="dfn">context object</a>
to return an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code>
at the <a data-link-type="dfn">context object</a>.
<a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>Otherwise set <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>.</p>
     

    <li data-md="">
     <p>Initiate an <a data-link-type="dfn" href="#task-read-operation">annotated task read operation</a> using the <code>blob</code> argument as <var>input</var>
and handle <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">tasks queued</a> on the <a data-link-type="dfn" href="#fileReadingTaskSource">file reading task source</a> per below.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-error">process read error</a> with a <a data-link-type="dfn" href="#failureReason">failure reason</a>,
proceed to <a href="#error-steps">§7.3.4.5 
Error Steps</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read">process read</a> <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadstart">loadstart</a></code> at the <a data-link-type="dfn">context object</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-data">process read data</a> <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-progress">progress</a></code> at the <a data-link-type="dfn">context object</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-EOF">process read EOF</a> run these substeps:</p>
     

     <ol>
      <li data-md="">
       <p>Set <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-filereader-done">DONE</a></code>.</p>
       

      <li data-md="">
       <p>Set the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute to the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body">body</a> returned by the <a data-link-type="dfn" href="#readOperation">read operation</a> as a DataURL <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a>;
on getting, the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute returns the <code>blob</code> as a Data URL <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a>.</p>
       


       <ul>
        <li data-md="">
         <p>Use the <code>blob</code>’s <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute as part of the Data URL if it is available
in keeping with the Data URL specification <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a>.</p>
         

        <li data-md="">
         <p>If the <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute is not available on the <code>blob</code> return a Data URL without a media-type. <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a>.
Data URLs that do not have media-types <a data-link-type="biblio" href="#biblio-rfc2046">[RFC2046]</a> must be treated as plain text by conforming user agents. <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a>.</p>
         
</ul>
      <li data-md="">
       <p><a data-link-type="dfn" href="#fire-a-progress-event">Fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-load">load</a></code> at the <a data-link-type="dfn">context object</a>.</p>
       

      <li data-md="">
       <p>Unless <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
<a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> at the <a data-link-type="dfn">context object</a>.
If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code> do NOT fire <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> at the <a data-link-type="dfn">context object</a>.</p>
       
</ol>
    <li data-md="">
     <p><a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     
</ol>

   <h5 class="heading settled" data-level="7.3.4.3" id="readAsText"><span class="secno">7.3.4.3. </span><span class="content">
The <code class="idl"><a data-link-type="idl" href="#dom-filereader-readastextblob-label">readAsText()</a></code> method</span><a class="self-link" href="#readAsText"></a></h5>


   <p>The <code class="idl"><a data-link-type="idl" href="#dom-filereader-readastextblob-label">readAsText()</a></code> method can be called with an optional parameter,
<dfn class="idl-code" data-dfn-for="FileReader/readAsText()" data-dfn-type="argument" data-export="" id="dom-filereader-readastext-label">label<a class="self-link" href="#dom-filereader-readastext-label"></a></dfn>,
which is a <code class="idl"><a data-link-type="idl" href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a></code> argument that represents the label of an encoding [[Encoding Specification]];
if provided, it must be used as part of the <a data-link-type="dfn" href="#encoding-determination">encoding determination</a> used when processing this method call.</p>


   <p>When the <dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="method" data-export="" data-lt="readAsText(blob, label)|readAsText(blob)" id="dom-filereader-readastextblob-label">readAsText(blob, optional label)<a class="self-link" href="#dom-filereader-readastextblob-label"></a></dfn> method is called
(the <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-filereader-readastext-label">label</a></code> argument is optional),
the user agent must run the steps below.</p>


   <ol>
    <li data-md="">
     <p>If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code> throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If the <code>blob</code> is in the <a data-link-type="dfn" href="#closed">CLOSED</a> <a data-link-type="dfn" href="#readabilityState">readability state</a>,
set the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute of the <a data-link-type="dfn">context object</a>
to return an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> at the <a data-link-type="dfn">context object</a>.
<a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>Otherwise set <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>.</p>
     

    <li data-md="">
     <p>Initiate an <a data-link-type="dfn" href="#task-read-operation">annotated task read operation</a> using the <code>blob</code> argument as <var>input</var>
and handle <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">tasks queued</a> on the <a data-link-type="dfn" href="#fileReadingTaskSource">file reading task source</a> per below.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-error">process read error</a> with a <a data-link-type="dfn" href="#failureReason">failure reason</a>,
proceed to the <a href="#error-steps">§7.3.4.5 
Error Steps</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read">process read</a> <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadstart">loadstart</a></code> at the <a data-link-type="dfn">context object</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-data">process read data</a> <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-progress">progress</a></code> at the <a data-link-type="dfn">context object</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-EOF">process read EOF</a> run these substeps:</p>
     

     <ol>
      <li data-md="">
       <p>Set <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-filereader-done">DONE</a></code></p>
       

      <li data-md="">
       <p>Set the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute to the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body">body</a> returned by the <a data-link-type="dfn" href="#readOperation">read operation</a>,
represented as a string in a format determined by the <a data-link-type="dfn" href="#encoding-determination">encoding determination</a>.</p>
       

      <li data-md="">
       <p><a data-link-type="dfn" href="#fire-a-progress-event">Fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-load">load</a></code> at the <a data-link-type="dfn">context object</a>.</p>
       

      <li data-md="">
       <p>Unless <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
<a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> at the <a data-link-type="dfn">context object</a>.
If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
do NOT fire <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> at the <a data-link-type="dfn">context object</a>.</p>
       
</ol>
    <li data-md="">
     <p><a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     
</ol>

   <h5 class="heading settled" data-level="7.3.4.4" id="readAsArrayBuffer"><span class="secno">7.3.4.4. </span><span class="content">
The <code class="idl"><a data-link-type="idl" href="#dom-filereader-readasarraybufferblob">readAsArrayBuffer()</a></code> method</span><a class="self-link" href="#readAsArrayBuffer"></a></h5>


   <p>When the <dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="method" data-export="" id="dom-filereader-readasarraybufferblob">readAsArrayBuffer(blob)<a class="self-link" href="#dom-filereader-readasarraybufferblob"></a></dfn> method is called,
the user agent must run the steps below.</p>


   <ol>
    <li data-md="">
     <p>If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code> throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If the <code>blob</code> is in the <a data-link-type="dfn" href="#closed">CLOSED</a> <a data-link-type="dfn" href="#readabilityState">readability state</a>,
set the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute of the <a data-link-type="dfn">context object</a>
to return an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> at the <a data-link-type="dfn">context object</a>.
<a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>Otherwise set <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>.</p>
     

    <li data-md="">
     <p>Initiate an <a data-link-type="dfn" href="#task-read-operation">annotated task read operation</a> using the <code>blob</code> argument as <var>input</var>
and handle <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">tasks queued</a> on the <a data-link-type="dfn" href="#fileReadingTaskSource">file reading task source</a> per below.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-error">process read error</a> with a <a data-link-type="dfn" href="#failureReason">failure reason</a>,
proceed to the <a href="#error-steps">§7.3.4.5 
Error Steps</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read">process read</a> <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadstart">loadstart</a></code> at the <a data-link-type="dfn">context object</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-data">process read data</a> <a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-progress">progress</a></code> at the <a data-link-type="dfn">context object</a>.</p>
     

    <li data-md="">
     <p>To <a data-link-type="dfn" href="#process-read-EOF">process read EOF</a> run these substeps:</p>
     

     <ol>
      <li data-md="">
       <p>Set <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-filereader-done">DONE</a></code></p>
       

      <li data-md="">
       <p>Set the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute to the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body">body</a> returned by the <a data-link-type="dfn" href="#readOperation">read operation</a> as an <code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code> object.</p>
       

      <li data-md="">
       <p><a data-link-type="dfn" href="#fire-a-progress-event">Fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-load">load</a></code> at the <a data-link-type="dfn">context object</a>.</p>
       

      <li data-md="">
       <p>Unless <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
<a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> at the <a data-link-type="dfn">context object</a>.
If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
do NOT fire <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> at the <a data-link-type="dfn">context object</a>.</p>
       
</ol>
    <li data-md="">
     <p><a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     
</ol>

   <h5 class="heading settled" data-level="7.3.4.5" id="error-steps"><span class="secno">7.3.4.5. </span><span class="content">
Error Steps</span><a class="self-link" href="#error-steps"></a></h5>


   <p>These error steps are to <a data-link-type="dfn" href="#process-read-error">process read error</a> with a <a data-link-type="dfn" href="#failureReason">failure reason</a>.</p>


   <ol>
    <li data-md="">
     <p>Set the <a data-link-type="dfn">context object</a>’s <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-filereader-done">DONE</a></code>
and <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> to null if it is not already set to null.</p>
     

    <li data-md="">
     <p>Set the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute on the <a data-link-type="dfn">context object</a>;
on getting, the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute must be a a <code class="idl"><a data-link-type="idl" href="http://dom.spec.whatwg.org/#domerror">DOMError</a></code> object
that corresponds to the <a data-link-type="dfn" href="#failureReason">failure reason</a>.
<a data-link-type="dfn" href="#fire-a-progress-event">Fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> at the <a data-link-type="dfn">context object</a>.</p>
     

    <li data-md="">
     <p>Unless <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>,
<a data-link-type="dfn" href="#fire-a-progress-event">fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> at the <a data-link-type="dfn">context object</a>.
If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
do NOT fire <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> at the <a data-link-type="dfn">context object</a>.</p>
     

    <li data-md="">
     <p><a data-link-type="dfn" href="#terminate-an-algorithm">Terminate the algorithm</a> for any <a data-link-type="dfn" href="#read-methods">read method</a>.</p>
     
</ol>

   <h5 class="heading settled" data-level="7.3.4.6" id="abort"><span class="secno">7.3.4.6. </span><span class="content">
The abort() method</span><a class="self-link" href="#abort"></a></h5>


   <p>When the <dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="method" data-export="" id="dom-filereader-abort">abort()<a class="self-link" href="#dom-filereader-abort"></a></dfn> method is called,
the user agent must run the steps below:</p>


   <ol>
    <li data-md="">
     <p>If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-empty">EMPTY</a></code>
or if <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-done">DONE</a></code>
set <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> to <code>null</code>
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
set <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-filereader-done">DONE</a></code>
and <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> to <code>null</code>.</p>
     

    <li data-md="">
     <p>If there are any <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task">tasks</a> from the <a data-link-type="dfn">context object</a>
on the <a data-link-type="dfn" href="#fileReadingTaskSource">file reading task source</a> in an affiliated <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">task queue</a>,
then remove those <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task">tasks</a> from that task queue.</p>
     

    <li data-md="">
     <p><a data-link-type="dfn" href="#terminate-an-algorithm">Terminate the algorithm</a> for the <a data-link-type="dfn" href="#read-methods">read method</a> being processed.</p>
     

    <li data-md="">
     <p><a data-link-type="dfn" href="#fire-a-progress-event">Fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-abort0">abort</a></code>.</p>
     

    <li data-md="">
     <p><a data-link-type="dfn" href="#fire-a-progress-event">Fire a progress event</a> called <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code>.</p>
     
</ol>

   <h5 class="heading settled" data-level="7.3.4.7" id="blobAndFileParams"><span class="secno">7.3.4.7. </span><span class="content">
Blob Parameters</span><a class="self-link" href="#blobAndFileParams"></a></h5>


   <p>The three <a data-link-type="dfn">asynchronous read methods</a>,
the three <a data-link-type="dfn" href="#read-method-sync">synchronous read methods</a>,
<code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code>
and <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code>
take a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> parameter.
This section defines this parameter.</p>


   <dl>
	
    <dt><dfn class="idl-code" data-dfn-for="FileReader/readAsArrayBuffer(blob), FileReader/readAsText(blob), FileReader/readAsDataURL(blob), URL/createObjectURL(blob), URL/createFor(blob)" data-dfn-type="argument" data-export="" id="dom-filereader-readasarraybufferblob-blob">blob<a class="self-link" href="#dom-filereader-readasarraybufferblob-blob"></a></dfn>
	
    <dd>This is a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> argument
		and must be a reference to a single <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> in a <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code>
		or a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> argument not obtained from the underlying OS file system.
</dl>



   <h3 class="heading settled" data-level="7.4" id="enctype"><span class="secno">7.4. </span><span class="content">
Determining Encoding</span><a class="self-link" href="#enctype"></a></h3>


   <p>When reading <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> objects using the <code class="idl"><a data-link-type="idl" href="#dom-filereader-readastextblob-label">readAsText()</a></code> <a data-link-type="dfn" href="#read-methods">read method</a>,
the following <dfn data-dfn-type="dfn" data-noexport="" id="encoding-determination">encoding determination<a class="self-link" href="#encoding-determination"></a></dfn> steps must be followed:</p>


   <ol>
    <li data-md="">
     <p>Let <var>encoding</var> be null.</p>
     

    <li data-md="">
     <p>If the <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-filereader-readastext-label">label</a></code> argument is present when calling the method,
set <var>encoding</var> to the result of the <a data-link-type="dfn">getting an encoding</a> from <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-filereader-readastext-label">label</a></code>.</p>
     

    <li data-md="">
     <p>If the <a data-link-type="dfn">getting an encoding</a> steps above return failure,
then set <var>encoding</var> to null.</p>
     

    <li data-md="">
     <p>If <var>encoding</var> is null,
and the <code>blob</code> argument’s <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute is present,
and it uses a Charset Parameter <a data-link-type="biblio" href="#biblio-rfc2046">[RFC2046]</a>,
set <var>encoding</var> to the result of <a data-link-type="dfn">getting an encoding</a>
for the portion of the Charset Parameter that is a <i>label</i> of an encoding.</p>
     


     <div class="example" id="example-301990ca"><a class="self-link" href="#example-301990ca"></a>
	If <code>blob</code> has a <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute of <code>text/plain;charset=utf-8</code>
	then <a data-link-type="dfn">getting an encoding</a> is run using <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf_8">utf-8</a> as the label.
	Note that user agents must parse and extract the portion of the Charset Parameter that constitutes a <i>label</i> of an encoding.
</div>
     

    <li data-md="">
     <p>If the <a data-link-type="dfn">getting an encoding</a> steps above return failure,
then set <var>encoding</var> to null.</p>
     

    <li data-md="">
     <p>If <var>encoding</var> is null,
then set encoding to utf-8.</p>
     

    <li data-md="">
     <p><a data-link-type="dfn">Decode</a> this <code>blob</code> using fallback encoding <var>encoding</var>,
and return the result.
On getting, the <code class="idl"><a data-link-type="idl" href="#dom-filereader-result">result</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object
returns a string in <var>encoding</var> format.
The synchronous <code class="idl"><a data-link-type="idl" href="#dom-filereadersync-readastextblob-label">readAsText()</a></code> method of the <code class="idl"><a data-link-type="idl" href="#filereadersync">FileReaderSync</a></code> object
returns a string in <var>encoding</var> format.</p>
     
</ol>

   <h3 class="heading settled" data-level="7.5" id="events"><span class="secno">7.5. </span><span class="content">
Events</span><a class="self-link" href="#events"></a></h3>


   <p>The <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object must be the event target for all events in this specification.</p>


   <p>When this specification says to <dfn data-dfn-type="dfn" data-noexport="" id="fire-a-progress-event">fire a progress event<a class="self-link" href="#fire-a-progress-event"></a></dfn> <i>called e</i>
(for some <code class="idl"><a data-link-type="idl">ProgressEvent</a></code> <code>e</code>
at a given <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> <code>reader</code> as the <a data-link-type="dfn">context object</a>),
the following are normative:</p>


   <ul>
    <li data-md="">
     <p>The progress event <code>e</code> does not bubble.  <code>e.bubbles</code> must be false <a data-link-type="biblio" href="#biblio-dom">[DOM]</a></p>
     

    <li data-md="">
     <p>The progress event <code>e</code> is NOT cancelable. <code>e.cancelable</code> must be false <a data-link-type="biblio" href="#biblio-dom">[DOM]</a></p>
     
</ul>

   <h4 class="heading settled" data-level="7.5.1" id="event-summary"><span class="secno">7.5.1. </span><span class="content">
Event Summary</span><a class="self-link" href="#event-summary"></a></h4>


   <p>The following are the events that are <a data-link-type="dfn">fired</a> at <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> objects.</p>


   <table id="event-summary-table">
	
    <thead>
		
     <tr>
			
      <th>Event name
			
      <th>Interface
			
      <th>Fired when…
	
    <tbody>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="event" data-export="" id="dom-filereader-loadstart">loadstart<a class="self-link" href="#dom-filereader-loadstart"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl">ProgressEvent</a></code>
			
      <td>When the read starts.
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="event" data-export="" id="dom-filereader-progress">progress<a class="self-link" href="#dom-filereader-progress"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl">ProgressEvent</a></code>
			
      <td>While reading (and decoding) <code>blob</code>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="event" data-export="" id="dom-filereader-abort0">abort<a class="self-link" href="#dom-filereader-abort0"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl">ProgressEvent</a></code>
			
      <td>When the read has been aborted.
				For instance, by invoking the <code class="idl"><a data-link-type="idl" href="#dom-filereader-abort">abort()</a></code> method.
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="event" data-export="" id="dom-filereader-error">error<a class="self-link" href="#dom-filereader-error"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl">ProgressEvent</a></code>
			
      <td>When the read has failed (see <a data-link-type="dfn" href="#file-read-error">file read errors</a>).
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="event" data-export="" id="dom-filereader-load">load<a class="self-link" href="#dom-filereader-load"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl">ProgressEvent</a></code>
			
      <td>When the read has successfully completed.
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="event" data-export="" id="dom-filereader-loadend">loadend<a class="self-link" href="#dom-filereader-loadend"></a></dfn>
			
      <td><code class="idl"><a data-link-type="idl">ProgressEvent</a></code>
			
      <td>When the request has completed (either in success or failure).
</table>


   <h4 class="heading settled" data-level="7.5.2" id="eventInvariants"><span class="secno">7.5.2. </span><span class="content">
Summary of Event Invariants</span><a class="self-link" href="#eventInvariants"></a></h4>


   <p><em>This section is informative.</em></p>


   <p>The following are invariants applicable to <a data-link-type="dfn">event firing</a>
for a given asynchronous <a data-link-type="dfn" href="#read-methods">read method</a> in this specification:</p>


   <ol>
    <li data-md="">
     <p>Once a <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadstart">loadstart</a></code> has been fired,
a corresponding <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> fires at completion of the read,
UNLESS any of the following are true:</p>
     


     <ul>
      <li data-md="">
       <p>the <a data-link-type="dfn" href="#read-methods">read method</a> has been cancelled using <code class="idl"><a data-link-type="idl" href="#dom-filereader-abort">abort()</a></code>
and a new <a data-link-type="dfn" href="#read-methods">read method</a> has been invoked</p>
       

      <li data-md="">
       <p>the event handler function for a <code class="idl"><a data-link-type="idl" href="#dom-filereader-load">load</a></code> event initiates a new read</p>
       

      <li data-md="">
       <p>the event handler function for a <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> event initiates a new read.</p>
       
</ul>
     

     <p class="note" role="note">Note: The events <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadstart">loadstart</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code> are not coupled in a one-to-one manner.</p>
     


     <div class="example" id="example-58c353ee"><a class="self-link" href="#example-58c353ee"></a>
	This example showcases "read-chaining":
	initiating another read from within an event handler while the "first" read continues processing.

		
      <pre class="lang-javascript">// In code of the sort...
reader.readAsText(file);
reader.onload = function(){reader.readAsText(alternateFile);}

.....

//... the loadend event must not fire for the first read

reader.readAsText(file);
reader.abort();
reader.onabort = function(){reader.readAsText(updatedFile);}

//... the loadend event must not fire for the first read
</pre>
</div>
     

    <li data-md="">
     <p>One <code class="idl"><a data-link-type="idl" href="#dom-filereader-progress">progress</a></code> event will fire when <code>blob</code> has been completely read into memory.</p>
     

    <li data-md="">
     <p>No <code class="idl"><a data-link-type="idl" href="#dom-filereader-progress">progress</a></code> event fires before <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadstart">loadstart</a></code>.</p>
     

    <li data-md="">
     <p>No <code class="idl"><a data-link-type="idl" href="#dom-filereader-progress">progress</a></code> event fires after any one of <code class="idl"><a data-link-type="idl" href="#dom-filereader-abort0">abort</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-filereader-load">load</a></code>, and <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> have fired.
At most one of <code class="idl"><a data-link-type="idl" href="#dom-filereader-abort0">abort</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-filereader-load">load</a></code>, and <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> fire for a given read.</p>
     

    <li data-md="">
     <p>No <code class="idl"><a data-link-type="idl" href="#dom-filereader-abort0">abort</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-filereader-load">load</a></code>, or <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> event fires after <code class="idl"><a data-link-type="idl" href="#dom-filereader-loadend">loadend</a></code>.</p>
     
</ol>

   <h3 class="heading settled" data-level="7.6" id="readingOnThreads"><span class="secno">7.6. </span><span class="content">
Reading on Threads</span><a class="self-link" href="#readingOnThreads"></a></h3>


   <p>Web Workers allow for the use of synchronous <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> read APIs,
since such reads on threads do not block the main thread.
This section defines a synchronous API, which can be used within Workers [[Web Workers]].
Workers can avail of both the asynchronous API (the <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object)
<em>and</em> the synchronous API (the <code class="idl"><a data-link-type="idl" href="#filereadersync">FileReaderSync</a></code> object).</p>


   <h4 class="heading settled" data-level="7.6.1" id="FileReaderSync"><span class="secno">7.6.1. </span><span class="content">
The <code class="idl"><a data-link-type="idl" href="#filereadersync">FileReaderSync</a></code> API</span><a class="self-link" href="#FileReaderSync"></a></h4>


   <p>This interface  provides methods to <dfn data-dfn-type="dfn" data-lt="synchronous read method" data-noexport="" id="read-method-sync">synchronously read<a class="self-link" href="#read-method-sync"></a></dfn>
<code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> objects into memory.</p>


   <pre class="idl">[<dfn class="idl-code" data-dfn-for="FileReaderSync" data-dfn-type="constructor" data-export="" data-global-name="FileReaderSync<interface>/FileReaderSync()<constructor>" data-lt="FileReaderSync()" id="dom-filereadersync-filereadersync">Constructor<a class="self-link" href="#dom-filereadersync-filereadersync"></a></dfn>, Exposed=Worker]
interface <dfn class="idl-code" data-dfn-type="interface" data-export="" data-global-name="" id="filereadersync">FileReaderSync<a class="self-link" href="#filereadersync"></a></dfn> {
  // Synchronously return strings

  ArrayBuffer <a class="idl-code" data-global-name="FileReaderSync<interface>/readAsArrayBuffer(blob)<method>" data-link-type="method" href="#dom-filereadersync-readasarraybufferblob">readAsArrayBuffer</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <dfn class="idl-code" data-dfn-for="FileReaderSync/readAsArrayBuffer(blob)" data-dfn-type="argument" data-export="" data-global-name="FileReaderSync<interface>/readAsArrayBuffer(blob)<method>/blob<argument>" id="dom-filereadersync-readasarraybufferblob-blob">blob<a class="self-link" href="#dom-filereadersync-readasarraybufferblob-blob"></a></dfn>);
  DOMString <a class="idl-code" data-global-name="FileReaderSync<interface>/readAsText(blob, label)<method>/readAsText(blob)<method>" data-link-type="method" href="#dom-filereadersync-readastextblob-label">readAsText</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <dfn class="idl-code" data-dfn-for="FileReaderSync/readAsText(blob, label)" data-dfn-type="argument" data-export="" data-global-name="FileReaderSync<interface>/readAsText(blob, label)<method>/blob<argument>" id="dom-filereadersync-readastextblob-label-blob">blob<a class="self-link" href="#dom-filereadersync-readastextblob-label-blob"></a></dfn>, optional DOMString <dfn class="idl-code" data-dfn-for="FileReaderSync/readAsText(blob, label)" data-dfn-type="argument" data-export="" data-global-name="FileReaderSync<interface>/readAsText(blob, label)<method>/label<argument>" id="dom-filereadersync-readastextblob-label-label">label<a class="self-link" href="#dom-filereadersync-readastextblob-label-label"></a></dfn>);
  DOMString <a class="idl-code" data-global-name="FileReaderSync<interface>/readAsDataURL(blob)<method>" data-link-type="method" href="#dom-filereadersync-readasdataurlblob">readAsDataURL</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <dfn class="idl-code" data-dfn-for="FileReaderSync/readAsDataURL(blob)" data-dfn-type="argument" data-export="" data-global-name="FileReaderSync<interface>/readAsDataURL(blob)<method>/blob<argument>" id="dom-filereadersync-readasdataurlblob-blob">blob<a class="self-link" href="#dom-filereadersync-readasdataurlblob-blob"></a></dfn>);
};
</pre>


   <h5 class="heading settled" data-level="7.6.1.1" id="filereadersyncConstrctr"><span class="secno">7.6.1.1. </span><span class="content">
Constructors</span><a class="self-link" href="#filereadersyncConstrctr"></a></h5>


   <p>When the <code class="idl"><a data-link-type="idl" href="#dom-filereadersync-filereadersync">FileReaderSync()</a></code> constructor is invoked,
the user agent must return a new <code class="idl"><a data-link-type="idl" href="#filereadersync">FileReaderSync</a></code> object.</p>


   <p>In environments where the global object is represented by a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#workerglobalscope">WorkerGlobalScope</a></code> object,
the <code class="idl"><a data-link-type="idl" href="#filereadersync">FileReaderSync</a></code> constructor must be available.</p>


   <h5 class="heading settled" data-level="7.6.1.2" id="readAsTextSync"><span class="secno">7.6.1.2. </span><span class="content">
The <code class="idl"><a data-link-type="idl" href="#dom-filereadersync-readastextblob-label">readAsText()</a></code> method</span><a class="self-link" href="#readAsTextSync"></a></h5>


   <p>When the <dfn class="idl-code" data-dfn-for="FileReaderSync" data-dfn-type="method" data-export="" data-lt="readAsText(blob, label)|readAsText(blob)" id="dom-filereadersync-readastextblob-label">readAsText(blob, optional label)<a class="self-link" href="#dom-filereadersync-readastextblob-label"></a></dfn> method is called,
the following steps must be followed:</p>


   <ol>
    <li data-md="">
     <p>If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If the <code>blob</code> has been closed through the <code class="idl"><a data-link-type="idl" href="#dfn-close">close()</a></code> method,
throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>Otherwise, initiate a <a data-link-type="dfn" href="#readOperation">read operation</a> using the <code>blob</code> argument,
and with the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> <em>set</em>.
If the read operation returns failure,
throw the appropriate exception as defined in <a href="#error-codes">§8.1 
Throwing an Exception or Returning an Error</a>.
<a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If no error has occurred,
return the <var>result</var> of the <a data-link-type="dfn" href="#readOperation">read operation</a> represented as a string
in a format determined through the <a data-link-type="dfn" href="#encoding-determination">encoding determination</a> algorithm.</p>
     
</ol>

   <h5 class="heading settled" data-level="7.6.1.3" id="readAsDataURLSync-section"><span class="secno">7.6.1.3. </span><span class="content">
The <code class="idl"><a data-link-type="idl" href="#dom-filereadersync-readasdataurlblob">readAsDataURL()</a></code> method</span><a class="self-link" href="#readAsDataURLSync-section"></a></h5>


   <p>When the <dfn class="idl-code" data-dfn-for="FileReaderSync" data-dfn-type="method" data-export="" id="dom-filereadersync-readasdataurlblob">readAsDataURL(blob)<a class="self-link" href="#dom-filereadersync-readasdataurlblob"></a></dfn> method is called,
the following steps must be followed:</p>


   <ol>
    <li data-md="">
     <p>If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If the <code>blob</code> has been closed through the <code class="idl"><a data-link-type="idl" href="#dfn-close">close()</a></code> method,
throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>Otherwise, initiate a <a data-link-type="dfn" href="#readOperation">read operation</a> using the <code>blob</code> argument,
and with the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> <em>set</em>.
If the <a data-link-type="dfn" href="#readOperation">read operation</a> returns failure,
throw the appropriate exception as defined in <a href="#error-codes">§8.1 
Throwing an Exception or Returning an Error</a>.
<a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If no error has occurred, return the <var>result</var> of the <a data-link-type="dfn" href="#readOperation">read operation</a>
as a Data URL <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a> subject to the considerations below:</p>
     


     <ul>
      <li data-md="">
       <p>Use the <code>blob</code>’s <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute as part of the Data URL if it is available
in keeping with the Data URL specification <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a> .</p>
       

      <li data-md="">
       <p>If the <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute is not available on the <code>blob</code> return a Data URL without a media-type. <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a>.
Data URLs that do not have media-types <a data-link-type="biblio" href="#biblio-rfc2046">[RFC2046]</a> must be treated as plain text by conforming user agents. <a data-link-type="biblio" href="#biblio-rfc2397">[RFC2397]</a>.</p>
       
</ul></ol>

   <h5 class="heading settled" data-level="7.6.1.4" id="readAsArrayBufferSyncSection"><span class="secno">7.6.1.4. </span><span class="content">
The <code class="idl"><a data-link-type="idl" href="#dom-filereadersync-readasarraybufferblob">readAsArrayBuffer()</a></code> method</span><a class="self-link" href="#readAsArrayBufferSyncSection"></a></h5>


   <p>When the <dfn class="idl-code" data-dfn-for="FileReaderSync" data-dfn-type="method" data-export="" id="dom-filereadersync-readasarraybufferblob">readAsArrayBuffer(blob)<a class="self-link" href="#dom-filereadersync-readasarraybufferblob"></a></dfn> method is called,
the following steps must be followed:</p>


   <ol>
    <li data-md="">
     <p>If <code class="idl"><a data-link-type="idl" href="#dom-filereader-readystate">readyState</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filereader-loading">LOADING</a></code>
throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If the <code>blob</code> has been closed through the <code class="idl"><a data-link-type="idl" href="#dfn-close">close()</a></code> method,
throw an <code class="idl"><a data-link-type="idl">InvalidStateError</a></code> exception
and <a data-link-type="dfn" href="#terminate-an-algorithm">terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>Otherwise, initiate a <a data-link-type="dfn" href="#readOperation">read operation</a> using the <code>blob</code> argument,
and with the <a data-link-type="dfn" href="#synchronousFlag">synchronous flag</a> <em>set</em>.
If the <a data-link-type="dfn" href="#readOperation">read operation</a> returns failure,
throw the appropriate exception as defined in <a href="#error-codes">§8.1 
Throwing an Exception or Returning an Error</a>.
<a data-link-type="dfn" href="#terminate-an-algorithm">Terminate this algorithm</a>.</p>
     

    <li data-md="">
     <p>If no error has occurred, return the <var>result</var> of the <a data-link-type="dfn" href="#readOperation">read operation</a> as an <code class="idl"><a data-link-type="idl" href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a></code>.</p>
     
</ol>

   <h2 class="heading settled" data-level="8" id="ErrorAndException"><span class="secno">8. </span><span class="content">
Errors and Exceptions</span><a class="self-link" href="#ErrorAndException"></a></h2>


   <p><dfn data-dfn-type="dfn" data-lt="file read error" data-noexport="" id="file-read-error">File read errors<a class="self-link" href="#file-read-error"></a></dfn> can occur when reading files from the underlying filesystem.
The list below of potential error conditions is <em>informative</em>.</p>


   <ul>
    <li data-md="">
     <p>The <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> being accessed may not exist
at the time one of the <a data-link-type="dfn">asynchronous read methods</a> or <a data-link-type="dfn" href="#read-method-sync">synchronous read methods</a> are called.
This may be due to it having been moved or deleted after a reference to it was acquired
(e.g. concurrent modification with another application).
See <code class="idl"><a data-link-type="idl" href="#exceptdef-notfounderror">NotFoundError</a></code>.</p>
     

    <li data-md="">
     <p>A <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> may be unreadable.
This may be due to permission problems that occur after a reference to a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> has been acquired
(e.g. concurrent lock with another application).
Additionally, the <a data-link-type="dfn" href="#snapshot-state">snapshot state</a> may have changed.
See <code class="idl"><a data-link-type="idl" href="#exceptdef-notreadableerror">NotReadableError</a></code>.</p>
     

    <li data-md="">
     <p>User agents MAY determine that some files are unsafe for use within Web applications.
A file may change on disk since the original file selection,
thus resulting in an invalid read.
Additionally, some file and directory structures may be considered restricted by the underlying filesystem;
attempts to read from them may be considered a security violation.
See <a href="#security-discussion">§10 
Security Considerations</a> and <code class="idl"><a data-link-type="idl" href="#exceptdef-securityerror">SecurityError</a></code>.</p>
     
</ul>

   <h3 class="heading settled" data-level="8.1" id="error-codes"><span class="secno">8.1. </span><span class="content">
Throwing an Exception or Returning an Error</span><a class="self-link" href="#error-codes"></a></h3>


   <p><em>This section is normative.</em></p>


   <p>Error conditions can arise when reading a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>.</p>


   <p>The <a data-link-type="dfn" href="#readOperation">read operation</a> can terminate due to error conditions when reading a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>;
the particular error condition that causes a read operation to return failure
or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <a data-link-type="dfn" href="#process-read-error">process read error</a>
is called a <dfn data-dfn-type="dfn" data-noexport="" id="failureReason">failure reason<a class="self-link" href="#failureReason"></a></dfn>.</p>


   <p>Synchronous read methods <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> exceptions of the type in the table below
if there has been an error owing to a particular <a data-link-type="dfn" href="#failureReason">failure reason</a>.</p>


   <p>Asynchronous read methods use the <dfn class="idl-code" data-dfn-for="FileReader" data-dfn-type="attribute" data-export="" id="dom-filereader-error0">error<a class="self-link" href="#dom-filereader-error0"></a></dfn> attribute of the <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> object,
which must return a <code class="idl"><a data-link-type="idl" href="http://dom.spec.whatwg.org/#domerror">DOMError</a></code> object of the most appropriate type from the table below
if there has been an error owing to a particular <a data-link-type="dfn" href="#failureReason">failure reason</a>,
or otherwise return null.</p>


   <table class="data">
	
    <thead>
		
     <tr>
			
      <th>Type
			
      <th>Description and Failure Reason
	
    <tbody>
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-type="exception" data-export="" id="exceptdef-notfounderror">NotFoundError<a class="self-link" href="#exceptdef-notfounderror"></a></dfn>
			
      <td>If the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> resource could not be found at the time the read was processed,
				this is the "NotFound" <a data-link-type="dfn" href="#failureReason">failure reason</a>.


       <p>For asynchronous read methods the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute must return a <code class="idl"><a data-link-type="idl" href="#exceptdef-notfounderror">NotFoundError</a></code> exception
				and synchronous read methods must <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptdef-notfounderror">NotFoundError</a></code> exception.</p>
       
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-type="exception" data-export="" id="exceptdef-securityerror">SecurityError<a class="self-link" href="#exceptdef-securityerror"></a></dfn>
			
      <td>If:

       <ul>
        <li data-md="">
         <p>it is determined that certain files are unsafe for access within a Web application, this is the "UnsafeFile" <a href="#failureReason">failure reason.</a></p>
         

        <li data-md="">
         <p>it is determined that too many read calls are being made on <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> resources, this is the "TooManyReads" <a data-link-type="dfn" href="#failureReason">failure reason</a>.</p>
         
</ul>
       

       <p>For asynchronous read methods the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute may return a <code class="idl"><a data-link-type="idl" href="#exceptdef-securityerror">SecurityError</a></code> exception
				and synchronous read methods may <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptdef-securityerror">SecurityError</a></code> exception.</p>
       


       <p>This is a security error to be used in situations not covered by any other <a data-link-type="dfn" href="#failureReason">failure reason</a>.</p>
       
		
     <tr>
			
      <td><dfn class="idl-code" data-dfn-type="exception" data-export="" id="exceptdef-notreadableerror">NotReadableError<a class="self-link" href="#exceptdef-notreadableerror"></a></dfn>
			
      <td>If:

       <ul>
        <li data-md="">
         <p>the <a data-link-type="dfn" href="#snapshot-state">snapshot state</a> of a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> does not match the state of the underlying storage,
this is the "SnapshotState" <a data-link-type="dfn" href="#failureReason">failure reason</a>.</p>
         

        <li data-md="">
         <p>the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> or <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> cannot be read,
typically due due to permission problems that occur after a <a data-link-type="dfn" href="#snapshot-state">snapshot state</a> has been established
(e.g. concurrent lock on the underlying storage with another application)
then this is the "FileLock" <a data-link-type="dfn" href="#failureReason">failure reason</a>.</p>
         
</ul>
       

       <p>For asynchronous read methods the <code class="idl"><a data-link-type="idl" href="#dom-filereader-error">error</a></code> attribute must return a <code class="idl"><a data-link-type="idl" href="#exceptdef-notreadableerror">NotReadableError</a></code> exception
				and synchronous read methods must <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptdef-notreadableerror">NotReadableError</a></code> exception.</p>
       
</table>


   <h2 class="heading settled" data-level="9" id="url"><span class="secno">9. </span><span class="content">
A URL for Blob and File reference</span><a class="self-link" href="#url"></a></h2>


   <p>This section defines a scheme for a URL used to refer to <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> objects (and <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> objects).</p>


   <h3 class="heading settled" data-level="9.1" id="use-cases-scheme"><span class="secno">9.1. </span><span class="content">
Requirements for a New Scheme</span><a class="self-link" href="#use-cases-scheme"></a></h3>


   <p>This specification defines a scheme with URLs of the sort: <code>blob:550e8400-e29b-41d4-a716-446655440000#aboutABBA</code>.
This section provides some requirements and is an informative discussion.</p>


   <ul>
    <li data-md="">
     <p>This scheme should be able to be used with web APIs such as <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest">XMLHttpRequest</a></code>,
and with elements that are designed to be used with HTTP URLs,
such as the <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-img-element">img</a></code> element.
In general, this scheme should be designed to be used wherever URLs can be used on the web.</p>
     


    <li data-md="">
     <p>This scheme should have defined response codes,
so that web applications can respond to scenarios where the resource is not found, or raises an error, etc.</p>
     


    <li data-md="">
     <p>This scheme should have an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a> policy and a <a data-link-type="dfn">lifetime</a> stipulation,
to allow safe access to binary data from web applications.</p>
     


     <p>URLs in this scheme should be used as a references to "in-memory" <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>s,
and also be re-used elsewhere on the platform to refer to binary resources
(e.g. for video-conferencing <a data-link-type="biblio" href="#biblio-webrtc">[WebRTC]</a>).
URLs in this scheme are designed for impermanence,
since they will be typically used to access "in memory" resources.</p>
     


    <li data-md="">
     <p>Developers should have the ability to revoke URLs in this scheme,
so that they no longer refer to <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> objects.
This includes scenarios where file references are no longer needed by a program,
but also other uses of <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> objects.
Consider a scenario where a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object can be exported from a drawing program
which uses the canvas element and API <a data-link-type="biblio" href="#biblio-html">[HTML]</a>.
A snapshot of the drawing can be created by exporting a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>.
This scheme can be used with the <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-img-element">img</a></code> <a data-link-type="biblio" href="#biblio-html">[HTML]</a> element to display the snapshot;
if the user deletes the snapshot,
any reference to the snapshot in memory via a URL should be invalid,
and hence the need to be able to revoke such a URL.</p>
     
</ul>

   <h3 class="heading settled" data-level="9.2" id="alternative-schemas"><span class="secno">9.2. </span><span class="content">
Discussion of Existing Schemes</span><a class="self-link" href="#alternative-schemas"></a></h3>


   <p>This section is an informative discussion of existing schemes
that may have been repurposed or reused for the use cases for URLs above,
and justification for why a new scheme is considered preferable.
These schemes include HTTP <a data-link-type="biblio" href="#biblio-rfc7230">[RFC7230]</a>,
file <a data-link-type="biblio" href="#biblio-rfc1630">[RFC1630]</a><a data-link-type="biblio" href="#biblio-rfc1738">[RFC1738]</a>,
and a scheme such as <code>urn:uuid</code> <a data-link-type="biblio" href="#biblio-rfc4122">[RFC4122]</a>.
One broad consideration in determining what scheme to use is providing something with intuitive appeal to web developers.</p>


   <ul>
    <li data-md="">
     <p>HTTP could be repurposed for the use cases mentioned above;
it already comes with well-defined request-response semantics that are already used by web applications.
But <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> resources are typically "in-memory" resident
(e.g. after a file has been read into memory),
and are thus unlike "traditional" HTTP resources that are dereferenced via DNS.
While some user agents automatically "proxy" the underlying file system on the local machine via an HTTP server
(e.g. with URLs of the sort <code>http://localhost</code>),
HTTP is not traditionally used with local resources.
Moreover, an important use case for these URLs are that they can be revoked with an API call.
HTTP URLs have traditionally been used for resources that may be more permanent
(and that are certainly not chiefly memory-resident, such as files that a web application can read).
Reusing the HTTP scheme might be confusing for web developers owing to well-established practice.</p>
     

    <li data-md="">
     <p>The reuse of file URLs would involve changes to file URL use today,
such as adding response codes.
While they are used inconsistently in web applications,
the structure of the URLs would change,
and request-response behavior would have to be superimposed on what already works in a more-or-less ad-hoc manner.
Modifying this for the use cases cited above is imprudent, given legacy usage.
Additionally, the use cases for a Blob URL scheme call for uses beyond the file system.</p>
     

    <li data-md="">
     <p>A scheme of the sort <code>urn:uuid</code> <a data-link-type="biblio" href="#biblio-rfc4122">[RFC4122]</a> could be used,
though use of this scheme is unprecedented in HTML and JavaScript web applications.
The urn:uuid scheme is very generic.
URLs in the scheme urn:uuid have the disadvantage of unfamiliarity and inconsistency across the web platform.
A new scheme has the advantage of being explicit about what is being referenced.
In theory, URLs make no guarantee about what sort of resource is obtained when they are dereferenced;
that is left to content labeling and media type.
But in practice, the name of the scheme creates an expectation about both the resource
and the protocol of the request-response transaction.
Choosing a name that clarifies the primary use case--
namely, access to memory-resident <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> resources--
is a worthwhile compromise,
and favors clarity, familiarity, and consistency across the web platform.</p>
     
</ul>

   <h3 class="heading settled" data-level="9.3" id="DefinitionOfScheme"><span class="secno">9.3. </span><span class="content">
The Blob URL</span><a class="self-link" href="#DefinitionOfScheme"></a></h3>


   <p>A <dfn data-dfn-type="dfn" data-export="" id="blob-url">Blob URL<a class="self-link" href="#blob-url"></a></dfn> must consist of the <code>blob:</code> <a data-link-type="dfn">scheme</a>
followed by <a data-link-type="dfn">scheme data</a> which must consist of
a string tuple comprising the <a data-link-type="dfn">origin of the Blob URL</a>,
the "/" (U+0024 SOLIDUS) character,
and a UUID <a data-link-type="biblio" href="#biblio-rfc4122">[RFC4122]</a>
(see <a href="#uuid-abnf">
An ABNF for UUID</a>).
A Blob URL may contain an optional <a data-link-type="dfn">fragment</a>.
The Blob URL is serialized as a string according to the <a data-link-type="dfn" href="#unicodeBlobURL">Unicode Serialization of a Blob URL</a> algorithm.</p>


   <p>A <a data-link-type="dfn">fragment</a>, if used,
has a distinct interpretation depending on the media type of the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> or <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> resource in question
(see <a href="#fragmentDiscussion">§9.3.3 
Discussion of Fragment Identifier</a>).</p>


   <pre>blob = scheme ":" origin "/" UUID [fragIdentifier]

scheme = "blob"

; scheme is always "blob"

; origin is a string representation of the <a data-link-type="dfn" href="#origin-of-a-blob-url">Blob URL’s origin</a>.
; UUID is as defined in [[RFC4122]] and [[#uuid-abnf]]
; fragIdentifier is optional and as defined in [[RFC3986]] and [[#uuid-fragment]]
</pre>


   <p>An example of a Blob URL might be <code>blob:https://example.org/9115d58c-bcda-ff47-86e5-083e9a215304</code>.</p>



   <h4 class="heading settled" data-level="9.3.1" id="originOfBlobURL"><span class="secno">9.3.1. </span><span class="content">
Origin of Blob URLs</span><a class="self-link" href="#originOfBlobURL"></a></h4>


   <p><a data-link-type="dfn" href="#blob-url">Blob URLs</a> are created using <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code>
and/or <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code>,
and are revoked using <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-revokeobjecturlurl">revokeObjectURL()</a></code></code>.
The <dfn data-dfn-type="dfn" data-lt="origin of a Blob URL|Blob URL’s origin" data-noexport="" id="origin-of-a-blob-url">origin of a Blob URL<a class="self-link" href="#origin-of-a-blob-url"></a></dfn> must be the same as the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#effective-script-origin">effective script origin</a>
specified by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#incumbent-settings-object">incumbent settings object</a>
at the time the method that created it--
either <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code> or <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code>--
was called.</p>


   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a> of a Blob URL,
when serialized as a string,
must conform to the Web Origin Specification’s Unicode Serialization of an Origin algorithm <a data-link-type="biblio" href="#biblio-rfc6454">[RFC6454]</a>.
<a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-cors-protocol">Cross-origin requests</a> on Blob URLs must return a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a>.</p>


   <p class="note" role="note">Note: In practice this means that HTTP and HTTPS <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origins</a>
are covered by this specification as valid origins for use with Blob URLs.
This specification does not address the case of non-HTTP and non-HTTPS <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origins</a>.
For instance <code>blob:file:///Users/arunranga/702efefb-c234-4988-a73b-6104f1b615ee</code>
(which uses the "file:" <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin">origin</a>,
which is part of the Blob URL’s <a data-link-type="dfn">scheme data</a>)
may have behavior that is undefined,
even though user agents may treat such Blob URLs as valid.</p>


   <h4 class="heading settled" data-level="9.3.2" id="unicodeSerializationOfBlobURL"><span class="secno">9.3.2. </span><span class="content">
Unicode Serialization of a Blob URL</span><a class="self-link" href="#unicodeSerializationOfBlobURL"></a></h4>


   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="unicodeBlobURL">Unicode Serialization of a Blob URL<a class="self-link" href="#unicodeBlobURL"></a></dfn>
is the value returned by the following algorithm,
which is invoked by <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code>
and/or <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code>:</p>


   <ol>
    <li data-md="">
     <p>Let <var>result</var> be the empty string.
Append the string "blob"
(that is, the Unicode code point sequence U+0062, U+006C, U+006F, U+0062)
to <var>result</var>.</p>
     

    <li data-md="">
     <p>Append the ":" (U+003A COLON) character to <var>result</var>.</p>
     

    <li data-md="">
     <p>Let <var>O</var> be the <a data-link-type="dfn" href="#origin-of-a-blob-url">Blob URL’s origin</a>.
If the <a data-link-type="dfn">Unicode Serialization of an Origin algorithm</a> on <var>O</var> returns null,
user agents may substitute an implementation defined value for the return value of the <a data-link-type="dfn">Unicode Serialization of an Origin algorithm</a>.
Append the result of the <a data-link-type="dfn">Unicode Serialization of an Origin algorithm</a> for <var>O</var> <a data-link-type="biblio" href="#biblio-rfc6454">[RFC6454]</a> to <var>result</var>.</p>
     

    <li data-md="">
     <p>Append the "/" character (U+0024 SOLIDUS) to <var>result</var>.</p>
     

    <li data-md="">
     <p>Generate a UUID <a data-link-type="biblio" href="#biblio-rfc4122">[RFC4122]</a> as a Unicode string and append it to <var>result</var>.</p>
     

    <li data-md="">
     <p>Return <var>result</var>.</p>
     
</ol>

   <h4 class="heading settled" data-level="9.3.3" id="fragmentDiscussion"><span class="secno">9.3.3. </span><span class="content">
Discussion of Fragment Identifier</span><a class="self-link" href="#fragmentDiscussion"></a></h4>


   <p>The <a data-link-type="dfn">fragment</a>’s resolution and processing directives depend on the media type <a data-link-type="biblio" href="#biblio-rfc2046">[RFC2046]</a>
of a potentially retrieved representation,
even though such a retrieval is only performed if the <a data-link-type="dfn" href="#blob-url">Blob URL</a> is <a data-link-type="dfn">dereferenced</a>.
For example, in an HTML file <a data-link-type="biblio" href="#biblio-html">[HTML]</a> the fragment could be used to refer to an anchor within the file.
If the user agent does not recognize the media type of the resource,
OR if a fragment is not meaningful within the resource,
it must ignore the fragment.
The fragment must not be used to identify a resource;
only the <code>blob:</code> <a data-link-type="dfn">scheme</a> and the <a data-link-type="dfn">scheme data</a> constitute a valid resource identifier.</p>


   <p>A valid Blob URL reference could look like:
<code>blob:http://example.org:8080/550e8400-e29b-41d4-a716-446655440000#aboutABBA</code>
where "#aboutABBA" might be an HTML fragment identifier referring to an element with an id attribute of "aboutABBA".</p>


   <p class="note" role="note">Note: The <a data-link-type="dfn">fragment</a> is not used to identify the resource.
Neither the <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code> method
nor the <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code> method generate a fragment.</p>



   <h3 class="heading settled" data-level="9.4" id="requestResponseModel"><span class="secno">9.4. </span><span class="content">
Dereferencing Model for Blob URLs</span><a class="self-link" href="#requestResponseModel"></a></h3>


   <p><em>This section is informative.</em></p>


   <p class="note" role="note">Note: The <a data-link-type="biblio" href="#biblio-url">[URL]</a> and <a data-link-type="biblio" href="#biblio-fetch">[Fetch]</a> specifications should be considered normative for parsing and fetching <a data-link-type="dfn" href="#blob-url">Blob URLs</a>.</p>


   <p><a data-link-type="dfn" href="#blob-url">Blob URLs</a> are <dfn data-dfn-type="dfn" data-lt="dereference" data-noexport="" id="dereference">dereferenced<a class="self-link" href="#dereference"></a></dfn>
when the user agent retrieves the resource identified by the Blob URL
and returns it to the requesting entity.
This section provides guidance on <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">requests</a> and <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response">responses</a>.</p>


   <p>Only <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">requests</a> with GET <a data-link-type="biblio" href="#biblio-rfc7231">[RFC7231]</a> are supported.
Specifically, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response">responses</a> are only a subset of the following from HTTP <a data-link-type="biblio" href="#biblio-rfc7231">[RFC7231]</a>:</p>


   <h4 class="heading settled" data-level="9.4.1" id="TwoHundredOK"><span class="secno">9.4.1. </span><span class="content">
200 OK</span><a class="self-link" href="#TwoHundredOK"></a></h4>


   <p>This <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response">response</a> is used if the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">request</a> has succeeded,
and no <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network errors</a> are generated.</p>


   <h4 class="heading settled" data-level="9.4.2" id="processing-media-types"><span class="secno">9.4.2. </span><span class="content">
Response Headers</span><a class="self-link" href="#processing-media-types"></a></h4>


   <p>Along with <a href="#TwoHundredOK">200 OK</a> responses,
user agents use a Content-Type header <a data-link-type="biblio" href="#biblio-rfc7231">[RFC7231]</a>
that is equal to the value of the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute,
if it is not the empty string.</p>


   <p>Along with <a href="#TwoHundredOK">200 OK</a> responses,
user agents use a Content-Length header <a data-link-type="biblio" href="#biblio-rfc7230">[RFC7230]</a>
that is equal to the value of the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-blob-size">size</a></code> attribute.</p>


   <p>If a Content-Type header <a data-link-type="biblio" href="#biblio-rfc7231">[RFC7231]</a> is provided,
then user agents obtain and process that media type
in a manner consistent with the Mime Sniffing specification <a data-link-type="biblio" href="#biblio-sniff">[SNIFF]</a>.</p>


   <p>If a resource identified with a <a data-link-type="dfn" href="#blob-url">Blob URL</a> is a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> object,
user agents use that file’s <code class="idl"><a data-link-type="idl" href="#dom-file-name">name</a></code> attribute,
as if the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response">response</a> had a <code>Content-Disposition</code> header
with the filename parameter set to the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-file-name">name</a></code> attribute <a data-link-type="biblio" href="#biblio-rfc6266">[RFC6266]</a>.</p>


   <p class="note" role="note">Note: A corollary to this is a non-normative implementation guideline:
that the "File Save As" user interface in user agents takes into account the <code class="idl"><a data-link-type="idl" href="#file0">File</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-file-name">name</a></code> attribute
if presenting a default name to save the file as.</p>


   <h4 class="heading settled" data-level="9.4.3" id="NetworkError"><span class="secno">9.4.3. </span><span class="content">
Network Errors</span><a class="self-link" href="#NetworkError"></a></h4>


   <p>Responses that do not succeed with a <a href="#TwoHundredOK">200 OK</a>
act as if a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a> has occurred.
Network errors are used when:</p>


   <ul>
    <li data-md="">
     <p>Any <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">request</a> method other than GET is used.</p>
     

    <li data-md="">
     <p>The <a data-link-type="dfn" href="#blob-url">Blob URL</a> does not have an entry in the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>.</p>
     

    <li data-md="">
     <p>The Blob has been <a data-link-type="dfn" href="#closed">closed</a>;
this also results in the <a data-link-type="dfn" href="#blob-url">Blob URL</a> not having an entry in the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>.</p>
     

    <li data-md="">
     <p>A <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-cors-protocol">cross-origin request</a> is made on a <a data-link-type="dfn" href="#blob-url">Blob URL</a>.</p>
     

    <li data-md="">
     <p>A security error has occurred.</p>
     
</ul>

   <h4 class="heading settled" data-level="9.4.4" id="ProtocolExamples"><span class="secno">9.4.4. </span><span class="content">
Sample Request and Response Headers</span><a class="self-link" href="#ProtocolExamples"></a></h4>


   <p><em>This section is informative.</em></p>


   <p>This section provides sample exchanges between web applications and user agents using <a data-link-type="dfn" href="#blob-url">Blob URLs</a>.
A <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">request</a> can be triggered using HTML markup of the sort
<code class="lang-markup">&lt;img src="blob:http://example.org:8080/550e8400-e29b-41d4-a716-446655440000"></code>.
These examples merely illustrate the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">request</a> and <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response">response</a>;
web developers are not likely to interact with all the headers,
but the <code class="idl"><a data-link-type="idl">getAllResponseHeaders()</a></code> method of <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest">XMLHttpRequest</a></code>, if used,
will show relevant <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response">response</a> headers.</p>


   <div class="example" id="example-c781fc6f"><a class="self-link" href="#example-c781fc6f"></a>
	<a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">Requests</a> could look like this:

	
    <pre>GET http://example.org:8080/550e8400-e29b-41d4-a716-446655440000
</pre>


    <p>If the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> has an affiliated media type <a data-link-type="biblio" href="#biblio-rfc2046">[RFC2046]</a> represented by its <code class="idl"><a data-link-type="idl" href="#dom-blob-type">type</a></code> attribute,
	then the response message should include the Content-Type header from RFC7231 <a data-link-type="biblio" href="#biblio-rfc7231">[RFC7231]</a>.
	See <a href="#processing-media-types">§9.4.2 
Response Headers</a>.</p>


    <p>Example response:</p>

	
    <pre>200 OK
Content-Type: image/jpeg
Content-Length: 21897

....
</pre>


    <p>If there is a <a data-link-type="dfn" href="#file-read-error">file read error</a> associated with the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>,
	then a user agent acts as if a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a> has occurred.</p>
</div>


   <h3 class="heading settled" data-level="9.5" id="creating-revoking"><span class="secno">9.5. </span><span class="content">
Creating and Revoking a Blob URL</span><a class="self-link" href="#creating-revoking"></a></h3>


   <p><a data-link-type="dfn" href="#blob-url">Blob URLs</a> are created and revoked using methods exposed on the <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#url">URL</a></code> object,
supported by global objects <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#window">Window</a></code> <a data-link-type="biblio" href="#biblio-html">[HTML]</a> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#workerglobalscope">WorkerGlobalScope</a></code> [[Web Workers]].
Revocation of a <a data-link-type="dfn" href="#blob-url">Blob URL</a> decouples the <a data-link-type="dfn" href="#blob-url">Blob URL</a> from the resource it refers to,
and if it is dereferenced after it is revoked,
user agents must act as if a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a> has occurred.
This section describes a supplemental interface to the URL specification [[URL API]]
and presents methods for <a data-link-type="dfn" href="#blob-url">Blob URL</a> creation and revocation.</p>


   <pre class="idl">partial interface <a class="idl-code" data-link-type="interface" href="https://url.spec.whatwg.org/#url">URL</a> {
  static DOMString <a class="idl-code" data-global-name="URL<interface>/createObjectURL(blob)<method>" data-link-type="method" href="#dom-url-createobjecturlblob">createObjectURL</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="URL<interface>/createObjectURL(blob)<method>/blob<argument>" data-link-type="argument" href="#dom-filereader-readasarraybufferblob-blob">blob</a>);
  static DOMString <a class="idl-code" data-global-name="URL<interface>/createFor(blob)<method>" data-link-type="method" href="#dom-url-createforblob">createFor</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="URL<interface>/createFor(blob)<method>/blob<argument>" data-link-type="argument" href="#dom-filereader-readasarraybufferblob-blob">blob</a>);
  static void <a class="idl-code" data-global-name="URL<interface>/revokeObjectURL(url)<method>" data-link-type="method" href="#dom-url-revokeobjecturlurl">revokeObjectURL</a>(DOMString <a class="idl-code" data-global-name="URL<interface>/revokeObjectURL(url)<method>/url<argument>" data-link-type="argument" href="#dom-url-revokeobjecturlurl-url">url</a>);
};
</pre>


   <p>ECMAScript user agents of this specification must ensure
that they do not expose a <code>prototype</code> property on the URL interface object
unless the user agent also implements the URL [[URL API]] specification.
In other words, <code>URL.prototype</code> must evaluate to true if the user agent implements the URL [[URL API]] specification,
and must NOT evaluate to true otherwise.</p>


   <h4 class="heading settled" data-level="9.5.1" id="createRevokeMethodsParams"><span class="secno">9.5.1. </span><span class="content">
Methods and Parameters</span><a class="self-link" href="#createRevokeMethodsParams"></a></h4>


   <dl>
	
    <dt>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="method" data-export="" id="dom-url-createobjecturlblob">createObjectURL(blob)<a class="self-link" href="#dom-url-createobjecturlblob"></a></dfn> static method
	
    <dd>Returns a unique <a data-link-type="dfn" href="#blob-url">Blob URL</a>.
		This method must act as follows:


     <ol>
      <li data-md="">
       <p>If called with a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> argument that has a <a data-link-type="dfn" href="#readabilityState">readability state</a> of <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a>,
user agents must return the output of the <a data-link-type="dfn">Unicode Serialization of an Blob URL</a>.</p>
       


       <p class="note" role="note">Note: No entry is added to the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>;
consequently, when this <a data-link-type="dfn" href="#blob-url">Blob URL</a> is <a data-link-type="dfn">dereferenced</a>,
a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a> occurs.</p>
       


      <li data-md="">
       <p>Otherwise, user agents must run the following sub-steps:</p>
       

       <ol>
        <li data-md="">
         <p>Let <var>url</var> be the result of the <a data-link-type="dfn" href="#unicodeBlobURL">Unicode Serialization of a Blob URL</a> algorithm.</p>
         

        <li data-md="">
         <p><a data-link-type="dfn" href="#add-an-entry">Add an entry to the Blob URL Store</a> for <var>url</var> and <code>blob</code>.</p>
         

        <li data-md="">
         <p>Return <var>url</var>.</p>
         
</ol></ol>
     
	
    <dt>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="method" data-export="" id="dom-url-createforblob">createFor(blob)<a class="self-link" href="#dom-url-createforblob"></a></dfn> static method
	
    <dd>Returns a unique <a data-link-type="dfn" href="#blob-url">Blob URL</a>.
		<a data-link-type="dfn" href="#blob-url">Blob URLs</a> created with this method are said to be <dfn data-dfn-type="dfn" data-noexport="" id="autoRevoking">auto-revoking<a class="self-link" href="#autoRevoking"></a></dfn>
		since user-agents are responsible for the revocation of <a data-link-type="dfn" href="#blob-url">Blob URL</a>s created with this method,
		subject to the <a href="#lifeTime">lifetime stipulation</a> for <a data-link-type="dfn" href="#blob-url">Blob URL</a>s.
		This method must act as follows:


     <ol>
      <li data-md="">
       <p>If called with a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> argument that has a <a data-link-type="dfn" href="#readabilityState">readability state</a> of <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a>,
user agents must return the output of the <a data-link-type="dfn" href="#unicodeBlobURL">Unicode Serialization of a Blob URL</a>.</p>
       


       <p class="note" role="note">Note: No entry is added to the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>;
consequently, when this <a data-link-type="dfn" href="#blob-url">Blob URL</a> is <a data-link-type="dfn">dereferenced</a>,
a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a> occurs.</p>
       


      <li data-md="">
       <p>Otherwise, user agents must run the following steps:</p>
       

       <ol>
        <li data-md="">
         <p>Let <var>url</var> be the result of the <a data-link-type="dfn" href="#unicodeBlobURL">Unicode Serialization of a Blob URL</a>.</p>
         

        <li data-md="">
         <p><a data-link-type="dfn" href="#add-an-entry">Add an entry to the Blob URL Store</a> for <var>url</var> and <code>blob</code>.</p>
         

        <li data-md="">
         <p><a data-link-type="dfn">Add an entry to the Revocation List</a> for <var>url</var>.</p>
         

        <li data-md="">
         <p>Return <var>url</var>.</p>
         
</ol></ol>
     
		
     <div class="example" id="example-8b5f918b"><a class="self-link" href="#example-8b5f918b"></a>
			In the example below,
			after obtaining a reference to a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object
			(in this case, a user-selected <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> from the underlying file system),
			the static method <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code> is called on that <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> object.

			
      <pre class="lang-javascript">var file = document.getElementById('file').files[0];
if(file){
  blobURLref = window.URL.createObjectURL(file);
  myimg.src = blobURLref;

  ....

}
</pre>
      
		
     </div>
     

	
    <dt>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="method" data-export="" id="dom-url-revokeobjecturlurl">revokeObjectURL(url)<a class="self-link" href="#dom-url-revokeobjecturlurl"></a></dfn> static method
	
    <dd>Revokes the <a data-link-type="dfn" href="#blob-url">Blob URL</a> provided in the string <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-url-revokeobjecturlurl-url">url</a></code>
		by removing the corresponding entry from the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>.
		This method must act as follows:


     <ol>
      <li data-md="">
       <p>If the <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-url-revokeobjecturlurl-url">url</a></code> refers to a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> that has a <a data-link-type="dfn" href="#readabilityState">readability state</a> of <a data-link-type="dfn" href="#closed"><code>CLOSED</code></a>
OR if the value provided for the <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-url-revokeobjecturlurl-url">url</a></code> argument is not a <a data-link-type="dfn" href="#blob-url">Blob URL</a>,
OR if the value provided for the <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-url-revokeobjecturlurl-url">url</a></code> argument does not have an entry in the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>,
this method call does nothing.
User agents may display a message on the error console.</p>
       

      <li data-md="">
       <p>Otherwise, user agents must <a data-link-type="dfn">remove the entry</a> from the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a> for <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-url-revokeobjecturlurl-url">url</a></code>.</p>
       


       <p class="note" role="note">Note: Subsequent attemps to dereference <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-url-revokeobjecturlurl-url">url</a></code> result in a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a>,
since the entry has been removed from the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>.</p>
       
</ol>
     

     <p>The <dfn class="idl-code" data-dfn-for="URL/revokeObjectURL(url)" data-dfn-type="argument" data-export="" id="dom-url-revokeobjecturlurl-url">url<a class="self-link" href="#dom-url-revokeobjecturlurl-url"></a></dfn> argument to the <code class="idl"><a data-link-type="idl" href="#dom-url-revokeobjecturlurl">revokeObjectURL()</a></code> method
		is a <a data-link-type="dfn" href="#blob-url">Blob URL</a> string.</p>
     

		
     <div class="example" id="example-82b0c0d5"><a class="self-link" href="#example-82b0c0d5"></a>
			In the example below,
			<code>window1</code> and <code>window2</code> are separate,
			but in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a>;
			<code>window2</code> could be an <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-iframe-element">iframe</a></code> inside <code>window1</code>.

			
      <pre class="lang-javascript">myurl = window1.URL.createObjectURL(myblob);
window2.URL.revokeObjectURL(myurl);
</pre>
      


      <p>Since <code>window1</code> and <code>window2</code> are in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a>
			and share the same <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>,
			the <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-revokeobjecturlurl">revokeObjectURL()</a></code></code> call
			ensures that subsequent dereferencing of <code>myurl</code>
			results in a the user agent acting as if a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a> has occurred.</p>
      
		
     </div>
     
</dl>


   <h4 class="heading settled" data-level="9.5.2" id="examplesOfCreationRevocation"><span class="secno">9.5.2. </span><span class="content">
Examples of Blob URL Creation and Revocation</span><a class="self-link" href="#examplesOfCreationRevocation"></a></h4>


   <p><a data-link-type="dfn" href="#blob-url">Blob URL</a>s are strings that are used to <a data-link-type="dfn" href="#dereference">dereference</a> <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> objects,
and can persist for as long as the <code>document</code> from which they were minted
using <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code> or <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code>--
see <a href="#lifeTime">§9.6 
Lifetime of Blob URLs</a>.</p>


   <p>This section gives sample usage of creation and revocation of <a data-link-type="dfn" href="#blob-url">Blob URL</a>s with explanations.</p>


   <div class="example" id="example-8564f05e"><a class="self-link" href="#example-8564f05e"></a>
	In the example below, two <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-img-element">img</a></code> elements <a data-link-type="biblio" href="#biblio-html">[HTML]</a> refer to the same <a data-link-type="dfn" href="#blob-url">Blob URL</a>:

	
    <pre class="lang-javascript">url = URL.createObjectURL(blob);
img1.src = url;
img2.src = url;
</pre>
</div>


   <div class="example" id="example-1438d635"><a class="self-link" href="#example-1438d635"></a>
	In the example below,  <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-revokeobjecturlurl">revokeObjectURL()</a></code></code> is explicitly called.

	
    <pre class="lang-javascript">var blobURLref = URL.createObjectURL(file);
img1 = new Image();
img2 = new Image();

// Both assignments below work as expected
img1.src = blobURLref;
img2.src = blobURLref;

// ... Following body load
// Check if both images have loaded
if(img1.complete &amp;&amp; img2.complete) {
  // Ensure that subsequent refs throw an exception
  URL.revokeObjectURL(blobURLref);
} else {
  msg("Images cannot be previewed!");
  // revoke the string-based reference
  URL.revokeObjectURL(blobURLref);
}
</pre>
</div>


   <p>The example above allows multiple references to a single <a data-link-type="dfn" href="#blob-url">Blob URL</a>,
and the web developer then revokes the <a data-link-type="dfn" href="#blob-url">Blob URL</a> string after both image objects have been loaded.
While not restricting number of uses of the <a data-link-type="dfn" href="#blob-url">Blob URL</a> offers more flexibility,
it increases the likelihood of leaks;
developers should pair it with a corresponding call to <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-revokeobjecturlurl">revokeObjectURL()</a></code></code>.</p>


   <div class="example" id="example-35ce32bc"><a class="self-link" href="#example-35ce32bc"></a>
	This example uses <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code>,
	which allows uses such as the one above,
	and obviates the need for a corresponding call by the web developer to <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-revokeobjecturlurl">revokeObjectURL()</a></code></code>.

	
    <pre class="lang-javascript">var blobURLref2 = URL.createFor(file);
img1 = new Image();
img1.src = blobURLref2;
....
</pre>
</div>



   <div class="example" id="example-388a6204"><a class="self-link" href="#example-388a6204"></a>
	This example uses <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code> to mint a <a data-link-type="dfn" href="#blob-url">Blob URL</a>,
	and appends a <a data-link-type="dfn">fragment</a> that has an understood meaning within the resource
	(in this case, it references an anchor within the HTML document).

	
    <pre class="lang-javascript">// file is an HTML file
// One of the anchor identifiers in file is "#applicationInfo"

var blobURLAnchorRef = URL.createFor(file) + "#applicationInfo";

// openPopup is an utility function to open a small informational window

var windowRef = openPopup(blobURLAnchorRef, "Application Info");

....
</pre>
</div>


   <h3 class="heading settled" data-level="9.6" id="lifeTime"><span class="secno">9.6. </span><span class="content">
Lifetime of Blob URLs</span><a class="self-link" href="#lifeTime"></a></h3>


   <p>A global object which exposes <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code>
or <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code>
must maintain a <dfn data-dfn-type="dfn" data-noexport="" id="BlobURLStore">Blob URL Store<a class="self-link" href="#BlobURLStore"></a></dfn>
which is a list of <a data-link-type="dfn" href="#blob-url">Blob URLs</a> created by the <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createobjecturlblob">createObjectURL()</a></code></code> method
or the <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code> method,
and the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> resource that each refers to.</p>


   <p>A global object which exposes <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code>
must maintain a <dfn data-dfn-type="dfn" data-noexport="" id="revokeList">Revocation List<a class="self-link" href="#revokeList"></a></dfn>
which is a list of <a data-link-type="dfn" href="#blob-url">Blob URLs</a> created with the <code>URL.<code class="idl"><a data-link-type="idl" href="#dom-url-createforblob">createFor()</a></code></code> method.</p>


   <p>When this specification says to <dfn data-dfn-type="dfn" data-noexport="" id="add-an-entry">add an entry to the Blob URL Store<a class="self-link" href="#add-an-entry"></a></dfn>
for a <a data-link-type="dfn" href="#blob-url">Blob URL</a> and a <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> input,
the user-agent must add the <a data-link-type="dfn" href="#blob-url">Blob URL</a> and a reference to the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> it refers to to the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>.</p>


   <p>When this specification says to <dfn data-dfn-type="dfn" data-noexport="" id="add-an-entry-revoke">add an entry to the The Revocation List<a class="self-link" href="#add-an-entry-revoke"></a></dfn>
for a <a data-link-type="dfn" href="#blob-url">Blob URL</a>,
user agents must add the <a data-link-type="dfn" href="#blob-url">Blob URL</a> to the <a data-link-type="dfn" href="#revokeList">Revocation List</a>.
This is only for <a data-link-type="dfn" href="#autoRevoking">auto-revoking</a> <a data-link-type="dfn" href="#blob-url">Blob URL</a>s.</p>


   <p>When this specification says to <dfn data-dfn-type="dfn" data-noexport="" id="removeTheEntry">remove an entry from the Blob URL Store<a class="self-link" href="#removeTheEntry"></a></dfn>
for a given <a data-link-type="dfn" href="#blob-url">Blob URL</a> or for a given <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code>,
user agents must remove the <a data-link-type="dfn" href="#blob-url">Blob URL</a> and the <code class="idl"><a data-link-type="idl" href="#blob0">Blob</a></code> it refers to from the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>.
Subsequent attempts to <a data-link-type="dfn" href="#dereference">dereference</a> this URL must result in a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a>.</p>


   <p>The <a data-link-type="dfn" href="#revokeList">Revocation List</a> and the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a> must be processed together as follows:</p>


   <ol>
    <li data-md="">
     <p>Add <a data-link-type="dfn" href="#removeTheEntry">removing the entries</a>
for all the <a data-link-type="dfn" href="#blob-url">Blob URLs</a> in the <a data-link-type="dfn" href="#revokeList">Revocation List</a>
to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#global-script-clean_up-jobs-list">global script clean-up jobs list</a>.</p>
     

    <li data-md="">
     <p>When all the <a data-link-type="dfn" href="#blob-url">Blob URL</a>s in the <a data-link-type="dfn" href="#revokeList">Revocation List</a>
have had their corresponding entries in the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a> removed,
remove all the <a data-link-type="dfn" href="#blob-url">Blob URL</a>s in the <a data-link-type="dfn" href="#revokeList">Revocation List</a>.</p>
     

    <li data-md="">
     <p>This specification adds an additional <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#unloading-document-cleanup-steps">unloading document cleanup step</a>:
user agents must remove all <a data-link-type="dfn" href="#blob-url">Blob URLs</a> from the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a> within that <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#dom">document</a>.</p>
     
</ol>

   <p class="note" role="note">Note: User agents are free to garbage collect resources removed from the <a data-link-type="dfn" href="#BlobURLStore">Blob URL Store</a>.</p>


   <h2 class="heading settled" data-level="10" id="security-discussion"><span class="secno">10. </span><span class="content">
Security Considerations</span><a class="self-link" href="#security-discussion"></a></h2>


   <p><em>This section is informative.</em></p>


   <p>This specification allows web content to read files from the underlying file system,
as well as provides a means for files to be accessed by unique identifiers,
and as such is subject to some security considerations.
This specification also assumes that the primary user interaction is with the <code>&lt;input type="file"/></code> element of HTML forms <a data-link-type="biblio" href="#biblio-html">[HTML]</a>,
and that all files that are being read by <code class="idl"><a data-link-type="idl" href="#filereader">FileReader</a></code> objects have first been selected by the user.
Important security considerations include preventing malicious file selection attacks (selection looping),
preventing access to system-sensitive files,
and guarding against modifications of files on disk after a selection has taken place.</p>


   <ul>
    <li data-md="">
     <p><dfn data-dfn-type="dfn" data-noexport="" id="selection-looping">Preventing selection looping<a class="self-link" href="#selection-looping"></a></dfn>.
During file selection, a user may be bombarded with the file picker associated with <code>&lt;input type="file"/></code>
(in a "must choose" loop that forces selection before the file picker is dismissed)
and a user agent may prevent file access to any selections by making the  <code class="idl"><a data-link-type="idl" href="#filelist0">FileList</a></code> object returned be of size 0.</p>
     

    <li data-md="">
     <p><dfn data-dfn-type="dfn" data-noexport="" id="sensitive-files">System-sensitive files<a class="self-link" href="#sensitive-files"></a></dfn>
(e.g. files in /usr/bin, password files, and other native operating system executables)
typically should not be exposed to web content,
and should not be accessed via <a data-link-type="dfn" href="#blob-url">Blob URLs</a>.
User agents may <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="#exceptdef-securityerror">SecurityError</a></code> exception for synchronous read methods,
or return a <code class="idl"><a data-link-type="idl" href="#exceptdef-securityerror">SecurityError</a></code> exception for asynchronous reads.</p>
     
</ul>

   <p class="issue" id="issue-61296551"><a class="self-link" href="#issue-61296551"></a>This section is provisional; more security data may supplement this in subsequent drafts.</p>


   <h2 class="heading settled" data-level="11" id="requirements"><span class="secno">11. </span><span class="content">
Requirements and Use Cases</span><a class="self-link" href="#requirements"></a></h2>


   <p>This section covers what the requirements are for this API,
as well as illustrates some use cases.
This version of the API does not satisfy all use cases;
subsequent versions may elect to address these.</p>


   <ul>
    <li data-md="">
     <p>Once a user has given permission,
user agents should provide the ability to read and parse data directly from a local file programmatically.</p>
     


     <div class="example" id="example-cd9a227a"><a class="self-link" href="#example-cd9a227a"></a>
	A lyrics viewer.
	User wants to read song lyrics from songs in his plist file.
	User browses for plist file.
	File is opened, read, parsed, and presented to the user as a sortable, actionable list within a web application.
	User can select songs to fetch lyrics.
	User uses the "browse for file" dialog.
</div>
     

    <li data-md="">
     <p>Data should be able to be stored locally so that it is available for later use,
which is useful for offline data access for web applications.</p>
     


     <div class="example" id="example-33be117c"><a class="self-link" href="#example-33be117c"></a>
	A Calendar App.
	User’s company has a calendar.
	User wants to sync local events to company calendar,
	marked as "busy" slots (without leaking personal info).
	User browses for file and selects it.
	The <code>text/calendar</code> file is parsed in the browser,
	allowing the user to merge the files to one calendar view.
	The user wants to then save the file back to his local calendar file (using "Save As"?).
	The user can also send the integrated calendar file back to the server calendar store asynchronously.
</div>
     

    <li data-md="">
     <p>User agents should provide the ability to save a local file programmatically given an amount of data and a file name.</p>
     


     <p class="note" role="note">Note: While this specification doesn’t provide an explicit API call to trigger downloads,
the HTML5 specification has addressed this.
The <code><a data-link-type="element-attr">download</a></code> attribute of the <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-a-element">a</a></code> element initiates a download,
saving a <code class="idl"><a data-link-type="idl" href="#file0">File</a></code> with the name specified.
The combination of this API and the <code><a data-link-type="element-attr">download</a></code> attribute on <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-a-element">a</a></code> elements
allows for the creation of files within web applications,
and the ability to save them locally.</p>
     


     <div class="example" id="example-a48b5920"><a class="self-link" href="#example-a48b5920"></a>
	A Spreadsheet App.
	User interacts with a form, and generates some input.
	The form then generates a CSV (Comma Separated Variables) output for the user to import into a spreadsheet,
	and uses "Save...".
	The generated output can also be directly integrated into a web-based spreadsheet,
	and uploaded asynchronously.
</div>
     

    <li data-md="">
     <p>User agents should provide a streamlined programmatic ability to send data from a file to a remote server
that works more efficiently than form-based uploads today.</p>
     


     <div class="example" id="example-5e57b70c"><a class="self-link" href="#example-5e57b70c"></a>
	A Video/Photo Upload App.
	User is able to select large files for upload,
	which can then be "chunk-transfered" to the server.
</div>
     

    <li data-md="">
     <p>User agents should provide an API exposed to script that exposes the features above.
The user is notified by UI anytime interaction with the file system takes place,
giving the user full ability to cancel or abort the transaction.
The user is notified of any file selections,
and can cancel these.
No invocations to these APIs occur silently without user intervention.</p>
     
</ul>

   <h2 class="no-num heading settled" id="blob-url-grammar"><span class="content">
Appendix A: Blob URL Grammar</span><a class="self-link" href="#blob-url-grammar"></a></h2>


   <p>This section uses the Augmented Backus-Naur Form (ABNF),
defined in <a data-link-type="biblio" href="#biblio-rfc5234">[RFC5234]</a>,
to describe components of blob: URLs.</p>


   <h3 class="heading settled" id="uuid-abnf"><span class="content">
An ABNF for UUID</span><a class="self-link" href="#uuid-abnf"></a></h3>


   <p>The following is an ABNF <a data-link-type="biblio" href="#biblio-rfc5234">[RFC5234]</a> for UUID.
UUID strings must only use characters in the ranges
U+002A to U+002B,
U+002D to U+002E,
U+0030 to U+0039,
U+0041 to U+005A,
U+005E to U+007E <a data-link-type="biblio" href="#biblio-unicode">[Unicode]</a>,
and should be at least 36 characters long.</p>


   <pre>UUID                   = time-low "-" time-mid "-"
                         time-high-and-version "-"
                         clock-seq-and-reserved
                         clock-seq-low "-" node
time-low               = 4hexOctet
time-mid               = 2hexOctet
time-high-and-version  = 2hexOctet
clock-seq-and-reserved = hexOctet
clock-seq-low          = hexOctet
node                   = 6hexOctet
hexOctet               = hexDigit hexDigit
hexDigit = "0" / "1" / "2" / "3" / "4" / "5" / "6" / "7" / "8" / "9" /
           "a" / "b" / "c" / "d" / "e" / "f" /
           "A" / "B" / "C" / "D" / "E" / "F"
</pre>


   <h3 class="heading settled" id="fragment-abnf"><span class="content">
An ABNF for Fragment Identifiers</span><a class="self-link" href="#fragment-abnf"></a></h3>


   <pre>fragIdentifier = "#" fragment

; Fragment Identifiers depend on the media type of the Blob
; fragment is defined in [[RFC3986]]
; fragment processing for HTML is defined in [[HTML]]

fragment    = *( pchar / "/" / "?" )

pchar       = unreserved / pct-encoded / sub-delims / ":" / "@"

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"

pct-encoded   = "%" HEXDIG HEXDIG

sub-delims    = "!" / "$" / "&amp;" / "'" / "(" / ")" /
                "*" / "+" / "," / ";" / "="
</pre>


   <h2 class="no-num heading settled" id="acks"><span class="content">
Acknowledgements</span><a class="self-link" href="#acks"></a></h2>


   <p>This specification was originally developed by the SVG Working Group. Many thanks to Mark Baker and Anne van Kesteren for their feedback.</p>


   <p>Thanks to Robin Berjon for editing the original specification.</p>


   <p>Special thanks to Olli Pettay, Nikunj Mehta, Garrett Smith, Aaron Boodman, Michael Nordman, Jian Li, Dmitry Titov, Ian Hickson, Darin Fisher, Sam Weinig, Adrian Bateman and Julian Reschke.</p>


   <p>Thanks to the W3C WebApps WG, and to participants on the public-webapps@w3.org listserv</p>

</main>

  <h2 class="no-ref no-num heading settled" id="conformance0"><span class="content">
Conformance</span><a class="self-link" href="#conformance0"></a></h2>

    
  <p>
        Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
        The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
        in the normative parts of this document
        are to be interpreted as described in RFC 2119.
        However, for readability,
        these words do not appear in all uppercase letters in this specification.

    </p>
  <p>
        All of the text of this specification is normative
        except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a>

    </p>
  <p>
        Examples in this specification are introduced with the words “for example”
        or are set apart from the normative text with <code>class="example"</code>, like this:

    </p>
  <div class="example" id="example-ae2b6bc0"><a class="self-link" href="#example-ae2b6bc0"></a>
        This is an example of an informative example.
    </div>

    
  <p>
        Informative notes begin with the word “Note”
        and are set apart from the normative text with <code>class="note"</code>, like this:

    </p>
  <p class="note" role="note">
        Note, this is an informative note.



</p>
  <h2 class="no-num heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="indexlist">
   <li>abort(), <a href="#dom-filereader-abort">7.3.4.6</a>
   <li>abort, <a href="#dom-filereader-abort0">7.5.1</a>
   <li>add an entry to the Blob URL Store, <a href="#add-an-entry">9.6</a>
   <li>add an entry to the The Revocation List, <a href="#add-an-entry-revoke">9.6</a>
   <li>annotated task read operation, <a href="#task-read-operation">7.1</a>
   <li>auto-revoking, <a href="#autoRevoking">9.5.1</a>
   <li>blob
    <ul>
     <li>argument for FileReader/readAsText(blob, label), <a href="#dom-filereader-readastextblob-label-blob">7.3</a>
     <li>argument for FileReader/readAsArrayBuffer(blob), FileReader/readAsText(blob), FileReader/readAsDataURL(blob), URL/createObjectURL(blob), URL/createFor(blob), <a href="#dom-filereader-readasarraybufferblob-blob">7.3.4.7</a>
     <li>argument for FileReaderSync/readAsArrayBuffer(blob), <a href="#dom-filereadersync-readasarraybufferblob-blob">7.6.1</a>
     <li>argument for FileReaderSync/readAsText(blob, label), <a href="#dom-filereadersync-readastextblob-label-blob">7.6.1</a>
     <li>argument for FileReaderSync/readAsDataURL(blob), <a href="#dom-filereadersync-readasdataurlblob-blob">7.6.1</a>
    </ul>
   <li>Blob, <a href="#blob0">4</a>
   <li>Blob(blobParts, options), <a href="#dom-blob-blobblobparts-options">4</a>
   <li>BlobPart, <a href="#typedefdef-blobpart">4</a>
   <li>blobParts, <a href="#dom-blob-blobblobparts-options-blobparts">4</a>
   <li>BlobPropertyBag, <a href="#dictdef-blobpropertybag">4</a>
   <li>Blob URL, <a href="#blob-url">9.3</a>
   <li>Blob URL’s origin, <a href="#origin-of-a-blob-url">9.3.1</a>
   <li>Blob URL Store, <a href="#BlobURLStore">9.6</a>
   <li>close(), <a href="#dfn-close">4.3.2</a>
   <li>closed, <a href="#closed">4</a>
   <li>CLOSED, <a href="#dfn-closedState">4</a>
   <li>conforming user agent, <a href="#dfn-conforming-implementation">2</a>
   <li>contentType
    <ul>
     <li>argument for Blob/slice(start, end, contentType), <a href="#dom-blob-slicestart-end-contenttype-contenttype">4</a>
     <li>argument for Blob/slice(), <a href="#dom-blob-slice-contenttype">4.3.1</a>
    </ul>
   <li>createFor(blob), <a href="#dom-url-createforblob">9.5.1</a>
   <li>createObjectURL(blob), <a href="#dom-url-createobjecturlblob">9.5.1</a>
   <li>dereference, <a href="#dereference">9.4</a>
   <li>DONE, <a href="#dom-filereader-done">7.3.3</a>
   <li>EMPTY, <a href="#dom-filereader-empty">7.3.3</a>
   <li>encoding determination, <a href="#encoding-determination">7.4</a>
   <li>end
    <ul>
     <li>argument for Blob/slice(start, end, contentType), <a href="#dom-blob-slicestart-end-contenttype-end">4</a>
     <li>argument for Blob/start(), <a href="#dom-blob-start-end">4.3.1</a>
    </ul>
   <li>error
    <ul>
     <li>event for FileReader, <a href="#dom-filereader-error">7.5.1</a>
     <li>attribute for FileReader, <a href="#dom-filereader-error0">8.1</a>
    </ul>
   <li>failure reason, <a href="#failureReason">8.1</a>
   <li>File, <a href="#file0">5</a>
   <li>fileBits, <a href="#dom-file-filefilebits-filename-options-filebits">5</a>
   <li>File(fileBits, fileName, options), <a href="#dom-file-filefilebits-filename-options">5</a>
   <li>FileList, <a href="#filelist0">6</a>
   <li>fileName, <a href="#dom-file-filefilebits-filename-options-filename">5</a>
   <li>FilePropertyBag, <a href="#dictdef-filepropertybag">5</a>
   <li>FileReader(), <a href="#dom-filereader-filereader">7.3</a>
   <li>FileReader, <a href="#filereader">7.3</a>
   <li>file read error, <a href="#file-read-error">8</a>
   <li>FileReaderSync(), <a href="#dom-filereadersync-filereadersync">7.6.1</a>
   <li>FileReaderSync, <a href="#filereadersync">7.6.1</a>
   <li>file reading task source, <a href="#fileReadingTaskSource">7.2</a>
   <li>file type guidelines, <a href="#file-type-guidelines">5</a>
   <li>fire a progress event, <a href="#fire-a-progress-event">7.5</a>
   <li>index
    <ul>
     <li>argument for FileList/item(index), <a href="#dom-filelist-itemindex-index">6</a>
     <li>argument for FileList/item(), <a href="#dom-filelist-item-index">6.2</a>
    </ul>
   <li>isClosed, <a href="#dom-blob-isclosed">4.2</a>
   <li>item(index), <a href="#dom-filelist-itemindex">6.2</a>
   <li>label
    <ul>
     <li>argument for FileReader/readAsText(blob, label), <a href="#dom-filereader-readastextblob-label-label">7.3</a>
     <li>argument for FileReader/readAsText(), <a href="#dom-filereader-readastext-label">7.3.4.3</a>
     <li>argument for FileReaderSync/readAsText(blob, label), <a href="#dom-filereadersync-readastextblob-label-label">7.6.1</a>
    </ul>
   <li>lastModified
    <ul>
     <li>dict-member for FilePropertyBag, <a href="#dom-filepropertybag-lastmodified">5.1.1</a>
     <li>attribute for File, <a href="#dom-file-lastmodified">5.2</a>
    </ul>
   <li>length, <a href="#dom-filelist-length">6.1</a>
   <li>load, <a href="#dom-filereader-load">7.5.1</a>
   <li>loadend, <a href="#dom-filereader-loadend">7.5.1</a>
   <li>LOADING, <a href="#dom-filereader-loading">7.3.3</a>
   <li>loadstart, <a href="#dom-filereader-loadstart">7.5.1</a>
   <li>name, <a href="#dom-file-name">5.2</a>
   <li>NotFoundError, <a href="#exceptdef-notfounderror">8.1</a>
   <li>NotReadableError, <a href="#exceptdef-notreadableerror">8.1</a>
   <li>onabort, <a href="#dom-filereader-onabort">7.3.2</a>
   <li>onerror, <a href="#dom-filereader-onerror">7.3.2</a>
   <li>onload, <a href="#dom-filereader-onload">7.3.2</a>
   <li>onloadend, <a href="#dom-filereader-onloadend">7.3.2</a>
   <li>onloadstart, <a href="#dom-filereader-onloadstart">7.3.2</a>
   <li>onprogress, <a href="#dom-filereader-onprogress">7.3.2</a>
   <li>OPENED, <a href="#dfn-openState">4</a>
   <li>options
    <ul>
     <li>argument for Blob/Blob(blobParts, options), <a href="#dom-blob-blobblobparts-options-options">4</a>
     <li>argument for File/File(fileBits, fileName, options), <a href="#dom-file-filefilebits-filename-options-options">5</a>
    </ul>
   <li>origin of a Blob URL, <a href="#origin-of-a-blob-url">9.3.1</a>
   <li>Preventing selection looping, <a href="#selection-looping">10</a>
   <li>process read, <a href="#process-read">7.1</a>
   <li>process read data, <a href="#process-read-data">7.1</a>
   <li>process read EOF, <a href="#process-read-EOF">7.1</a>
   <li>process read error, <a href="#process-read-error">7.1</a>
   <li>progress, <a href="#dom-filereader-progress">7.5.1</a>
   <li>readability state, <a href="#readabilityState">4</a>
   <li>readAsArrayBuffer(blob)
    <ul>
     <li>method for FileReader, <a href="#dom-filereader-readasarraybufferblob">7.3.4.4</a>
     <li>method for FileReaderSync, <a href="#dom-filereadersync-readasarraybufferblob">7.6.1.4</a>
    </ul>
   <li>readAsDataURL(blob)
    <ul>
     <li>method for FileReader, <a href="#dom-filereader-readasdataurlblob">7.3.4.2</a>
     <li>method for FileReaderSync, <a href="#dom-filereadersync-readasdataurlblob">7.6.1.3</a>
    </ul>
   <li>readAsText(blob)
    <ul>
     <li>method for FileReader, <a href="#dom-filereader-readastextblob-label">7.3.4.3</a>
     <li>method for FileReaderSync, <a href="#dom-filereadersync-readastextblob-label">7.6.1.2</a>
    </ul>
   <li>readAsText(blob, label)
    <ul>
     <li>method for FileReader, <a href="#dom-filereader-readastextblob-label">7.3.4.3</a>
     <li>method for FileReaderSync, <a href="#dom-filereadersync-readastextblob-label">7.6.1.2</a>
    </ul>
   <li>read method, <a href="#read-methods">7.3.4</a>
   <li>read operation, <a href="#readOperation">7.1</a>
   <li>readyState, <a href="#dom-filereader-readystate">7.3.3</a>
   <li>remove an entry from the Blob URL Store, <a href="#removeTheEntry">9.6</a>
   <li>result, <a href="#dom-filereader-result">7.3.4.1</a>
   <li>Revocation List, <a href="#revokeList">9.6</a>
   <li>revokeObjectURL(url), <a href="#dom-url-revokeobjecturlurl">9.5.1</a>
   <li>SecurityError, <a href="#exceptdef-securityerror">8.1</a>
   <li>size, <a href="#dom-blob-size">4.2</a>
   <li>slice(start, end, contentType), slice(start, end), slice(start), slice(), <a href="#dfn-slice">4.3.1</a>
   <li>snapshot state, <a href="#snapshot-state">4</a>
   <li>start
    <ul>
     <li>argument for Blob/slice(start, end, contentType), <a href="#dom-blob-slicestart-end-contenttype-start">4</a>
     <li>argument for Blob/start(), <a href="#dom-blob-start-start">4.3.1</a>
    </ul>
   <li>synchronous flag, <a href="#synchronousFlag">7.1</a>
   <li>synchronous read method, <a href="#read-method-sync">7.6.1</a>
   <li>System-sensitive files, <a href="#sensitive-files">10</a>
   <li>terminate an algorithm, <a href="#terminate-an-algorithm">3</a>
   <li>terminate this algorithm, <a href="#terminate-an-algorithm">3</a>
   <li>type
    <ul>
     <li>dict-member for BlobPropertyBag, <a href="#dfn-BPtype">4.1.1</a>
     <li>attribute for Blob, <a href="#dom-blob-type">4.2</a>
     <li>dict-member for FilePropertyBag, <a href="#dom-filepropertybag-type">5.1.1</a>
    </ul>
   <li>Unicode Serialization of a Blob URL, <a href="#unicodeBlobURL">9.3.2</a>
   <li>url, <a href="#dom-url-revokeobjecturlurl-url">9.5.1</a>
  </ul>
  <h3 class="no-num heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="indexlist">
   <li><a data-link-type="biblio" href="#biblio-dom-ls">[dom-ls]</a> defines the following terms:
    <ul>
     <li><a href="http://dom.spec.whatwg.org/#domerror">DOMError</a>
     <li><a href="http://dom.spec.whatwg.org/#eventtarget">EventTarget</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-html">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a>
     <li><a href="https://html.spec.whatwg.org/#datatransfer">DataTransfer</a>
     <li><a href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a>
     <li><a href="https://html.spec.whatwg.org/#htmlinputelement">HTMLInputElement</a>
     <li><a href="https://html.spec.whatwg.org/#window">Window</a>
     <li><a href="https://html.spec.whatwg.org/#workerglobalscope">WorkerGlobalScope</a>
     <li><a href="https://html.spec.whatwg.org/#the-a-element">a</a>
     <li><a href="https://html.spec.whatwg.org/#the-iframe-element">iframe</a>
     <li><a href="https://html.spec.whatwg.org/#the-img-element">img</a>
     <li><a href="https://html.spec.whatwg.org/#the-input-element">input</a>
     <li><a href="https://html.spec.whatwg.org/#dom-messageport-postmessage">postMessage()</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-typedarray">[typedarray]</a> defines the following terms:
    <ul>
     <li><a href="http://www.khronos.org/registry/typedarray/specs/latest/#ArrayBuffer">ArrayBuffer</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-webidl">[WebIDL]</a> defines the following terms:
    <ul>
     <li><a href="http://heycam.github.io/webidl/#idl-DOMString">DOMString</a>
    </ul>
  </ul>
  <h2 class="no-num heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-fetch"><a class="self-link" href="#biblio-fetch"></a>[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-html"><a class="self-link" href="#biblio-html"></a>[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/">HTML</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/">https://html.spec.whatwg.org/</a>
   <dt id="biblio-webidl"><a class="self-link" href="#biblio-webidl"></a>[WebIDL]
   <dd>Cameron McCormack. <a href="http://www.w3.org/TR/WebIDL/">Web IDL</a>. 19 April 2012. CR. URL: <a href="http://www.w3.org/TR/WebIDL/">http://www.w3.org/TR/WebIDL/</a>
   <dt id="biblio-dom-ls"><a class="self-link" href="#biblio-dom-ls"></a>[DOM-LS]
   <dd>Document Object Model URL: <a href="http://dom.spec.whatwg.org/">http://dom.spec.whatwg.org/</a>
   <dt id="biblio-rfc2119"><a class="self-link" href="#biblio-rfc2119"></a>[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-typedarray"><a class="self-link" href="#biblio-typedarray"></a>[TYPEDARRAY]
   <dd>David Herman; Kenneth Russell. <a href="https://www.khronos.org/registry/typedarray/specs/latest/">Typed Array Specification</a>. 26 June 2013. Khronos Working Draft. URL: <a href="https://www.khronos.org/registry/typedarray/specs/latest/">https://www.khronos.org/registry/typedarray/specs/latest/</a>
   <dt id="biblio-url"><a class="self-link" href="#biblio-url"></a>[URL]
   <dd>Anne van Kesteren; Sam Ruby. <a href="http://www.w3.org/TR/url-1/">URL</a>. 9 December 2014. WD. URL: <a href="http://www.w3.org/TR/url-1/">http://www.w3.org/TR/url-1/</a>
   <dt id="biblio-workers"><a class="self-link" href="#biblio-workers"></a>[WORKERS]
   <dd>Ian Hickson. <a href="http://www.w3.org/TR/workers/">Web Workers</a>. 1 May 2012. CR. URL: <a href="http://www.w3.org/TR/workers/">http://www.w3.org/TR/workers/</a>
  </dl>
  <h3 class="no-num heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-ecma-262"><a class="self-link" href="#biblio-ecma-262"></a>[ECMA-262]
   <dd><a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">ECMAScript Language Specification, Edition 5.1</a>. June 2011. URL: <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">http://www.ecma-international.org/publications/standards/Ecma-262.htm</a>
   <dt id="biblio-sniff"><a class="self-link" href="#biblio-sniff"></a>[SNIFF]
   <dd>Gordon P. Hemsley. <a href="https://mimesniff.spec.whatwg.org/">MIME Sniffing Standard</a>. Living Standard. URL: <a href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
   <dt id="biblio-unicode"><a class="self-link" href="#biblio-unicode"></a>[UNICODE]
   <dd><a href="http://www.unicode.org/versions/latest/">The Unicode Standard</a>. URL: <a href="http://www.unicode.org/versions/latest/">http://www.unicode.org/versions/latest/</a>
   <dt id="biblio-dom"><a class="self-link" href="#biblio-dom"></a>[DOM]
   <dd>Anne van Kesteren; et al. <a href="http://www.w3.org/TR/dom/">W3C DOM4</a>. 10 July 2014. LCWD. URL: <a href="http://www.w3.org/TR/dom/">http://www.w3.org/TR/dom/</a>
   <dt id="biblio-progress-events"><a class="self-link" href="#biblio-progress-events"></a>[PROGRESS-EVENTS]
   <dd>Anne van Kesteren; Charles McCathie Nevile; Jungkee Song. <a href="http://www.w3.org/TR/progress-events/">Progress Events</a>. 11 February 2014. REC. URL: <a href="http://www.w3.org/TR/progress-events/">http://www.w3.org/TR/progress-events/</a>
   <dt id="biblio-rfc1630"><a class="self-link" href="#biblio-rfc1630"></a>[RFC1630]
   <dd>T. Berners-Lee. <a href="https://tools.ietf.org/html/rfc1630">Universal Resource Identifiers in WWW: A Unifying Syntax for the Expression of Names and Addresses of Objects on the Network as used in the World-Wide Web</a>. June 1994. Informational. URL: <a href="https://tools.ietf.org/html/rfc1630">https://tools.ietf.org/html/rfc1630</a>
   <dt id="biblio-rfc1738"><a class="self-link" href="#biblio-rfc1738"></a>[RFC1738]
   <dd>T. Berners-Lee; L. Masinter; M. McCahill. <a href="https://tools.ietf.org/html/rfc1738">Uniform Resource Locators (URL)</a>. December 1994. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc1738">https://tools.ietf.org/html/rfc1738</a>
   <dt id="biblio-rfc2046"><a class="self-link" href="#biblio-rfc2046"></a>[RFC2046]
   <dd>N. Freed; N. Borenstein. <a href="https://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>. November 1996. Draft Standard. URL: <a href="https://tools.ietf.org/html/rfc2046">https://tools.ietf.org/html/rfc2046</a>
   <dt id="biblio-rfc2397"><a class="self-link" href="#biblio-rfc2397"></a>[RFC2397]
   <dd>L. Masinter. <a href="https://tools.ietf.org/html/rfc2397">The "data" URL scheme</a>. August 1998. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc2397">https://tools.ietf.org/html/rfc2397</a>
   <dt id="biblio-rfc4122"><a class="self-link" href="#biblio-rfc4122"></a>[RFC4122]
   <dd>P. Leach; M. Mealling; R. Salz. <a href="https://tools.ietf.org/html/rfc4122">A Universally Unique IDentifier (UUID) URN Namespace</a>. July 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4122">https://tools.ietf.org/html/rfc4122</a>
   <dt id="biblio-rfc5234"><a class="self-link" href="#biblio-rfc5234"></a>[RFC5234]
   <dd>D. Crocker, Ed.; P. Overell. <a href="https://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>. January 2008. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc5234">https://tools.ietf.org/html/rfc5234</a>
   <dt id="biblio-rfc6266"><a class="self-link" href="#biblio-rfc6266"></a>[RFC6266]
   <dd>J. Reschke. <a href="https://tools.ietf.org/html/rfc6266">Use of the Content-Disposition Header Field in the Hypertext Transfer Protocol (HTTP)</a>. June 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6266">https://tools.ietf.org/html/rfc6266</a>
   <dt id="biblio-rfc6454"><a class="self-link" href="#biblio-rfc6454"></a>[RFC6454]
   <dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6454">The Web Origin Concept</a>. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6454">https://tools.ietf.org/html/rfc6454</a>
   <dt id="biblio-rfc7230"><a class="self-link" href="#biblio-rfc7230"></a>[RFC7230]
   <dd>R. Fielding, Ed.; J. Reschke, Ed.. <a href="https://tools.ietf.org/html/rfc7230">Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>. June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7230">https://tools.ietf.org/html/rfc7230</a>
   <dt id="biblio-rfc7231"><a class="self-link" href="#biblio-rfc7231"></a>[RFC7231]
   <dd>R. Fielding, Ed.; J. Reschke, Ed.. <a href="https://tools.ietf.org/html/rfc7231">Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a>. June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7231">https://tools.ietf.org/html/rfc7231</a>
   <dt id="biblio-webrtc"><a class="self-link" href="#biblio-webrtc"></a>[WEBRTC]
   <dd>Adam Bergkvist; et al. <a href="http://www.w3.org/TR/webrtc/">WebRTC 1.0: Real-time Communication Between Browsers</a>. 10 February 2015. WD. URL: <a href="http://www.w3.org/TR/webrtc/">http://www.w3.org/TR/webrtc/</a>
  </dl>
  <h2 class="no-num heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
  <pre class="idl">[<a data-global-name="Blob<interface>/Blob(blobParts, options)<constructor>" href="#dom-blob-blobblobparts-options">Constructor</a>(optional sequence&lt;<a data-link-type="idl-name" href="#typedefdef-blobpart">BlobPart</a>> <a data-global-name="Blob<interface>/Blob(blobParts, options)<method>/blobParts<argument>" href="#dom-blob-blobblobparts-options-blobparts">blobParts</a>, optional <a data-link-type="idl-name" href="#dictdef-blobpropertybag">BlobPropertyBag</a> <a data-global-name="Blob<interface>/Blob(blobParts, options)<method>/options<argument>" href="#dom-blob-blobblobparts-options-options">options</a>),
 Exposed=(Window,Worker)]
interface <a data-global-name="" href="#blob0">Blob</a> {

  readonly attribute unsigned long long <a class="idl-code" data-global-name="Blob<interface>/size<attribute>" data-link-type="attribute" data-readonly="" data-type="unsigned long long " href="#dom-blob-size">size</a>;
  readonly attribute DOMString <a class="idl-code" data-global-name="Blob<interface>/type<attribute>" data-link-type="attribute" data-readonly="" data-type="DOMString " href="#dom-blob-type">type</a>;
  readonly attribute boolean <a class="idl-code" data-global-name="Blob<interface>/isClosed<attribute>" data-link-type="attribute" data-readonly="" data-type="boolean " href="#dom-blob-isclosed">isClosed</a>;

  //slice Blob into byte-ranged chunks

  <a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="Blob<interface>/slice(start, end, contentType)<method>/slice(start, end)<method>/slice(start)<method>/slice()<method>" data-link-type="method" href="#dfn-slice">slice</a>([Clamp] optional long long <a data-global-name="Blob<interface>/slice(start, end, contentType)<method>/start<argument>" href="#dom-blob-slicestart-end-contenttype-start">start</a>,
             [Clamp] optional long long <a data-global-name="Blob<interface>/slice(start, end, contentType)<method>/end<argument>" href="#dom-blob-slicestart-end-contenttype-end">end</a>,
             optional DOMString <a data-global-name="Blob<interface>/slice(start, end, contentType)<method>/contentType<argument>" href="#dom-blob-slicestart-end-contenttype-contenttype">contentType</a>);
  void <a class="idl-code" data-global-name="Blob<interface>/close()<method>" data-link-type="method" href="#dfn-close">close</a>();

};

dictionary <a data-global-name="" href="#dictdef-blobpropertybag">BlobPropertyBag</a> {
  DOMString <a class="idl-code" data-default="&quot;&quot;" data-global-name="BlobPropertyBag<dictionary>/type<dict-member>" data-link-type="dict-member" data-type="DOMString " href="#dfn-BPtype">type</a> = "";
};

typedef (ArrayBuffer or <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#arraybufferview">ArrayBufferView</a> or <a data-link-type="idl-name" href="#blob0">Blob</a> or DOMString) <a data-global-name="" href="#typedefdef-blobpart">BlobPart</a>;

[<a data-global-name="File<interface>/File(fileBits, fileName, options)<constructor>" href="#dom-file-filefilebits-filename-options">Constructor</a>(sequence&lt;<a data-link-type="idl-name" href="#typedefdef-blobpart">BlobPart</a>> <a data-global-name="File<interface>/File(fileBits, fileName, options)<method>/fileBits<argument>" href="#dom-file-filefilebits-filename-options-filebits">fileBits</a>,
             [EnsureUTF16] DOMString <a data-global-name="File<interface>/File(fileBits, fileName, options)<method>/fileName<argument>" href="#dom-file-filefilebits-filename-options-filename">fileName</a>,
             optional <a data-link-type="idl-name" href="#dictdef-filepropertybag">FilePropertyBag</a> <a data-global-name="File<interface>/File(fileBits, fileName, options)<method>/options<argument>" href="#dom-file-filefilebits-filename-options-options">options</a>),
 Exposed=(Window,Worker)]
interface <a data-global-name="" href="#file0">File</a> : <a data-link-type="idl-name" href="#blob0">Blob</a> {
  readonly attribute DOMString <a class="idl-code" data-global-name="File<interface>/name<attribute>" data-link-type="attribute" data-readonly="" data-type="DOMString " href="#dom-file-name">name</a>;
  readonly attribute long long <a class="idl-code" data-global-name="File<interface>/lastModified<attribute>" data-link-type="attribute" data-readonly="" data-type="long long " href="#dom-file-lastmodified">lastModified</a>;
};

dictionary <a data-global-name="" href="#dictdef-filepropertybag">FilePropertyBag</a> {
  DOMString <a class="idl-code" data-default="&quot;&quot;" data-global-name="FilePropertyBag<dictionary>/type<dict-member>" data-link-type="dict-member" data-type="DOMString " href="#dom-filepropertybag-type">type</a> = "";
  long long <a class="idl-code" data-global-name="FilePropertyBag<dictionary>/lastModified<dict-member>" data-link-type="dict-member" data-type="long long " href="#dom-filepropertybag-lastmodified">lastModified</a>;
};

[Exposed=(Window,Worker)]
interface <a data-global-name="" href="#filelist0">FileList</a> {
  getter <a data-link-type="idl-name" href="#file0">File</a>? <a class="idl-code" data-global-name="FileList<interface>/item(index)<method>" data-link-type="method" href="#dom-filelist-itemindex">item</a>(unsigned long <a data-global-name="FileList<interface>/item(index)<method>/index<argument>" href="#dom-filelist-itemindex-index">index</a>);
  readonly attribute unsigned long <a class="idl-code" data-global-name="FileList<interface>/length<attribute>" data-link-type="attribute" data-readonly="" data-type="unsigned long " href="#dom-filelist-length">length</a>;
};

[<a data-global-name="FileReader<interface>/FileReader()<constructor>" href="#dom-filereader-filereader">Constructor</a>, Exposed=(Window,Worker)]
interface <a data-global-name="" href="#filereader">FileReader</a>: <a data-link-type="idl-name" href="http://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {

  // async read methods
  void <a class="idl-code" data-global-name="FileReader<interface>/readAsArrayBuffer(blob)<method>" data-link-type="method" href="#dom-filereader-readasarraybufferblob">readAsArrayBuffer</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="FileReader<interface>/readAsArrayBuffer(blob)<method>/blob<argument>" data-link-type="argument" href="#dom-filereader-readasarraybufferblob-blob">blob</a>);
  void <a class="idl-code" data-global-name="FileReader<interface>/readAsText(blob, label)<method>/readAsText(blob)<method>" data-link-type="method" href="#dom-filereader-readastextblob-label">readAsText</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a data-global-name="FileReader<interface>/readAsText(blob, label)<method>/blob<argument>" href="#dom-filereader-readastextblob-label-blob">blob</a>, optional DOMString <a data-global-name="FileReader<interface>/readAsText(blob, label)<method>/label<argument>" href="#dom-filereader-readastextblob-label-label">label</a>);
  void <a class="idl-code" data-global-name="FileReader<interface>/readAsDataURL(blob)<method>" data-link-type="method" href="#dom-filereader-readasdataurlblob">readAsDataURL</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="FileReader<interface>/readAsDataURL(blob)<method>/blob<argument>" data-link-type="argument" href="#dom-filereader-readasarraybufferblob-blob">blob</a>);

  void <a class="idl-code" data-global-name="FileReader<interface>/abort()<method>" data-link-type="method" href="#dom-filereader-abort">abort</a>();

  // states
  const unsigned short <a class="idl-code" data-global-name="FileReader<interface>/EMPTY<const>" data-link-type="const" href="#dom-filereader-empty">EMPTY</a> = 0;
  const unsigned short <a class="idl-code" data-global-name="FileReader<interface>/LOADING<const>" data-link-type="const" href="#dom-filereader-loading">LOADING</a> = 1;
  const unsigned short <a class="idl-code" data-global-name="FileReader<interface>/DONE<const>" data-link-type="const" href="#dom-filereader-done">DONE</a> = 2;


  readonly attribute unsigned short <a class="idl-code" data-global-name="FileReader<interface>/readyState<attribute>" data-link-type="attribute" data-readonly="" data-type="unsigned short " href="#dom-filereader-readystate">readyState</a>;

  // File or Blob data
  readonly attribute (DOMString or ArrayBuffer)? <a class="idl-code" data-global-name="FileReader<interface>/result<attribute>" data-link-type="attribute" data-readonly="" data-type="(DOMString or ArrayBuffer)? " href="#dom-filereader-result">result</a>;

  readonly attribute <a data-link-type="idl-name" href="http://dom.spec.whatwg.org/#domerror">DOMError</a>? <a class="idl-code" data-global-name="FileReader<interface>/error<attribute>" data-link-type="attribute" data-readonly="" data-type="DOMError? " href="#dom-filereader-error0">error</a>;

  // event handler content attributes
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onloadstart<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onloadstart">onloadstart</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onprogress<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onprogress">onprogress</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onload<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onload">onload</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onabort<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onabort">onabort</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onerror<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onerror">onerror</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/#eventhandler">EventHandler</a> <a class="idl-code" data-global-name="FileReader<interface>/onloadend<attribute>" data-link-type="attribute" data-type="EventHandler " href="#dom-filereader-onloadend">onloadend</a>;

};

[<a data-global-name="FileReaderSync<interface>/FileReaderSync()<constructor>" href="#dom-filereadersync-filereadersync">Constructor</a>, Exposed=Worker]
interface <a data-global-name="" href="#filereadersync">FileReaderSync</a> {
  // Synchronously return strings

  ArrayBuffer <a class="idl-code" data-global-name="FileReaderSync<interface>/readAsArrayBuffer(blob)<method>" data-link-type="method" href="#dom-filereadersync-readasarraybufferblob">readAsArrayBuffer</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a data-global-name="FileReaderSync<interface>/readAsArrayBuffer(blob)<method>/blob<argument>" href="#dom-filereadersync-readasarraybufferblob-blob">blob</a>);
  DOMString <a class="idl-code" data-global-name="FileReaderSync<interface>/readAsText(blob, label)<method>/readAsText(blob)<method>" data-link-type="method" href="#dom-filereadersync-readastextblob-label">readAsText</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a data-global-name="FileReaderSync<interface>/readAsText(blob, label)<method>/blob<argument>" href="#dom-filereadersync-readastextblob-label-blob">blob</a>, optional DOMString <a data-global-name="FileReaderSync<interface>/readAsText(blob, label)<method>/label<argument>" href="#dom-filereadersync-readastextblob-label-label">label</a>);
  DOMString <a class="idl-code" data-global-name="FileReaderSync<interface>/readAsDataURL(blob)<method>" data-link-type="method" href="#dom-filereadersync-readasdataurlblob">readAsDataURL</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a data-global-name="FileReaderSync<interface>/readAsDataURL(blob)<method>/blob<argument>" href="#dom-filereadersync-readasdataurlblob-blob">blob</a>);
};

partial interface <a class="idl-code" data-link-type="interface" href="https://url.spec.whatwg.org/#url">URL</a> {
  static DOMString <a class="idl-code" data-global-name="URL<interface>/createObjectURL(blob)<method>" data-link-type="method" href="#dom-url-createobjecturlblob">createObjectURL</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="URL<interface>/createObjectURL(blob)<method>/blob<argument>" data-link-type="argument" href="#dom-filereader-readasarraybufferblob-blob">blob</a>);
  static DOMString <a class="idl-code" data-global-name="URL<interface>/createFor(blob)<method>" data-link-type="method" href="#dom-url-createforblob">createFor</a>(<a data-link-type="idl-name" href="#blob0">Blob</a> <a class="idl-code" data-global-name="URL<interface>/createFor(blob)<method>/blob<argument>" data-link-type="argument" href="#dom-filereader-readasarraybufferblob-blob">blob</a>);
  static void <a class="idl-code" data-global-name="URL<interface>/revokeObjectURL(url)<method>" data-link-type="method" href="#dom-url-revokeobjecturlurl">revokeObjectURL</a>(DOMString <a class="idl-code" data-global-name="URL<interface>/revokeObjectURL(url)<method>/url<argument>" data-link-type="argument" href="#dom-url-revokeobjecturlurl-url">url</a>);
};

</pre>
  <h2 class="no-num heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue">This section is provisional; more security data may supplement this in subsequent drafts.<a href="#issue-61296551"> ↵ </a></div>
  </div>
  <script>self = (typeof window !== 'undefined')
	? window   // if in browser
	: (
		(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)
		? self // if in worker
		: {}   // if in node js
	);

/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 * MIT license http://www.opensource.org/licenses/mit-license.php/
 * @author Lea Verou http://lea.verou.me
 */

var Prism = (function(){

// Private helper vars
var lang = /\blang(?:uage)?-(?!\*)(\w+)\b/i;

var _ = self.Prism = {
	util: {
		encode: function (tokens) {
			if (tokens instanceof Token) {
				return new Token(tokens.type, _.util.encode(tokens.content), tokens.alias);
			} else if (_.util.type(tokens) === 'Array') {
				return tokens.map(_.util.encode);
			} else {
				return tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\u00a0/g, ' ');
			}
		},

		type: function (o) {
			return Object.prototype.toString.call(o).match(/\[object (\w+)\]/)[1];
		},

		// Deep clone a language definition (e.g. to extend it)
		clone: function (o) {
			var type = _.util.type(o);

			switch (type) {
				case 'Object':
					var clone = {};

					for (var key in o) {
						if (o.hasOwnProperty(key)) {
							clone[key] = _.util.clone(o[key]);
						}
					}

					return clone;

				case 'Array':
					return o.slice();
			}

			return o;
		}
	},

	languages: {
		extend: function (id, redef) {
			var lang = _.util.clone(_.languages[id]);

			for (var key in redef) {
				lang[key] = redef[key];
			}

			return lang;
		},

		// Insert a token before another token in a language literal
		insertBefore: function (inside, before, insert, root) {
			root = root || _.languages;
			var grammar = root[inside];
			var ret = {};

			for (var token in grammar) {

				if (grammar.hasOwnProperty(token)) {

					if (token == before) {

						for (var newToken in insert) {

							if (insert.hasOwnProperty(newToken)) {
								ret[newToken] = insert[newToken];
							}
						}
					}

					ret[token] = grammar[token];
				}
			}

			return root[inside] = ret;
		},

		// Traverse a language definition with Depth First Search
		DFS: function(o, callback, type) {
			for (var i in o) {
				if (o.hasOwnProperty(i)) {
					callback.call(o, i, o[i], type || i);

					if (_.util.type(o[i]) === 'Object') {
						_.languages.DFS(o[i], callback);
					} else if (_.util.type(o[i]) === 'Array') {
						_.languages.DFS(o[i], callback, i);
					}
				}
			}
		}
	},

	highlightAll: function(async, callback) {
		var elements = document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');
		for (var i=0, element; element = elements[i++];) {
			if (element.classList.contains("idl")) {
				// Bikeshed handles IDL blocks already.
				continue;
			}
			_.highlightElement(element, async === true, callback);
		}

		var elements = document.querySelectorAll('pre[class*="language-"], [class*="language-"] pre, pre[class*="lang-"], [class*="lang-"] pre');
		for (var i=0, element; element = elements[i++];) {
			if (element.firstElementChild && element.firstElementChild.tagName.toLowerCase() == "code") {
				// Already handled by the previous loop
				continue;
			}
			if (element.classList.contains("idl")) {
				// Bikeshed handles IDL blocks already.
				continue;
			}
			_.highlightElement(element, async === true, callback);
		}
	},

	highlightElement: function(element, async, callback) {
		// Find language
		var language, grammar, parent = element;

		while (parent && !lang.test(parent.className)) {
			parent = parent.parentNode;
		}

		if (parent) {
			language = (parent.className.match(lang) || [,''])[1];
			grammar = _.languages[language];
		}

		if (!grammar) {
			return;
		}

		// Set language on the element, if not present
		element.className = element.className.replace(lang, '').replace(/\s+/g, ' ') + ' language-' + language;

		// Set language on the parent, for styling
		parent = element.parentNode;

		if (/pre/i.test(parent.nodeName)) {
			parent.className = parent.className.replace(lang, '').replace(/\s+/g, ' ') + ' language-' + language;
		}

		var code = element.textContent;

		if(!code) {
			return;
		}

		var env = {
			element: element,
			language: language,
			grammar: grammar,
			code: code
		};

		_.hooks.run('before-highlight', env);

		if (async && self.Worker) {
			var worker = new Worker(_.filename);

			worker.onmessage = function(evt) {
				env.highlightedCode = Token.stringify(JSON.parse(evt.data), language);

				_.hooks.run('before-insert', env);

				env.element.innerHTML = env.highlightedCode;

				callback && callback.call(env.element);
				_.hooks.run('after-highlight', env);
			};

			worker.postMessage(JSON.stringify({
				language: env.language,
				code: env.code
			}));
		}
		else {
			env.highlightedCode = _.highlight(env.code, env.grammar, env.language)

			_.hooks.run('before-insert', env);

			env.element.innerHTML = env.highlightedCode;

			callback && callback.call(element);

			_.hooks.run('after-highlight', env);
		}
	},

	highlight: function (text, grammar, language) {
		var tokens = _.tokenize(text, grammar);
		return Token.stringify(_.util.encode(tokens), language);
	},

	tokenize: function(text, grammar, language) {
		var Token = _.Token;

		var strarr = [text];

		var rest = grammar.rest;

		if (rest) {
			for (var token in rest) {
				grammar[token] = rest[token];
			}

			delete grammar.rest;
		}

		tokenloop: for (var token in grammar) {
			if(!grammar.hasOwnProperty(token) || !grammar[token]) {
				continue;
			}

			var patterns = grammar[token];
			patterns = (_.util.type(patterns) === "Array") ? patterns : [patterns];

			for (var j = 0; j < patterns.length; ++j) {
				var pattern = patterns[j],
					inside = pattern.inside,
					lookbehind = !!pattern.lookbehind,
					lookbehindLength = 0,
					alias = pattern.alias;

				pattern = pattern.pattern || pattern;

				for (var i=0; i<strarr.length; i++) { // Don’t cache length as it changes during the loop

					var str = strarr[i];

					if (strarr.length > text.length) {
						// Something went terribly wrong, ABORT, ABORT!
						break tokenloop;
					}

					if (str instanceof Token) {
						continue;
					}

					pattern.lastIndex = 0;

					var match = pattern.exec(str);

					if (match) {
						if(lookbehind) {
							lookbehindLength = match[1].length;
						}

						var from = match.index - 1 + lookbehindLength,
							match = match[0].slice(lookbehindLength),
							len = match.length,
							to = from + len,
							before = str.slice(0, from + 1),
							after = str.slice(to + 1);

						var args = [i, 1];

						if (before) {
							args.push(before);
						}

						var wrapped = new Token(token, inside? _.tokenize(match, inside) : match, alias);

						args.push(wrapped);

						if (after) {
							args.push(after);
						}

						Array.prototype.splice.apply(strarr, args);
					}
				}
			}
		}

		return strarr;
	},

	hooks: {
		all: {},

		add: function (name, callback) {
			var hooks = _.hooks.all;

			hooks[name] = hooks[name] || [];

			hooks[name].push(callback);
		},

		run: function (name, env) {
			var callbacks = _.hooks.all[name];

			if (!callbacks || !callbacks.length) {
				return;
			}

			for (var i=0, callback; callback = callbacks[i++];) {
				callback(env);
			}
		}
	}
};

var Token = _.Token = function(type, content, alias) {
	this.type = type;
	this.content = content;
	this.alias = alias;
};

Token.stringify = function(o, language, parent) {
	if (typeof o == 'string') {
		return o;
	}

	if (Object.prototype.toString.call(o) == '[object Array]') {
		return o.map(function(element) {
			return Token.stringify(element, language, o);
		}).join('');
	}

	var env = {
		type: o.type,
		content: Token.stringify(o.content, language, parent),
		tag: 'span',
		classes: ['token', o.type],
		attributes: {},
		language: language,
		parent: parent
	};

	if (env.type == 'comment') {
		env.attributes['spellcheck'] = 'true';
	}

	if (o.alias) {
		var aliases = _.util.type(o.alias) === 'Array' ? o.alias : [o.alias];
		Array.prototype.push.apply(env.classes, aliases);
	}

	_.hooks.run('wrap', env);

	var attributes = '';

	for (var name in env.attributes) {
		attributes += name + '="' + (env.attributes[name] || '') + '"';
	}

	return '<' + env.tag + ' class="' + env.classes.join(' ') + '" ' + attributes + '>' + env.content + '</' + env.tag + '>';

};

if (!self.document) {
	if (!self.addEventListener) {
		// in Node.js
		return self.Prism;
	}
 	// In worker
	self.addEventListener('message', function(evt) {
		var message = JSON.parse(evt.data),
		    lang = message.language,
		    code = message.code;

		self.postMessage(JSON.stringify(_.util.encode(_.tokenize(code, _.languages[lang]))));
		self.close();
	}, false);

	return self.Prism;
}

// Get current script and highlight
var script = document.getElementsByTagName('script');

script = script[script.length - 1];

if (script) {
	_.filename = script.src;

	if (document.addEventListener && !script.hasAttribute('data-manual')) {
		document.addEventListener('DOMContentLoaded', _.highlightAll);
	}
}

return self.Prism;

})();

if (typeof module !== 'undefined' && module.exports) {
	module.exports = Prism;
}
;
Prism.languages.clike = {
	'comment': [
		{
			pattern: /(^|[^\\])\/\*[\w\W]*?\*\//g,
			lookbehind: true
		},
		{
			pattern: /(^|[^\\:])\/\/.*?(\r?\n|$)/g,
			lookbehind: true
		}
	],
	'string': /("|')(\\?.)*?\1/g,
	'class-name': {
		pattern: /((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/ig,
		lookbehind: true,
		inside: {
			punctuation: /(\.|\\)/
		}
	},
	'keyword': /\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/g,
	'boolean': /\b(true|false)\b/g,
	'function': {
		pattern: /[a-z0-9_]+\(/ig,
		inside: {
			punctuation: /\(/
		}
	},
	'number': /\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,
	'operator': /[-+]{1,2}|!|<=?|>=?|={1,3}|&{1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,
	'ignore': /&(lt|gt|amp);/gi,
	'punctuation': /[{}[\];(),.:]/g
};
;
Prism.languages.markup = {
	'comment': /<!--[\w\W]*?-->/g,
	'prolog': /<\?.+?\?>/,
	'doctype': /<!DOCTYPE.+?>/,
	'cdata': /<!\[CDATA\[[\w\W]*?]]>/i,
	'tag': {
		pattern: /<\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|[^\s'">=]+))?\s*)*\/?>/gi,
		inside: {
			'tag': {
				pattern: /^<\/?[\w:-]+/i,
				inside: {
					'punctuation': /^<\/?/,
					'namespace': /^[\w-]+?:/
				}
			},
			'attr-value': {
				pattern: /=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,
				inside: {
					'punctuation': /=|>|"/g
				}
			},
			'punctuation': /\/?>/g,
			'attr-name': {
				pattern: /[\w:-]+/g,
				inside: {
					'namespace': /^[\w-]+?:/
				}
			}

		}
	},
	'entity': /\&#?[\da-z]{1,8};/gi
};

// Plugin to make entity title show the real entity, idea by Roman Komarov
Prism.hooks.add('wrap', function(env) {

	if (env.type === 'entity') {
		env.attributes['title'] = env.content.replace(/&amp;/, '&');
	}
});
;
Prism.languages.javascript = Prism.languages.extend('clike', {
	'keyword': /\b(break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|function|get|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/g,
	'number': /\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g
});

Prism.languages.insertBefore('javascript', 'keyword', {
	'regex': {
		pattern: /(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,
		lookbehind: true
	}
});

if (Prism.languages.markup) {
	Prism.languages.insertBefore('markup', 'tag', {
		'script': {
			pattern: /<script[\w\W]*?>[\w\W]*?<\/script>/ig,
			inside: {
				'tag': {
					pattern: /<script[\w\W]*?>|<\/script>/ig,
					inside: Prism.languages.markup.tag.inside
				},
				rest: Prism.languages.javascript
			}
		}
	});
}
;
</script></body>
</html>